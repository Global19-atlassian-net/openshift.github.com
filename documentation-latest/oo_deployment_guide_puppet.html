<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Asciidoctor 0.1.4" name="generator">
<meta content="OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;" name="author">
<title>OpenShift Origin Puppet Deployment Guide</title>
<style>@import url(http://openshift.redhat.com/app/assets/overpass.css);
@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/*
Origin theme source file

To build it:
- clone the asciidoctor-stylesheet-factory repo
- copy this theme file to the sass folder inside the repo
- copy the settings file to the sass/settings file inside the repo
- cd to the cloned repo
- bundle install
- compass compile
- compiled stylesheet is in the stylesheets/ directory
*/
/* Generated by Font Squirrel (http://www.fontsquirrel.com) on July 24, 2013 */
@font-face { font-family: 'source_code_pro'; src: url("fonts/sourcecodepro-regular-webfont.eot"); src: url("fonts/sourcecodepro-regular-webfont.eot?#iefix") format("embedded-opentype"), url("fonts/sourcecodepro-regular-webfont.woff") format("woff"), url("fonts/sourcecodepro-regular-webfont.ttf") format("truetype"), url("sourcecodepro-regular-webfont.svg#source_code_proregular") format("svg"); font-weight: normal; font-style: normal; }

/*
Settings and overrides for the Origin theme
*/
/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title, .tableblock > caption { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #006699; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #005580; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Overpass, sans-serif; font-weight: bold; font-style: normal; color: #222222; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #7f0a0c; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

/*
.clearfix,
.floatend { zoom: 1; &:before, &:after { content: " "; display: table; } &:after { clear: both; }
}
*/
code { font-size: inherit; padding: 0; white-space: nowrap; background-color: inherit; border: 0 solid #dddddd; -webkit-border-radius: 0; border-radius: 0; text-shadow: none; }

kbd.keyseq { color: #555555; }

kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: #222222; font-weight: bold; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 1.25em; }
#toc > ul, #toc > ol { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a, #toc ol.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1, #toc ol.sectlevel0 ol.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul, #toc ol { list-style-type: none; }

#toctitle { color: #6f6f6f; }

@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul, #toc.toc2 > ol { font-size: .95em; }
  #toc.toc2 ul ul, #toc.toc2 ol ol { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1, #toc.toc2 ol.sectlevel0 ol.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > .paragraph:last-child > p { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; line-height: 1.6; }
.sidebarblock > .content > .paragraph:last-child p { margin-bottom: 0; }

pre { color: black; font-family: source_code_pro, monospace, serif; overflow-x: auto; line-height: 1.4; }

.verseblock { margin-bottom: 1.25em; }

.literalblock, .listingblock { margin-bottom: 1.25em; }
.literalblock > .content > pre, .listingblock > .content > pre { background: #eeeeee; color: black; font-family: source_code_pro, monospace, serif; border-width: 0; padding: 0.8em 0.8em 0.6em 0.8em; word-wrap: break-word; line-height: 1.4; }
.literalblock > .content > pre.nowrap, .listingblock > .content > pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content > pre > code, .listingblock > .content > pre > code { font-size: 1em; white-space: inherit; color: black; font-family: source_code_pro, monospace, serif; padding: 0; background: none; font-weight: normal; border: none; }
@media only screen { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 1em; } }

.listingblock:hover .xml:before { content: "xml"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .html:before { content: "html"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .ruby:before { content: "ruby"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .asciidoc:before { content: "asciidoc"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .java:before { content: "java"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .javascript:before { content: "javascript"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .css:before { content: "css"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .scss:before { content: "scss"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: 0.8125em; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 0; border-radius: 0; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.halign-top, td.tableblock.halign-top { vertical-align: top; }

th.tableblock.halign-bottom, td.tableblock.halign-bottom { vertical-align: bottom; }

th.tableblock.halign-middle, td.tableblock.halign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist { list-style-type: none; margin-left: 0.625em; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

td.hdlist1 { vertical-align: top; padding-right: .8em; font-weight: bold; }

.qanda > ol > li > p:first-child { color: #005580; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: none; box-shadow: none; }

.imageblock { margin-bottom: 1.25em; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding: 0.75em 0.375em; margin-bottom: 1.25em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: none; cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #006699; color: #004c73; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

nav.global { background: #222; width: 100%; height: 4em; }
nav.global ul { list-style-type: none; margin: 0; }
nav.global li { display: inline-block; }
nav.global a { display: block; padding: .5em 1em; font-family: Overpass; font-size: 1.1em; color: white; }
nav.global a:hover { color: #ef2e32; }
nav.global a img { margin-top: .25em; height: 2.75em; }

#header > h1 { border: none; }

#toc { background: #eee; border-right: none; }
#toc.toc2 { box-shadow: 1px 0 1px rgba(0, 0, 0, 0.3); }

code { font-family: source_code_pro; }

.admonitionblock td.icon .icon-tip:before { color: #cc6; text-shadow: none; }

#footer { background-image: url("images/panda.png"); background-position: right bottom; background-repeat: no-repeat; }

/* Alignment Styles */
.halign-left { text-align: left }
.halign-center { text-align: center }
.halign-right { text-align: right }

.valign-top { vertical-align: top }
.valign-middle { vertical-align: middle }
.valign-bottom { vertical-align: bottom }</style>
<link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body class="article toc2">
<nav class="global">
<ul>
<li>
<a href="http://openshift.github.io">
<img alt="OpenShift Origin" src="images/logo.png">
</a>
</li>
<li>
<a href="index.html">Documentation Home</a>
</li>
</ul>
</nav>
<div id="header">
<h1>OpenShift Origin Puppet Deployment Guide</h1>
<span id="author">OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;</span>
<br>
<span id="revdate">LATEST DOC UPDATES</span>
<div class="toc2" id="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#puppet-setup">1. Puppet Setup</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#enterprise-prerequisites">1.1. Enterprise Prerequisites</a></li>
<li><a href="#install-puppet">1.2. Install Puppet</a></li>
</ul>
</li>
<li><a href="#generating-bind-tsig-key">2. Generating BIND TSIG Key</a></li>
<li><a href="#update-the-host-s-name">3. Update the Host&#8217;s Name</a></li>
<li><a href="#puppet-configuration">4. Puppet Configuration</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#configuring-an-all-in-one-host">4.1. Configuring an all-in-one host</a></li>
<li><a href="#configuring-separate-hosts-for-broker-node">4.2. Configuring separate hosts for broker/node</a></li>
<li><a href="#different-plugins-mdns-and-mongo-auth">4.3. Different plugins: mDNS and Mongo auth</a></li>
<li><a href="#different-plugins-kerberos-auth-and-dns">4.4. Different plugins: Kerberos auth and DNS</a></li>
<li><a href="#puppet-parameters">4.5. Puppet Parameters</a></li>
</ul>
</li>
<li><a href="#manual-tasks">5. Manual Tasks</a></li>
</ul>
</div>
</div>
<div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide will walk you through configuring a basic puppet script to install OpenShift Origin from RPMs.</p>
</div>
<div class="paragraph">
<p>The OpenShift Origin RPMs can be available from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your local repository - <a href="oo_notes_building_rpms_from_source.html">Building OpenShift Origin RPMs</a></p>
</li>
<li>
<p>OpenShift Origin nightly mirrors repository.</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://mirror.openshift.com/pub/origin-server/nightly/fedora-19/latest/x86_64" target="_blank">Fedora 19 repository</a></p>
</li>
<li>
<p><a href="https://mirror.openshift.com/pub/origin-server/nightly/rhel-6/latest/x86_64/" target="_blank">RHEL 6.4 repository</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
For OpenShift Origin broker/nodes to be configured properly you will need the host to be configured with a DNS resolvable hostname and static IP Address.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="puppet-setup"><a class="anchor" href="#puppet-setup"></a>1. Puppet Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="enterprise-prerequisites"><a class="anchor" href="#enterprise-prerequisites"></a>1.1. Enterprise Prerequisites</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
For Enterprise Linux systems you will need some extra repositories to install the necessary version of puppet. This is unnecessary for Fedora 19 systems.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://fedoraproject.org/wiki/EPEL">EPEL repository</a> - install the latest <a href="http://download.fedoraproject.org/pub/epel/6/i386/repoview/epel-release.html">epel-release package</a>.</p>
<div class="listingblock">
<div class="content">
<pre>yum install -y --nogpgcheck ${url_of_the_latest_epel-release_rpm}</pre>
</div>
</div>
</li>
<li>
<p><a href="http://docs.puppetlabs.com/guides/puppetlabs_package_repositories.html">PuppetLabs enterprise repository</a> - install the latest <a href="http://yum.puppetlabs.com/el/6/products/i386/">puppetlabs-release package</a>.</p>
<div class="listingblock">
<div class="content">
<pre>yum install -y --nogpgcheck ${url_of_the_latest_puppet-release_rpm}</pre>
</div>
</div>
<div class="paragraph">
<p>Add <code>exclude=*mcollective* activemq</code> to the puppet repo entries in the file <code>/etc/yum.repos.d/puppetlabs.repo</code></p>
</div>
</li>
<li>
<p>"Optional" repository - enable according to your source:</p>
<div class="ulist">
<ul>
<li>
<p>yum config manasger: <code>yum-config-manager --enable rhel-6-server-optional-rpms</code></p>
</li>
<li>
<p>RHN classic: enable the <code>rhel-x86_64-server-optional-6</code> channel</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="install-puppet"><a class="anchor" href="#install-puppet"></a>1.2. Install Puppet</h3>
<div class="paragraph">
<p>Run the following to install puppet and facter</p>
</div>
<div class="listingblock">
<div class="content">
<pre>yum install -y puppet facter tar</pre>
</div>
</div>
<div class="paragraph">
<p>Create the puppet module directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mkdir -p /etc/puppet/modules</pre>
</div>
</div>
<div class="paragraph">
<p>Install the openshift puppet module into this directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>puppet module install openshift/openshift_origin</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
If you would like to work from the puppet module source instead, you can just clone the github repository into the same directory:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>git clone https://github.com/openshift/puppet-openshift_origin.git /etc/puppet/modules/openshift_origin</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generating-bind-tsig-key"><a class="anchor" href="#generating-bind-tsig-key"></a>2. Generating BIND TSIG Key</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This key will be used to update DNS records in the BIND server that will be installed,
both for managing application DNS and (by default) for creating host DNS records.</p>
</div>
<div class="paragraph">
<p>Install the BIND package</p>
</div>
<div class="listingblock">
<div class="content">
<pre>yum install -y bind</pre>
</div>
</div>
<div class="paragraph">
<p>Generate a TSIG Key</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#Using example.com as the cloud domain
/usr/sbin/dnssec-keygen -a HMAC-MD5 -b 512 -n USER -r /dev/urandom -K /var/named example.com
cat /var/named/Kexample.com.*.key  | awk '{print $8}'</pre>
</div>
</div>
<div class="paragraph">
<p>The TSIG key should look like <code>CNk+wjszKi9da9nL/1gkMY7H+GuUng==</code>. We will use this in the following steps.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="update-the-host-s-name"><a class="anchor" href="#update-the-host-s-name"></a>3. Update the Host&#8217;s Name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Choose a hostname and substitute it where needed for "broker.example.com" below.
This sets the host&#8217;s name locally, not in DNS. For nodes, this is used as the server identity.
Generally it is best to use a name that matches how the host will resolve in DNS.</p>
</div>
<div class="listingblock">
<div class="title">Fedora</div>
<div class="content">
<pre>echo "broker.example.com" &gt; /etc/hostname
hostname broker.example.com</pre>
</div>
</div>
<div class="listingblock">
<div class="title">RHEL</div>
<div class="content">
<pre>cat&lt;&lt;EOF&gt;/etc/sysconfig/network
NETWORKING=yes
HOSTNAME=broker.example.com
EOF

hostname broker.example.com</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="puppet-configuration"><a class="anchor" href="#puppet-configuration"></a>4. Puppet Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will create a file for puppet&#8217;s installation parameters for this host.
This file will define one class (<code>openshift_origin</code>) to install any component(s) of OpenShift Origin on the host.</p>
</div>
<div class="paragraph">
<p><a href="http://docs.puppetlabs.com/guides/parameterized_classes.html">Using Parameterized Classes</a></p>
</div>
<div class="sect2">
<h3 id="configuring-an-all-in-one-host"><a class="anchor" href="#configuring-an-all-in-one-host"></a>4.1. Configuring an all-in-one host</h3>
<div class="paragraph">
<p>Create a puppet configuration file <code>configure_origin.pp</code> using the following template (more examples follow):</p>
</div>
<div class="listingblock">
<div class="title">Example: Single host (broker+console+node) with local BIND DNS and the htpasswd file Auth plugin:</div>
<div class="content">
<pre>    class { 'openshift_origin' :
      # Components to install on this host:
      roles			 =&gt; ['broker','named','activemq','datastore','node'],

      # The FQDNs of the OpenShift component hosts; for a single-host
      # system, make all values identical.
      broker_hostname            =&gt; 'broker.example.com',
      node_hostname              =&gt; 'broker.example.com',
      named_hostname             =&gt; 'broker.example.com',
      datastore_hostname         =&gt; 'broker.example.com',
      activemq_hostname          =&gt; 'broker.example.com',

      # BIND / named config
      # This is the key for updating the OpenShift BIND server
      bind_key                   =&gt; 'CNk+wjszKi9da9nL/1gkMY7H+GuUng==',
      # The domain under which applications should be created.
      domain                     =&gt; 'example.com',
      # Apps would be named &lt;app&gt;-&lt;namespace&gt;.example.com
      # This also creates hostnames for local components under our domain
      register_host_with_named   =&gt; true,
      # Forward requests for other domains (to Google by default)
      conf_named_upstream_dns    =&gt; ['8.8.8.8'],

      # Auth OpenShift users created with htpasswd tool in /etc/openshift/htpasswd
      broker_auth_plugin         =&gt; 'htpasswd',
      # Username and password for initial openshift user
      openshift_user1            =&gt; 'openshift',
      openshift_password1        =&gt; 'password',

      # To enable installing the Jenkins cartridge:
      install_method             =&gt; 'yum',
      jenkins_repo_base          =&gt; 'http://pkg.jenkins-ci.org/redhat',

      #Enable development mode for more verbose logs
      development_mode           =&gt; true,

      # Set if using an external-facing ethernet device other than eth0
      #conf_node_external_eth_dev =&gt; 'eth0',

      #If using with GDM, or have users with UID 500 or greater, put in this list
      #node_unmanaged_users       =&gt; ['user1'],
    }</pre>
</div>
</div>
<div class="paragraph">
<p>In this configuration, the host will run the broker, node, ActiveMQ, MongoDB and BIND servers.
You will need to substitute the BIND DNS key that was generated above; you may wish to adjust
other parameters as well, such as the domain, host names, and initial user.</p>
</div>
<div class="paragraph">
<p>Execute the puppet script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>puppet apply --verbose configure_origin.pp</pre>
</div>
</div>
<div class="paragraph">
<p>Assuming everything runs cleanly, installation is complete. Otherwise, you can resolve the errors shown (warnings can often be ignored) and re-run puppet until it runs cleanly.</p>
</div>
<div class="paragraph">
<p>Puppet is supposed to register the host DNS entries for you, but you may find this isn&#8217;t working. If you have not already arranged for the DNS resolution of this host, you can now use the oo-register-dns tool to do so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># oo-register-dns --domain example.com --with-node-hostname broker --with-node-ip &lt;broker IP&gt;
# ping broker.example.com
PING broker.example.com (172.x.x.x) 56(84) bytes of data.
64 bytes from 172.x.x.x: icmp_seq=1 ttl=64 time=0.020 ms</pre>
</div>
</div>
<div class="paragraph">
<p>Assuming everything runs cleanly and host DNS resolves, reboot the system for all settings and services to go into effect.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuring-separate-hosts-for-broker-node"><a class="anchor" href="#configuring-separate-hosts-for-broker-node"></a>4.2. Configuring separate hosts for broker/node</h3>
<div class="paragraph">
<p>A single host is nice for just getting started with OpenShift; but a more representative
deployment would at least separate out the node onto a different host as below. For this
example, prepare at least two hosts to configure with puppet.</p>
</div>
<div class="sect3">
<h4 id="broker-host"><a class="anchor" href="#broker-host"></a>4.2.1. Broker host</h4>
<div class="paragraph">
<p>In this configuration, the first host will run the broker, ActiveMQ, MongoDB, and BIND servers.</p>
</div>
<div class="paragraph">
<p>Create a file configure_origin.pp with the following template.
As with the all-in-one host configuration file, parameters should be modified as necessary,
particularly the bind_key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    class { 'openshift_origin' :
      # Components to install on this host:
      roles			 =&gt; ['broker','named','activemq','datastore'],

      # BIND / named config
      # This is the key for updating the OpenShift BIND server
      bind_key                   =&gt; 'CNk+wjszKi9da9nL/1gkMY7H+GuUng==',
      # The domain under which applications should be created.
      domain                     =&gt; 'example.com',
      # Apps would be named &lt;app&gt;-&lt;namespace&gt;.example.com
      # This also creates hostnames for local components under our domain
      register_host_with_named   =&gt; true,
      # Forward requests for other domains (to Google by default)
      conf_named_upstream_dns    =&gt; ['8.8.8.8'],

      # The FQDNs of the OpenShift component hosts
      broker_hostname            =&gt; 'broker.example.com',
      named_hostname             =&gt; 'broker.example.com',
      datastore_hostname         =&gt; 'broker.example.com',
      activemq_hostname          =&gt; 'broker.example.com',

      # Auth OpenShift users created with htpasswd tool in /etc/openshift/htpasswd
      broker_auth_plugin         =&gt; 'htpasswd',
      # Username and password for initial openshift user
      openshift_user1            =&gt; 'openshift',
      openshift_password1        =&gt; 'password',

      #Enable development mode for more verbose logs
      development_mode           =&gt; true,
    }</pre>
</div>
</div>
<div class="paragraph">
<p>Execute the puppet script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>puppet apply --verbose configure_origin.pp</pre>
</div>
</div>
<div class="paragraph">
<p>As with the all-in-one host, ensure puppet runs cleanly and the host DNS resolves, then reboot.</p>
</div>
</div>
<div class="sect3">
<h4 id="node-host"><a class="anchor" href="#node-host"></a>4.2.2. Node host</h4>
<div class="paragraph">
<p>The second host will be configured as a node, which is where applications actually run.
Be sure to set the local hostname differently; in our example it should be "node1.example.com".</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    class { 'openshift_origin' :
      # Components to install on this host:
      roles			 =&gt; ['node'],

      # BIND / named config
      # This is the IP address for OpenShift BIND server - here, the broker.
      named_ip_addr              =&gt; '&lt;broker IP address&gt;',
      # This is the key for updating the OpenShift BIND server
      bind_key                   =&gt; 'CNk+wjszKi9da9nL/1gkMY7H+GuUng==',
      # The domain under which applications should be created.
      domain                     =&gt; 'example.com',
      # Apps would be named &lt;app&gt;-&lt;namespace&gt;.example.com
      # This also creates hostnames for local components under our domain
      register_host_with_named   =&gt; true,

      # The FQDNs of the OpenShift component hosts we will need
      broker_hostname            =&gt; 'broker.example.com',
      activemq_hostname          =&gt; 'broker.example.com',
      node_hostname              =&gt; 'node1.example.com',

      # To enable installing the Jenkins cartridge:
      install_method             =&gt; 'yum',
      jenkins_repo_base          =&gt; 'http://pkg.jenkins-ci.org/redhat',

      #Enable development mode for more verbose logs
      development_mode           =&gt; true,

      # Set if using an external-facing ethernet device other than eth0
      #conf_node_external_eth_dev =&gt; 'eth0',

      #If using with GDM, or have users with UID 500 or greater, put in this list
      #node_unmanaged_users       =&gt; ['user1'],
    }</pre>
</div>
</div>
<div class="paragraph">
<p>Execute the puppet script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>puppet apply --verbose configure_origin.pp</pre>
</div>
</div>
<div class="paragraph">
<p>If you have not already arranged for the DNS resolution of this host, you can now use the oo-register-dns tool on the broker host to do so:</p>
</div>
<div class="paragraph">
<p>oo-register-dns --with-node-hostname broker --with-node-ip &lt;broker IP&gt; --domain example.com</p>
</div>
<div class="paragraph">
<p>As with the all-in-one host, ensure puppet runs cleanly and the host DNS resolves, then reboot.</p>
</div>
<div class="paragraph">
<p>This should give you a working OpenShift deployment separated into two hosts, one for broker components and one for a node.
You may add as many more node hosts as you like.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="different-plugins-mdns-and-mongo-auth"><a class="anchor" href="#different-plugins-mdns-and-mongo-auth"></a>4.3. Different plugins: mDNS and Mongo auth</h3>
<div class="paragraph">
<p>This is just an example configuration demonstrating using the mDNS plugin
(so that hosts on the same LAN can resolve the host and applications without altering resolv.conf)
and the Mongo auth plugin (which stores user credentials in MongoDB).</p>
</div>
<div class="listingblock">
<div class="title">Example: Single host (broker+console+node) using Avahi mDNS and Mongo auth plugins:</div>
<div class="content">
<pre>class { 'openshift_origin' :
  domain                     =&gt; 'openshift.local',
  register_host_with_named   =&gt; true,
  conf_named_upstream_dns    =&gt; ['8.8.8.8'],
  install_method             =&gt; 'yum',
  jenkins_repo_base          =&gt; 'http://pkg.jenkins-ci.org/redhat',
  broker_auth_plugin         =&gt; 'mongo',
  broker_dns_plugin          =&gt; 'avahi',
  development_mode           =&gt; true,
  conf_node_external_eth_dev =&gt; 'eth0',
  node_unmanaged_users       =&gt; ['root'],
}</pre>
</div>
</div>
<div class="paragraph">
<p>Apply the puppet config and reboot as before.</p>
</div>
<div class="paragraph">
<p>You may access the broker at broker.openshift.local; the initial user/pass is admin/admin.</p>
</div>
</div>
<div class="sect2">
<h3 id="different-plugins-kerberos-auth-and-dns"><a class="anchor" href="#different-plugins-kerberos-auth-and-dns"></a>4.4. Different plugins: Kerberos auth and DNS</h3>
<div class="paragraph">
<p>This example uses Kerberos for user authentication,
and a Kerberos keytab for making authenticated updates to a remote nameserver.</p>
</div>
<div class="listingblock">
<div class="title">Example: Single host (broker+console+node) which uses the <strong>Kerberos</strong> Auth plugin and GSS-TSIG.</div>
<div class="content">
<pre>class { 'openshift_origin' :
  domain                     =&gt; 'example.com',
  install_method             =&gt; 'yum',
  jenkins_repo_base          =&gt; 'http://pkg.jenkins-ci.org/redhat',
  development_mode           =&gt; true,
  conf_node_external_eth_dev =&gt; 'eth0',
  node_unmanaged_users       =&gt; ['root'],

  # broker authenticates updates to BIND server with keytab
  broker_dns_plugin          =&gt; 'named',
  named_ip_addr              =&gt; '&lt;BIND server IP address&gt;',
  bind_krb_principal         =&gt; $hostname,
  bind_krb_keytab            =&gt; '/etc/dns.keytab'
  register_host_with_named   =&gt; true,

  # authenticate OpenShift users with kerberos
  broker_auth_plugin         =&gt; 'kerberos',
  broker_krb_keytab          =&gt; '/etc/http.keytab',
  broker_krb_auth_realms     =&gt; 'EXAMPLE.COM',
  broker_krb_service_name    =&gt; $hostname,
}</pre>
</div>
</div>
<div class="paragraph">
<p>Please note:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Broker needs to be enrolled in the KDC as a host, <code>host/node_fqdn</code> as well as a service, <code>HTTP/node_fqdn</code></p>
</li>
<li>
<p>Keytab should be generated, is located on the Broker machine, and Apache should be able to access it (<code>chown apache &lt;kerberos_keytab&gt;</code>)</p>
</li>
<li>
<p>Like the example config below:</p>
<div class="ulist">
<ul>
<li>
<p>set <code>broker_auth_plugin</code> to <code>'kerberos'</code></p>
</li>
<li>
<p>set <code>broker_krb_keytab</code> and <code>bind_krb_keytab</code> to the absolute file location of the keytab</p>
</li>
<li>
<p>set <code>broker_krb_auth_realms</code> to the kerberos realm that the Broker host is enrolled with</p>
</li>
<li>
<p>set <code>broker_krb_service_name</code> to the FQDN of the enrolled kerberos service, e.g. <code>$hostname</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>After setup, to test:</p>
<div class="ulist">
<ul>
<li>
<p>authentication: <code>kinit &lt;user&gt;</code> then <code>curl -Ik --negotiate -u : &lt;node_fqdn&gt;</code></p>
</li>
<li>
<p>GSS-TSIG (should return <code>nil</code>):</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use the Rails console on the broker to access the DNS plugin and test that it creates application records.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># cd /var/www/openshift/broker
# scl enable ruby193 bash  # (needed for Enterprise Linux only)
# bundle --local
# rails console
# d = OpenShift::DnsService.instance
# d.register_application "appname", "namespace", "node_fqdn"
  =&gt; nil</pre>
</div>
</div>
<div class="paragraph">
<p>For any errors, on the Broker, check <code>/var/log/openshift/broker/httpd/error_log</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="puppet-parameters"><a class="anchor" href="#puppet-parameters"></a>4.5. Puppet Parameters</h3>
<div class="paragraph">
<p>An exhaustive list of the parameters you can specify with puppet configuration follows.</p>
</div>
<div class="sect3">
<h4 id="roles"><a class="anchor" href="#roles"></a>4.5.1. roles</h4>
<div class="paragraph">
<p>Choose from the following roles to be configured on this node.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>broker    - Installs the broker and console.</p>
</li>
<li>
<p>node      - Installs the node and cartridges.</p>
</li>
<li>
<p>activemq  - Installs activemq message broker.</p>
</li>
<li>
<p>datastore - Installs MongoDB (not sharded/replicated)</p>
</li>
<li>
<p>named     - Installs a BIND dns server configured with a TSIG key for updates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: [<em>broker</em>,<em>node</em>,<em>activemq</em>,<em>datastore</em>,<em>named</em>]</p>
</div>
</div>
<div class="sect3">
<h4 id="install_method"><a class="anchor" href="#install_method"></a>4.5.2. install_method</h4>
<div class="paragraph">
<p>Choose from the following ways to provide packages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>none - install sources are already set up when the script executes (default)</p>
</li>
<li>
<p>yum - set up yum repos manually</p>
<div class="ulist">
<ul>
<li>
<p>repos_base</p>
</li>
<li>
<p>os_repo</p>
</li>
<li>
<p>os_updates_repo</p>
</li>
<li>
<p>jboss_repo_base</p>
</li>
<li>
<p>jenkins_repo_base</p>
</li>
<li>
<p>optional_repo</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Default: yum</p>
</div>
</div>
<div class="sect3">
<h4 id="repos_base"><a class="anchor" href="#repos_base"></a>4.5.3. repos_base</h4>
<div class="paragraph">
<p>Base path to repository for OpenShift Origin</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nightlies:</p>
<div class="ulist">
<ul>
<li>
<p>Fedora: <a href="https://mirror.openshift.com/pub/origin-server/nightly/fedora-19">https://mirror.openshift.com/pub/origin-server/nightly/fedora-19</a></p>
</li>
<li>
<p>RHEL:   <a href="https://mirror.openshift.com/pub/origin-server/nightly/rhel-6">https://mirror.openshift.com/pub/origin-server/nightly/rhel-6</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Release-2:</p>
<div class="ulist">
<ul>
<li>
<p>Fedora: <a href="https://mirror.openshift.com/pub/origin-server/release/2/fedora-19">https://mirror.openshift.com/pub/origin-server/release/2/fedora-19</a></p>
</li>
<li>
<p>RHEL:   <a href="https://mirror.openshift.com/pub/origin-server/release/2/rhel-6">https://mirror.openshift.com/pub/origin-server/release/2/rhel-6</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: Fedora-19 Nightlies</p>
</div>
</div>
<div class="sect3">
<h4 id="override_install_repo"><a class="anchor" href="#override_install_repo"></a>4.5.4. override_install_repo</h4>
<div class="paragraph">
<p>Repository path override. Uses dependencies from repos_base but uses
override_install_repo path for OpenShift RPMs. Used when doing local builds.</p>
</div>
<div class="paragraph">
<p>Default: none</p>
</div>
</div>
<div class="sect3">
<h4 id="os_repo"><a class="anchor" href="#os_repo"></a>4.5.5. os_repo</h4>
<div class="paragraph">
<p>The URL for a Fedora 19/RHEL 6 yum repository used with the "yum" install method.
Should end in x86_64/os/.</p>
</div>
<div class="paragraph">
<p>Default: no change</p>
</div>
</div>
<div class="sect3">
<h4 id="os_updates"><a class="anchor" href="#os_updates"></a>4.5.6. os_updates</h4>
<div class="paragraph">
<p>The URL for a Fedora 19/RHEL 6 yum updates repository used with the "yum" install method.
Should end in x86_64/.</p>
</div>
<div class="paragraph">
<p>Default: no change</p>
</div>
</div>
<div class="sect3">
<h4 id="jboss_repo_base"><a class="anchor" href="#jboss_repo_base"></a>4.5.7. jboss_repo_base</h4>
<div class="paragraph">
<p>The URL for a JBoss repositories used with the "yum" install method.
Does not install repository if not specified.</p>
</div>
</div>
<div class="sect3">
<h4 id="jenkins_repo_base"><a class="anchor" href="#jenkins_repo_base"></a>4.5.8. jenkins_repo_base</h4>
<div class="paragraph">
<p>The URL for a Jenkins repositories used with the "yum" install method.
Does not install repository if not specified.</p>
</div>
</div>
<div class="sect3">
<h4 id="optional_repo"><a class="anchor" href="#optional_repo"></a>4.5.9. optional_repo</h4>
<div class="paragraph">
<p>The URL for a EPEL or optional repositories used with the "yum" install method.
Does not install repository if not specified.</p>
</div>
</div>
<div class="sect3">
<h4 id="domain"><a class="anchor" href="#domain"></a>4.5.10. domain</h4>
<div class="paragraph">
<p>The network domain under which apps and hosts will be placed.</p>
</div>
<div class="paragraph">
<p>Default: example.com</p>
</div>
</div>
<div class="sect3">
<h4 id="broker_hostname"><a class="anchor" href="#broker_hostname"></a>4.5.11. broker_hostname</h4>

</div>
<div class="sect3">
<h4 id="node_hostname"><a class="anchor" href="#node_hostname"></a>4.5.12. node_hostname</h4>

</div>
<div class="sect3">
<h4 id="named_hostname"><a class="anchor" href="#named_hostname"></a>4.5.13. named_hostname</h4>

</div>
<div class="sect3">
<h4 id="activemq_hostname"><a class="anchor" href="#activemq_hostname"></a>4.5.14. activemq_hostname</h4>

</div>
<div class="sect3">
<h4 id="datastore_hostname"><a class="anchor" href="#datastore_hostname"></a>4.5.15. datastore_hostname</h4>
<div class="paragraph">
<p>Default: the root plus the domain, e.g. broker.example.com.</p>
</div>
<div class="paragraph">
<p>These supply the FQDN of the hosts containing these components. Used
for configuring the host&#8217;s name at install, and also for configuring
the broker application to reach the services needed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
if installing a nameserver, the script will create
DNS entries for the hostnames of the other components being
installed on this host as well. If you are using a nameserver set
up separately, you are responsible for all necessary DNS entries.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="named_ip_addr"><a class="anchor" href="#named_ip_addr"></a>4.5.16. named_ip_addr</h4>
<div class="paragraph">
<p>Default: IP of a named instance or current IP if installing on this
host. This is used by every host to configure its primary name server.</p>
</div>
<div class="paragraph">
<p>Default: the current IP (at install)</p>
</div>
</div>
<div class="sect3">
<h4 id="bind_key"><a class="anchor" href="#bind_key"></a>4.5.17. bind_key</h4>
<div class="paragraph">
<p>When the nameserver is remote, use this to specify the HMAC-MD5 key
for updates. This is the "Key:" field from the .private key file
generated by dnssec-keygen. This field is required on all nodes.</p>
</div>
</div>
<div class="sect3">
<h4 id="bind_krb_keytab"><a class="anchor" href="#bind_krb_keytab"></a>4.5.18. bind_krb_keytab</h4>
<div class="paragraph">
<p>When the nameserver is remote, Kerberos keytab together with principal
can be used instead of the HMAC-MD5 key for updates.</p>
</div>
</div>
<div class="sect3">
<h4 id="bind_krb_principal"><a class="anchor" href="#bind_krb_principal"></a>4.5.19. bind_krb_principal</h4>
<div class="paragraph">
<p>When the nameserver is remote, this Kerberos principal together with
Kerberos keytab can be used instead of the HMAC-MD5 key for updates.</p>
</div>
</div>
<div class="sect3">
<h4 id="conf_named_upstream_dns"><a class="anchor" href="#conf_named_upstream_dns"></a>4.5.20. conf_named_upstream_dns</h4>
<div class="paragraph">
<p>List of upstream DNS servers to use when installing named on this node.</p>
</div>
<div class="paragraph">
<p>Default: [<em>8.8.8.8</em>]</p>
</div>
</div>
<div class="sect3">
<h4 id="broker_ip_addr"><a class="anchor" href="#broker_ip_addr"></a>4.5.21. broker_ip_addr</h4>
<div class="paragraph">
<p>This is used for the node to record its broker. Also is the default
for the nameserver IP if none is given.</p>
</div>
<div class="paragraph">
<p>Default: the current IP (at install)</p>
</div>
</div>
<div class="sect3">
<h4 id="node_ip_addr"><a class="anchor" href="#node_ip_addr"></a>4.5.22. node_ip_addr</h4>
<div class="paragraph">
<p>This is used for the node to give a public IP, if different from the
one on its NIC.</p>
</div>
<div class="paragraph">
<p>Default: the current IP (at install)</p>
</div>
</div>
<div class="sect3">
<h4 id="configure_ntp"><a class="anchor" href="#configure_ntp"></a>4.5.23. configure_ntp</h4>
<div class="paragraph">
<p>Enabling this configures NTP.  It is important that the time be
synchronized across hosts because MCollective messages have a TTL
of 60 seconds and may be dropped if the clocks are too far out
of synch.  However, NTP is not necessary if the clock will be kept
in synch by some other means.</p>
</div>
<div class="paragraph">
<p>Default: true</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Passwords used to secure various services. You are advised to specify
only alphanumeric values in this script as others may cause syntax
errors depending on context. If non-alphanumeric values are required,
update them separately after installation.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="activemq_admin_password"><a class="anchor" href="#activemq_admin_password"></a>4.5.24. activemq_admin_password</h4>
<div class="paragraph">
<p>This is the admin password for the ActiveMQ admin console, which is
not needed by OpenShift but might be useful in troubleshooting.</p>
</div>
<div class="paragraph">
<p>Default: scrambled</p>
</div>
</div>
<div class="sect3">
<h4 id="mcollective_user"><a class="anchor" href="#mcollective_user"></a>4.5.25. mcollective_user</h4>

</div>
<div class="sect3">
<h4 id="mcollective_password"><a class="anchor" href="#mcollective_password"></a>4.5.26. mcollective_password</h4>
<div class="paragraph">
<p>This is the user and password shared between broker and node for
communicating over the mcollective topic channels in ActiveMQ. Must
be the same on all broker and node hosts.</p>
</div>
<div class="paragraph">
<p>Default: mcollective/marionette</p>
</div>
</div>
<div class="sect3">
<h4 id="mongodb_admin_user"><a class="anchor" href="#mongodb_admin_user"></a>4.5.27. mongodb_admin_user</h4>

</div>
<div class="sect3">
<h4 id="mongodb_admin_password"><a class="anchor" href="#mongodb_admin_password"></a>4.5.28. mongodb_admin_password</h4>
<div class="paragraph">
<p>These are the username and password of the administrative user that
will be created in the MongoDB datastore. These credentials are not
used by in this script or by OpenShift, but an administrative user
must be added to MongoDB in order for it to enforce authentication.
Default: admin/mongopass</p>
</div>
</div>
<div class="sect3">
<h4 id="mongodb_broker_user"><a class="anchor" href="#mongodb_broker_user"></a>4.5.29. mongodb_broker_user</h4>

</div>
<div class="sect3">
<h4 id="mongodb_broker_password"><a class="anchor" href="#mongodb_broker_password"></a>4.5.30. mongodb_broker_password</h4>
<div class="paragraph">
<p>These are the username and password of the normal user that will be
created for the broker to connect to the MongoDB datastore. The
broker application&#8217;s MongoDB plugin is also configured with these
values.</p>
</div>
<div class="paragraph">
<p>Default: openshift/mongopass</p>
</div>
</div>
<div class="sect3">
<h4 id="mongodb_name"><a class="anchor" href="#mongodb_name"></a>4.5.31. mongodb_name</h4>
<div class="paragraph">
<p>This is the name of the database in MongoDB in which the broker will
store data.</p>
</div>
<div class="paragraph">
<p>Default: openshift_broker</p>
</div>
</div>
<div class="sect3">
<h4 id="openshift_user1"><a class="anchor" href="#openshift_user1"></a>4.5.32. openshift_user1</h4>

</div>
<div class="sect3">
<h4 id="openshift_password1"><a class="anchor" href="#openshift_password1"></a>4.5.33. openshift_password1</h4>
<div class="paragraph">
<p>This user and password are entered in the /etc/openshift/htpasswd
file as a demo/test user. You will likely want to remove it after
installation (or just use a different auth method).</p>
</div>
<div class="paragraph">
<p>Default: demo/changeme</p>
</div>
</div>
<div class="sect3">
<h4 id="conf_broker_auth_salt"><a class="anchor" href="#conf_broker_auth_salt"></a>4.5.34. conf_broker_auth_salt</h4>

</div>
<div class="sect3">
<h4 id="conf_broker_auth_public_key"><a class="anchor" href="#conf_broker_auth_public_key"></a>4.5.35. conf_broker_auth_public_key</h4>

</div>
<div class="sect3">
<h4 id="conf_broker_auth_private_key"><a class="anchor" href="#conf_broker_auth_private_key"></a>4.5.36. conf_broker_auth_private_key</h4>

</div>
<div class="sect3">
<h4 id="conf_broker_auth_key_password"><a class="anchor" href="#conf_broker_auth_key_password"></a>4.5.37. conf_broker_auth_key_password</h4>
<div class="paragraph">
<p>Salt, public and private keys used when generating secure authentication
tokens for Application to Broker communication. Requests like scale up/down
and jenkins builds use these authentication tokens. This value must be the
same on all broker nodes.</p>
</div>
<div class="paragraph">
<p>Default:  Self signed keys are generated. Will not work with multi-broker
          setup.</p>
</div>
</div>
<div class="sect3">
<h4 id="conf_broker_session_secret"><a class="anchor" href="#conf_broker_session_secret"></a>4.5.38. conf_broker_session_secret</h4>

</div>
<div class="sect3">
<h4 id="conf_console_session_secret"><a class="anchor" href="#conf_console_session_secret"></a>4.5.39. conf_console_session_secret</h4>
<div class="paragraph">
<p>Session secrets used to encode cookies used by console and broker. This
value must be the same on all broker nodes.</p>
</div>
</div>
<div class="sect3">
<h4 id="conf_valid_gear_sizes"><a class="anchor" href="#conf_valid_gear_sizes"></a>4.5.40. conf_valid_gear_sizes</h4>
<div class="paragraph">
<p>List of all gear sizes this will be used in this OpenShift installation.</p>
</div>
<div class="paragraph">
<p>Default: [<em>small</em>]</p>
</div>
</div>
<div class="sect3">
<h4 id="broker_dns_plugin"><a class="anchor" href="#broker_dns_plugin"></a>4.5.41. broker_dns_plugin</h4>
<div class="paragraph">
<p>DNS plugin used by the broker to register application DNS entries.
Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>nsupdate - nsupdate based plugin. Supports TSIG and GSS-TSIG based
authentication. Uses bind_key for TSIG and bind_krb_keytab,
bind_krb_principal for GSS_TSIG auth.</p>
</li>
<li>
<p>avahi    - sets up a MDNS based DNS resolution. Works only for
all-in-one installations.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="broker_auth_plugin"><a class="anchor" href="#broker_auth_plugin"></a>4.5.42. broker_auth_plugin</h4>
<div class="paragraph">
<p>Authentication setup for users of the OpenShift service.
Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>mongo       - Stores username and password in mongo.</p>
</li>
<li>
<p>kerberos    - Kerberos based authentication. Uses
broker_krb_service_name, broker_krb_auth_realms,
broker_krb_keytab values.</p>
</li>
<li>
<p>htpasswd    - Stores username/password in a htaccess file.</p>
</li>
<li>
<p>ldap        - LDAP based authentication. Uses broker_ldap_uri.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: htpasswd</p>
</div>
</div>
<div class="sect3">
<h4 id="broker_krb_service_name"><a class="anchor" href="#broker_krb_service_name"></a>4.5.43. broker_krb_service_name</h4>
<div class="paragraph">
<p>The KrbServiceName value for mod_auth_kerb configuration</p>
</div>
</div>
<div class="sect3">
<h4 id="broker_krb_auth_realms"><a class="anchor" href="#broker_krb_auth_realms"></a>4.5.44. broker_krb_auth_realms</h4>
<div class="paragraph">
<p>The KrbAuthRealms value for mod_auth_kerb configuration</p>
</div>
</div>
<div class="sect3">
<h4 id="broker_krb_keytab"><a class="anchor" href="#broker_krb_keytab"></a>4.5.45. broker_krb_keytab</h4>
<div class="paragraph">
<p>The Krb5KeyTab value of mod_auth_kerb is not configurable&#8201;&#8212;&#8201;the keytab
is expected in /var/www/openshift/broker/httpd/conf.d/http.keytab</p>
</div>
</div>
<div class="sect3">
<h4 id="broker_ldap_uri"><a class="anchor" href="#broker_ldap_uri"></a>4.5.46. broker_ldap_uri</h4>
<div class="paragraph">
<p>URI to the LDAP server (e.g. ldap://ldap.example.com:389/ou=People,dc=my-domain,dc=com).
Set &lt;code&gt;broker_auth_plugin&lt;/code&gt; to &lt;code&gt;ldap&lt;/code&gt; to enable
this feature.</p>
</div>
</div>
<div class="sect3">
<h4 id="node_container_plugin"><a class="anchor" href="#node_container_plugin"></a>4.5.47. node_container_plugin</h4>
<div class="paragraph">
<p>Specify the container type to use on the node.
Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>selinux - This is the default OpenShift Origin container type.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="node_frontend_plugins"><a class="anchor" href="#node_frontend_plugins"></a>4.5.48. node_frontend_plugins</h4>
<div class="paragraph">
<p>Specify one or more plugins to use register HTTP and web-socket connections
for applications.
Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>apache-mod-rewrite  - Mod-Rewrite based plugin for HTTP and HTTPS
requests. Well suited for installations with a lot of
creates/deletes/scale actions.</p>
</li>
<li>
<p>apache-vhost        - VHost based plugin for HTTP and HTTPS. Suited for
installations with less app create/delete activity. Easier to
customize.</p>
</li>
<li>
<p>nodejs-websocket    - Web-socket proxy listening on ports 8000/8444</p>
</li>
<li>
<p>haproxy-sni-proxy   - TLS proxy using SNI routing on ports 2303 through 2308
requires /usr/sbin/haproxy15 (haproxy-1.5-dev19 or later).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: [<em>apache-mod-rewrite</em>,<em>nodejs-websocket</em>]</p>
</div>
</div>
<div class="sect3">
<h4 id="node_unmanaged_users"><a class="anchor" href="#node_unmanaged_users"></a>4.5.49. node_unmanaged_users</h4>
<div class="paragraph">
<p>List of user names who have UIDs in the range of OpenShift gears but must be
excluded from OpenShift gear setups.</p>
</div>
<div class="paragraph">
<p>Default: []</p>
</div>
</div>
<div class="sect3">
<h4 id="conf_node_external_eth_dev"><a class="anchor" href="#conf_node_external_eth_dev"></a>4.5.50. conf_node_external_eth_dev</h4>
<div class="paragraph">
<p>External facing network device. Used for routing and traffic control setup.</p>
</div>
<div class="paragraph">
<p>Default: eth0</p>
</div>
</div>
<div class="sect3">
<h4 id="conf_node_supplementary_posix_groups"><a class="anchor" href="#conf_node_supplementary_posix_groups"></a>4.5.51. conf_node_supplementary_posix_groups</h4>
<div class="paragraph">
<p>Name of supplementary UNIX group to add a gear to.</p>
</div>
</div>
<div class="sect3">
<h4 id="development_mode"><a class="anchor" href="#development_mode"></a>4.5.52. development_mode</h4>
<div class="paragraph">
<p>Set development mode and extra logging.</p>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect3">
<h4 id="install_login_shell"><a class="anchor" href="#install_login_shell"></a>4.5.53. install_login_shell</h4>
<div class="paragraph">
<p>Install a Getty shell which displays DNS, IP and login information. Used for
all-in-one VM installation.</p>
</div>
</div>
<div class="sect3">
<h4 id="register_host_with_named"><a class="anchor" href="#register_host_with_named"></a>4.5.54. register_host_with_named</h4>
<div class="paragraph">
<p>Setup DNS entries for this host in a locally installed BIND DNS instance.</p>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect3">
<h4 id="install_cartridges"><a class="anchor" href="#install_cartridges"></a>4.5.55. install_cartridges</h4>
<div class="paragraph">
<p>List of cartridges to be installed on the node. Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>10gen-mms-agent</p>
</li>
<li>
<p>cron</p>
</li>
<li>
<p>diy</p>
</li>
<li>
<p>haproxy</p>
</li>
<li>
<p>mongodb</p>
</li>
<li>
<p>nodejs</p>
</li>
<li>
<p>perl</p>
</li>
<li>
<p>php</p>
</li>
<li>
<p>phpmyadmin</p>
</li>
<li>
<p>postgresql</p>
</li>
<li>
<p>python</p>
</li>
<li>
<p>ruby</p>
</li>
<li>
<p>jenkins</p>
</li>
<li>
<p>jenkins-client</p>
</li>
<li>
<p>mariadb         (will install mysql on RHEL)</p>
</li>
<li>
<p>jbossews</p>
</li>
<li>
<p>jbossas</p>
</li>
<li>
<p>jbosseap</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: [<em>10gen-mms-agent</em>,<em>cron</em>,<em>diy</em>,<em>haproxy</em>,<em>mongodb</em>,
          <em>nodejs</em>,<em>perl</em>,<em>php</em>,<em>phpmyadmin</em>,<em>postgresql</em>,
          <em>python</em>,<em>ruby</em>,<em>jenkins</em>,<em>jenkins-client</em>,<em>mariadb</em>]</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="manual-tasks"><a class="anchor" href="#manual-tasks"></a>5. Manual Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This script attempts to automate as many tasks as it reasonably can.
Unfortunately, it is constrained to setting up only a single host at a
time. In an assumed multi-host setup, you will need to do the
following after the script has completed.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set up DNS entries for hosts.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you installed BIND with the script, then any other components
installed with the script on the same host received DNS entries.
Other hosts must all be defined manually, including at least your
node hosts. oo-register-dns may prove useful for this.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy public rsync key to enable moving gears.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The broker rsync public key needs to go on nodes, but there is no
good way to script that generically. Nodes should not have
password-less access to brokers to copy the .pub key, so this must
be performed manually on each node host:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># scp root@broker:/etc/openshift/rsync_id_rsa.pub /root/.ssh/
(above step will ask for the root password of the broker machine)
# cat /root/.ssh/rsync_id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys
# rm /root/.ssh/rsync_id_rsa.pub</pre>
</div>
</div>
<div class="paragraph">
<p>If you skip this, each gear move will require typing root passwords
for each of the node hosts involved.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy ssh host keys between the node hosts.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>All node hosts should identify with the same host keys, so that when gears
are moved between hosts, ssh and git don&#8217;t give developers spurious
warnings about the host keys changing. So, copy /etc/ssh/ssh_* from
one node host to all the rest (or, if using the same image for all
hosts, just keep the keys from the image).</p>
</div>
</div>
</div></div>
<div id="footer">
<div id="footer-text">
<br>
Last updated 2014-05-20 00:11:23 EDT
</div>
<!-- Google Analytics -->
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40375612-1']);
  _gaq.push(['_setDomainName', 'openshift.github.io']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  
  $(document).ready(function() {
    _gaq.push(function() {
      $('a:not([href^="http"])').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Internal Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
      $('a[href^="http"]').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Outbound Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
    });
  });
</script>
<!-- Google Code for Remarketing -->
<script>
  var google_conversion_id = 1007064360;
  var google_conversion_label = "7jfmCMC5ugQQqKqa4AM";
  var google_custom_params = window.google_tag_params;
  var google_remarketing_only = true;
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script>
<noscript>
<div style="display: inline;">
<img alt="" height="1" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1007064360/?value=0&amp;label=7jfmCMC5ugQQqKqa4AM&amp;guid=ON&amp;script=0" style="border-style: none;" width="1">
</div>
</noscript>
</div>
</body>
</html>