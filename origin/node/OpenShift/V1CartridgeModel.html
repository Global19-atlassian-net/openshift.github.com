<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: OpenShift::V1CartridgeModel
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (V)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../OpenShift.html" title="OpenShift (module)">OpenShift</a></span></span>
     &raquo; 
    <span class="title">V1CartridgeModel</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: OpenShift::V1CartridgeModel
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OpenShift::V1CartridgeModel</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="NodeLogger.html" title="OpenShift::NodeLogger (module)">NodeLogger</a></span>, <span class='object_link'><a href="Utils/ShellExec.html" title="OpenShift::Utils::ShellExec (module)">Utils::ShellExec</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb</dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  



  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="NodeLogger.html" title="OpenShift::NodeLogger (module)">NodeLogger</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="NodeLogger.html#PROFILES-constant" title="OpenShift::NodeLogger::PROFILES (constant)">NodeLogger::PROFILES</a></span></p>





  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#complete_process_gracefully-instance_method" title="#complete_process_gracefully (instance method)">- (Object) <strong>complete_process_gracefully</strong>(pid, stdin, stdout) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configure-instance_method" title="#configure (instance method)">- (Object) <strong>configure</strong>(cart_name, template_git_url, manifest) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connector_execute-instance_method" title="#connector_execute (instance method)">- (Object) <strong>connector_execute</strong>(cart_name, pub_cart_name, connection_type, connector, args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_stop_lock-instance_method" title="#create_stop_lock (instance method)">- (Object) <strong>create_stop_lock</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Writes the <tt>stop_lock</tt> file and changes its ownership to the gear
user.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deconfigure-instance_method" title="#deconfigure (instance method)">- (Object) <strong>deconfigure</strong>(cart_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deploy-instance_method" title="#deploy (instance method)">- (Object) <strong>deploy</strong>(cart_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deploy_httpd_proxy-instance_method" title="#deploy_httpd_proxy (instance method)">- (Object) <strong>deploy_httpd_proxy</strong>(cart_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">- (Object) <strong>destroy</strong>(skip_hooks = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_control-instance_method" title="#do_control (instance method)">- (Object) <strong>do_control</strong>(action, cart_name, args = nil, hook_dir = &quot;hooks&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_cartridge-instance_method" title="#each_cartridge (instance method)">- (Object) <strong>each_cartridge</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Yields a <tt>Cartridge</tt> instance for each cartridge in the gear.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_cartridge-instance_method" title="#get_cartridge (instance method)">- (Object) <strong>get_cartridge</strong>(cart_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#handle_cartridge_action-instance_method" title="#handle_cartridge_action (instance method)">- (Object) <strong>handle_cartridge_action</strong>(cartridge, action, hook_dir, args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
pre-refactor, V1 cartridges were added by the mcollective agent by calling
the configure hook directly.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (V1CartridgeModel) <strong>initialize</strong>(config, user) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of V1CartridgeModel.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#locked_files-instance_method" title="#locked_files (instance method)">- (Object) <strong>locked_files</strong>(cartridge) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#primary_cartridge-instance_method" title="#primary_cartridge (instance method)">- (Object) <strong>primary_cartridge</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the <tt>Cartridge</tt> in the gear whose <tt>primary</tt> flag is
set to true,.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#processed_templates-instance_method" title="#processed_templates (instance method)">- (Object) <strong>processed_templates</strong>(cartridge) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_httpd_proxy-instance_method" title="#remove_httpd_proxy (instance method)">- (Object) <strong>remove_httpd_proxy</strong>(cart_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#resolve_application_dependencies-instance_method" title="#resolve_application_dependencies (instance method)">- (Object) <strong>resolve_application_dependencies</strong>(cart_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#restart_httpd_proxy-instance_method" title="#restart_httpd_proxy (instance method)">- (Object) <strong>restart_httpd_proxy</strong>(cart_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_transforms-instance_method" title="#restore_transforms (instance method)">- (Object) <strong>restore_transforms</strong>(cartridge) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup_rewritten-instance_method" title="#setup_rewritten (instance method)">- (Object) <strong>setup_rewritten</strong>(cartridge) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#snapshot-instance_method" title="#snapshot (instance method)">- (Object) <strong>snapshot</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#snapshot_exclusions-instance_method" title="#snapshot_exclusions (instance method)">- (Object) <strong>snapshot_exclusions</strong>(cartridge) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_cartridge-instance_method" title="#start_cartridge (instance method)">- (Object) <strong>start_cartridge</strong>(type, cartridge, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_gear-instance_method" title="#start_gear (instance method)">- (Object) <strong>start_gear</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_cartridge-instance_method" title="#stop_cartridge (instance method)">- (Object) <strong>stop_cartridge</strong>(cartridge, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_gear-instance_method" title="#stop_gear (instance method)">- (Object) <strong>stop_gear</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_lock-instance_method" title="#stop_lock (instance method)">- (Object) <strong>stop_lock</strong>(cartridge_name = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_lock%3F-instance_method" title="#stop_lock? (instance method)">- (Boolean) <strong>stop_lock?</strong>(cartridge_name = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tidy-instance_method" title="#tidy (instance method)">- (Object) <strong>tidy</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unsubscribe-instance_method" title="#unsubscribe (instance method)">- (Object) <strong>unsubscribe</strong>(cart_name, pub_cart_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="NodeLogger.html" title="OpenShift::NodeLogger (module)">NodeLogger</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="NodeLogger.html#build_logger-class_method" title="OpenShift::NodeLogger.build_logger (method)">build_logger</a></span>, <span class='object_link'><a href="NodeLogger.html#logger-instance_method" title="OpenShift::NodeLogger#logger (method)">#logger</a></span>, <span class='object_link'><a href="NodeLogger.html#logger-class_method" title="OpenShift::NodeLogger.logger (method)">logger</a></span>, <span class='object_link'><a href="NodeLogger.html#logger_rebuild-class_method" title="OpenShift::NodeLogger.logger_rebuild (method)">logger_rebuild</a></span>, <span class='object_link'><a href="NodeLogger.html#trace_logger-instance_method" title="OpenShift::NodeLogger#trace_logger (method)">#trace_logger</a></span>, <span class='object_link'><a href="NodeLogger.html#trace_logger-class_method" title="OpenShift::NodeLogger.trace_logger (method)">trace_logger</a></span>, <span class='object_link'><a href="NodeLogger.html#trace_rebuild-class_method" title="OpenShift::NodeLogger.trace_rebuild (method)">trace_rebuild</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Utils/ShellExec.html" title="OpenShift::Utils::ShellExec (module)">Utils::ShellExec</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Utils/ShellExec.html#kill_process_tree-class_method" title="OpenShift::Utils::ShellExec.kill_process_tree (method)">kill_process_tree</a></span>, <span class='object_link'><a href="Utils/ShellExec.html#run_as-class_method" title="OpenShift::Utils::ShellExec.run_as (method)">run_as</a></span>, <span class='object_link'><a href="Utils/ShellExec.html#shellCmd-class_method" title="OpenShift::Utils::ShellExec.shellCmd (method)">shellCmd</a></span>, <span class='object_link'><a href="Utils/ShellExec.html#shellCmd-instance_method" title="OpenShift::Utils::ShellExec#shellCmd (method)">#shellCmd</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="OpenShift::V1CartridgeModel (class)">V1CartridgeModel</a></span></tt>) <strong>initialize</strong>(config, user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
A new instance of V1CartridgeModel
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 13</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_config identifier id'>config</span><span class='comma token'>,</span> <span class='rubyid_user identifier id'>user</span><span class='rparen token'>)</span>
  <span class='rubyid_@config ivar id'>@config</span> <span class='assign token'>=</span> <span class='rubyid_config identifier id'>config</span>
  <span class='rubyid_@user ivar id'>@user</span> <span class='assign token'>=</span> <span class='rubyid_user identifier id'>user</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="complete_process_gracefully-instance_method">
  
    - (<tt>Object</tt>) <strong>complete_process_gracefully</strong>(pid, stdin, stdout) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 276</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_complete_process_gracefully identifier id'>complete_process_gracefully</span><span class='lparen token'>(</span><span class='rubyid_pid identifier id'>pid</span><span class='comma token'>,</span> <span class='rubyid_stdin identifier id'>stdin</span><span class='comma token'>,</span> <span class='rubyid_stdout identifier id'>stdout</span><span class='rparen token'>)</span>
  <span class='rubyid_stdin identifier id'>stdin</span><span class='dot token'>.</span><span class='rubyid_close identifier id'>close</span>
  <span class='rubyid_output identifier id'>output</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_Timeout constant id'>Timeout</span><span class='colon2 op'>::</span><span class='rubyid_timeout identifier id'>timeout</span><span class='lparen token'>(</span><span class='integer val'>120</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
      <span class='rubyid_while while kw'>while</span> <span class='lparen token'>(</span><span class='rubyid_line identifier id'>line</span> <span class='assign token'>=</span> <span class='rubyid_stdout identifier id'>stdout</span><span class='dot token'>.</span><span class='rubyid_gets identifier id'>gets</span><span class='rparen token'>)</span>
        <span class='rubyid_output identifier id'>output</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_line identifier id'>line</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_Timeout constant id'>Timeout</span><span class='colon2 op'>::</span><span class='rubyid_Error constant id'>Error</span>
    <span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_info identifier id'>info</span><span class='lparen token'>(</span><span class='dstring node'>&quot;WARNING: stdout read timed out, killing #{pid} and its child processes&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_ShellExec constant id'>ShellExec</span><span class='dot token'>.</span><span class='rubyid_kill_process_tree identifier id'>kill_process_tree</span><span class='lparen token'>(</span><span class='rubyid_pid identifier id'>pid</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_ignored identifier id'>ignored</span><span class='comma token'>,</span> <span class='rubyid_status identifier id'>status</span> <span class='assign token'>=</span> <span class='rubyid_Process constant id'>Process</span><span class='colon2 op'>::</span><span class='rubyid_waitpid2 identifier id'>waitpid2</span> <span class='rubyid_pid identifier id'>pid</span>
  <span class='rubyid_exitcode identifier id'>exitcode</span> <span class='assign token'>=</span> <span class='rubyid_status identifier id'>status</span><span class='dot token'>.</span><span class='rubyid_exitstatus identifier id'>exitstatus</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_exitcode identifier id'>exitcode</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
    <span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_info identifier id'>info</span><span class='lparen token'>(</span><span class='dstring node'>&quot;(#{exitcode})\n------\n#{Runtime::Utils.sanitize_credentials(output)}\n------)&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_info identifier id'>info</span><span class='lparen token'>(</span><span class='dstring node'>&quot;ERROR: (#{exitcode})\n------\n#{Runtime::Utils.sanitize_credentials(output)}\n------)&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_exitcode identifier id'>exitcode</span><span class='comma token'>,</span> <span class='rubyid_output identifier id'>output</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="configure-instance_method">
  
    - (<tt>Object</tt>) <strong>configure</strong>(cart_name, template_git_url, manifest) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Utils/ShellExecutionException.html" title="OpenShift::Utils::ShellExecutionException (class)">OpenShift::Utils::ShellExecutionException</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197
198
199
200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 195</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_configure identifier id'>configure</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='comma token'>,</span> <span class='rubyid_template_git_url identifier id'>template_git_url</span><span class='comma token'>,</span> <span class='rubyid_manifest identifier id'>manifest</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='string val'>&quot;Downloaded cartridges are not supported&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_manifest identifier id'>manifest</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_ShellExecutionException constant id'>ShellExecutionException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Failed to configure a v1 cart while in v2 mode&quot;</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='string val'>&quot;CLIENT_ERROR: Your application is being upgraded and configuration changes can not be made at this time.  Please try again later.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='symbol val'>:v2</span> <span class='eq op'>==</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_Sdk constant id'>Sdk</span><span class='dot token'>.</span><span class='rubyid_node_default_model identifier id'>node_default_model</span><span class='lparen token'>(</span><span class='rubyid_@config ivar id'>@config</span><span class='rparen token'>)</span>

  <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='string val'>'configure'</span><span class='comma token'>,</span> <span class='rubyid_cart_name identifier id'>cart_name</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{@user.container_name} #{@user.namespace} #{@user.container_uuid} #{template_git_url}&quot;</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="connector_execute-instance_method">
  
    - (<tt>Object</tt>) <strong>connector_execute</strong>(cart_name, pub_cart_name, connection_type, connector, args) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


231
232
233
234</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 231</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_connector_execute identifier id'>connector_execute</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='comma token'>,</span> <span class='rubyid_pub_cart_name identifier id'>pub_cart_name</span><span class='comma token'>,</span> <span class='rubyid_connection_type identifier id'>connection_type</span><span class='comma token'>,</span> <span class='rubyid_connector identifier id'>connector</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='comment val'># pub_cart_name and connection_type unused in v1.</span>
  <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='rubyid_connector identifier id'>connector</span><span class='comma token'>,</span> <span class='rubyid_cart_name identifier id'>cart_name</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='comma token'>,</span> <span class='string val'>&quot;connection-hooks&quot;</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_stop_lock-instance_method">
  
    - (<tt>Object</tt>) <strong>create_stop_lock</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Writes the <tt>stop_lock</tt> file and changes its ownership to the gear
user.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 48</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_create_stop_lock identifier id'>create_stop_lock</span>
  <span class='rubyid_unless unless kw'>unless</span> <span class='rubyid_stop_lock? fid id'>stop_lock?</span>
    <span class='rubyid_mcs_label identifier id'>mcs_label</span> <span class='assign token'>=</span> <span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_SELinux constant id'>SELinux</span><span class='dot token'>.</span><span class='rubyid_get_mcs_label identifier id'>get_mcs_label</span><span class='lparen token'>(</span><span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_uid identifier id'>uid</span><span class='rparen token'>)</span>
    <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_stop_lock identifier id'>stop_lock</span><span class='comma token'>,</span> <span class='rubyid_File constant id'>File</span><span class='colon2 op'>::</span><span class='rubyid_CREAT constant id'>CREAT</span><span class='bitor op'>|</span><span class='rubyid_File constant id'>File</span><span class='colon2 op'>::</span><span class='rubyid_TRUNC constant id'>TRUNC</span><span class='bitor op'>|</span><span class='rubyid_File constant id'>File</span><span class='colon2 op'>::</span><span class='rubyid_WRONLY constant id'>WRONLY</span><span class='comma token'>,</span> <span class='integer val'>0644</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_close identifier id'>close</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
    <span class='rubyid_PathUtils constant id'>PathUtils</span><span class='dot token'>.</span><span class='rubyid_oo_chown identifier id'>oo_chown</span><span class='lparen token'>(</span><span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_uid identifier id'>uid</span><span class='comma token'>,</span> <span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_gid identifier id'>gid</span><span class='comma token'>,</span> <span class='rubyid_stop_lock identifier id'>stop_lock</span><span class='rparen token'>)</span>
    <span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_SELinux constant id'>SELinux</span><span class='dot token'>.</span><span class='rubyid_set_mcs_label identifier id'>set_mcs_label</span><span class='lparen token'>(</span><span class='rubyid_mcs_label identifier id'>mcs_label</span><span class='comma token'>,</span> <span class='rubyid_stop_lock identifier id'>stop_lock</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deconfigure-instance_method">
  
    - (<tt>Object</tt>) <strong>deconfigure</strong>(cart_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Utils/ShellExecutionException.html" title="OpenShift::Utils::ShellExecutionException (class)">OpenShift::Utils::ShellExecutionException</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 206</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_deconfigure identifier id'>deconfigure</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_ShellExecutionException constant id'>ShellExecutionException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Failed to deconfigure a v1 cart while in v2 mode&quot;</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='string val'>&quot;CLIENT_ERROR: Your application is being upgraded and configuration changes can not be made at this time.  Please try again later.&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='symbol val'>:v2</span> <span class='eq op'>==</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_Sdk constant id'>Sdk</span><span class='dot token'>.</span><span class='rubyid_node_default_model identifier id'>node_default_model</span><span class='lparen token'>(</span><span class='rubyid_@config ivar id'>@config</span><span class='rparen token'>)</span>

  <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='string val'>'deconfigure'</span><span class='comma token'>,</span> <span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deploy-instance_method">
  
    - (<tt>Object</tt>) <strong>deploy</strong>(cart_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 219</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_deploy identifier id'>deploy</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
  <span class='rubyid_@cartridge_model ivar id'>@cartridge_model</span><span class='dot token'>.</span><span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='string val'>&quot;deploy&quot;</span><span class='comma token'>,</span> <span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deploy_httpd_proxy-instance_method">
  
    - (<tt>Object</tt>) <strong>deploy_httpd_proxy</strong>(cart_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 215</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_deploy_httpd_proxy identifier id'>deploy_httpd_proxy</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
  <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='string val'>'deploy-httpd-proxy'</span><span class='comma token'>,</span> <span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy-instance_method">
  
    - (<tt>Object</tt>) <strong>destroy</strong>(skip_hooks = false) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 126</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_destroy identifier id'>destroy</span><span class='lparen token'>(</span><span class='rubyid_skip_hooks identifier id'>skip_hooks</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span><span class='rparen token'>)</span>
  <span class='rubyid_hook_timeout identifier id'>hook_timeout</span><span class='assign token'>=</span><span class='integer val'>30</span>

  <span class='rubyid_output identifier id'>output</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
  <span class='rubyid_errout identifier id'>errout</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
  <span class='rubyid_retcode identifier id'>retcode</span> <span class='assign token'>=</span> <span class='integer val'>0</span>

  <span class='rubyid_hooks identifier id'>hooks</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='lbrack token'>[</span><span class='string val'>&quot;pre&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;post&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_hooktype identifier id'>hooktype</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_homedir identifier id'>homedir</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span> <span class='orop op'>||</span> <span class='notop op'>!</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span><span class='lparen token'>(</span><span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_homedir identifier id'>homedir</span><span class='rparen token'>)</span>
      <span class='rubyid_hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='rubyid_hooktype identifier id'>hooktype</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='rubyid_hooktype identifier id'>hooktype</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_Dir constant id'>Dir</span><span class='dot token'>.</span><span class='rubyid_entries identifier id'>entries</span><span class='lparen token'>(</span><span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_homedir identifier id'>homedir</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_cart identifier id'>cart</span><span class='bitor op'>|</span>
        <span class='lbrack token'>[</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@config ivar id'>@config</span><span class='dot token'>.</span><span class='rubyid_get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>&quot;CARTRIDGE_BASE_PATH&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span><span class='rubyid_cart identifier id'>cart</span><span class='comma token'>,</span><span class='string val'>&quot;info&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;hooks&quot;</span><span class='comma token'>,</span><span class='dstring node'>&quot;#{hooktype}-destroy&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span>
          <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@config ivar id'>@config</span><span class='dot token'>.</span><span class='rubyid_get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>&quot;CARTRIDGE_BASE_PATH&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span><span class='string val'>&quot;embedded&quot;</span><span class='comma token'>,</span><span class='rubyid_cart identifier id'>cart</span><span class='comma token'>,</span><span class='string val'>&quot;info&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;hooks&quot;</span><span class='comma token'>,</span><span class='dstring node'>&quot;#{hooktype}-destroy&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span>
        <span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_hook identifier id'>hook</span><span class='bitor op'>|</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span> <span class='rubyid_hook identifier id'>hook</span> <span class='rbrace token'>}</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
      <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_hook identifier id'>hook</span><span class='bitor op'>|</span>
        <span class='rubyid_not not kw'>not</span> <span class='rubyid_hook identifier id'>hook</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
      <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_hook identifier id'>hook</span><span class='bitor op'>|</span>
        <span class='dstring node'>&quot;#{hook} #{@user.container_name} #{@user.namespace} #{@user.container_uuid}&quot;</span>
      <span class='rbrace token'>}</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_unless unless kw'>unless</span> <span class='rubyid_skip_hooks identifier id'>skip_hooks</span>
    <span class='rubyid_hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='string val'>&quot;pre&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span> <span class='rubyid_cmd identifier id'>cmd</span> <span class='bitor op'>|</span>
      <span class='rubyid_out identifier id'>out</span><span class='comma token'>,</span><span class='rubyid_err identifier id'>err</span><span class='comma token'>,</span><span class='rubyid_rc identifier id'>rc</span> <span class='assign token'>=</span> <span class='rubyid_shellCmd identifier id'>shellCmd</span><span class='lparen token'>(</span><span class='rubyid_cmd identifier id'>cmd</span><span class='comma token'>,</span> <span class='string val'>&quot;/&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='rubyid_hook_timeout identifier id'>hook_timeout</span><span class='rparen token'>)</span>
      <span class='rubyid_errout identifier id'>errout</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_err identifier id'>err</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_err identifier id'>err</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
      <span class='rubyid_output identifier id'>output</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_out identifier id'>out</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_out identifier id'>out</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
      <span class='rubyid_retcode identifier id'>retcode</span> <span class='assign token'>=</span> <span class='integer val'>121</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_rc identifier id'>rc</span> <span class='neq op'>!=</span> <span class='integer val'>0</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_destroy identifier id'>destroy</span>

  <span class='rubyid_unless unless kw'>unless</span> <span class='rubyid_skip_hooks identifier id'>skip_hooks</span>
    <span class='rubyid_hooks identifier id'>hooks</span><span class='lbrack token'>[</span><span class='string val'>&quot;post&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span> <span class='rubyid_cmd identifier id'>cmd</span> <span class='bitor op'>|</span>
      <span class='rubyid_out identifier id'>out</span><span class='comma token'>,</span><span class='rubyid_err identifier id'>err</span><span class='comma token'>,</span><span class='rubyid_rc identifier id'>rc</span> <span class='assign token'>=</span> <span class='rubyid_shellCmd identifier id'>shellCmd</span><span class='lparen token'>(</span><span class='rubyid_cmd identifier id'>cmd</span><span class='comma token'>,</span> <span class='string val'>&quot;/&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='rubyid_hook_timeout identifier id'>hook_timeout</span><span class='rparen token'>)</span>
      <span class='rubyid_errout identifier id'>errout</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_err identifier id'>err</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_err identifier id'>err</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
      <span class='rubyid_output identifier id'>output</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_out identifier id'>out</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_out identifier id'>out</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
      <span class='rubyid_retcode identifier id'>retcode</span> <span class='assign token'>=</span> <span class='integer val'>121</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_rc identifier id'>rc</span> <span class='neq op'>!=</span> <span class='integer val'>0</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_return return kw'>return</span> <span class='rubyid_output identifier id'>output</span><span class='comma token'>,</span> <span class='rubyid_errout identifier id'>errout</span><span class='comma token'>,</span> <span class='rubyid_retcode identifier id'>retcode</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="do_control-instance_method">
  
    - (<tt>Object</tt>) <strong>do_control</strong>(action, cart_name, args = nil, hook_dir = &quot;hooks&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238
239
240
241
242
243
244
245
246
247</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 236</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='rubyid_action identifier id'>action</span><span class='comma token'>,</span> <span class='rubyid_cart_name identifier id'>cart_name</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_hook_dir identifier id'>hook_dir</span><span class='assign token'>=</span><span class='string val'>&quot;hooks&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_args identifier id'>args</span> <span class='assign token'>=</span> <span class='rubyid_args identifier id'>args</span> <span class='opasgn op'>||=</span> <span class='dstring node'>&quot;#{@user.container_name} #{@user.namespace} #{@user.container_uuid}&quot;</span>

  <span class='rubyid_exitcode identifier id'>exitcode</span><span class='comma token'>,</span> <span class='rubyid_output identifier id'>output</span> <span class='assign token'>=</span> <span class='rubyid_handle_cartridge_action identifier id'>handle_cartridge_action</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='comma token'>,</span> <span class='rubyid_action identifier id'>action</span><span class='comma token'>,</span> <span class='rubyid_hook_dir identifier id'>hook_dir</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_exitcode identifier id'>exitcode</span> <span class='neq op'>!=</span> <span class='integer val'>0</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_ShellExecutionException constant id'>ShellExecutionException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span>
      <span class='dstring node'>&quot;Control action '#{action}' returned an error. rc=#{exitcode}&quot;</span><span class='comma token'>,</span> <span class='rubyid_exitcode identifier id'>exitcode</span><span class='comma token'>,</span> <span class='rubyid_output identifier id'>output</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_output identifier id'>output</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_cartridge-instance_method">
  
    - (<tt>Object</tt>) <strong>each_cartridge</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Yields a <tt>Cartridge</tt> instance for each cartridge in the gear.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62
63
64
65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 59</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_each_cartridge identifier id'>each_cartridge</span>
  <span class='rubyid_Dir constant id'>Dir</span><span class='lbrack token'>[</span><span class='rubyid_PathUtils constant id'>PathUtils</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_homedir identifier id'>homedir</span><span class='comma token'>,</span> <span class='string val'>&quot;*&quot;</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_cart_dir identifier id'>cart_dir</span><span class='bitor op'>|</span>
    <span class='rubyid_next next kw'>next</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_cart_dir identifier id'>cart_dir</span><span class='dot token'>.</span><span class='rubyid_end_with? fid id'>end_with?</span><span class='lparen token'>(</span><span class='string val'>'app-root'</span><span class='rparen token'>)</span>
    <span class='rubyid_next next kw'>next</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_cart_dir identifier id'>cart_dir</span><span class='dot token'>.</span><span class='rubyid_end_with? fid id'>end_with?</span><span class='lparen token'>(</span><span class='string val'>'git'</span><span class='rparen token'>)</span>
    <span class='rubyid_next next kw'>next</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_directory? fid id'>directory?</span> <span class='rubyid_cart_dir identifier id'>cart_dir</span>

    <span class='rubyid_cartridge identifier id'>cartridge</span> <span class='assign token'>=</span> <span class='rubyid_get_cartridge identifier id'>get_cartridge</span><span class='lparen token'>(</span><span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_basename identifier id'>basename</span><span class='lparen token'>(</span><span class='rubyid_cart_dir identifier id'>cart_dir</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='rubyid_yield yield kw'>yield</span> <span class='rubyid_cartridge identifier id'>cartridge</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_cartridge-instance_method">
  
    - (<tt>Object</tt>) <strong>get_cartridge</strong>(cart_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23
24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 18</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_get_cartridge identifier id'>get_cartridge</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_manifest_path identifier id'>manifest_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@config ivar id'>@config</span><span class='dot token'>.</span><span class='rubyid_get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>'CARTRIDGE_BASE_PATH'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_cart_name identifier id'>cart_name</span><span class='comma token'>,</span> <span class='string val'>'info'</span><span class='comma token'>,</span> <span class='string val'>'manifest.yml'</span><span class='rparen token'>)</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Runtime constant id'>Runtime</span><span class='colon2 op'>::</span><span class='rubyid_Manifest constant id'>Manifest</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_manifest_path identifier id'>manifest_path</span><span class='rparen token'>)</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
    <span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_error identifier id'>error</span><span class='lparen token'>(</span><span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_backtrace identifier id'>backtrace</span><span class='rparen token'>)</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='dstring node'>&quot;Failed to load cart manifest from #{manifest_path} for cart #{cart_name} in gear #{@user.uuid}: #{e.message}&quot;</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="handle_cartridge_action-instance_method">
  
    - (<tt>Object</tt>) <strong>handle_cartridge_action</strong>(cartridge, action, hook_dir, args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
pre-refactor, V1 cartridges were added by the mcollective agent by calling
the configure hook directly.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 254</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_handle_cartridge_action identifier id'>handle_cartridge_action</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='comma token'>,</span> <span class='rubyid_action identifier id'>action</span><span class='comma token'>,</span> <span class='rubyid_hook_dir identifier id'>hook_dir</span><span class='comma token'>,</span> <span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='rubyid_exitcode identifier id'>exitcode</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='rubyid_output identifier id'>output</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span> <span class='dstring node'>&quot;/usr/libexec/openshift/cartridges/#{cartridge}/info/#{hook_dir}/#{action}&quot;</span>
    <span class='rubyid_cart_cmd identifier id'>cart_cmd</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;/usr/bin/runcon -l s0-s0:c0.c1023 /usr/libexec/openshift/cartridges/#{cartridge}/info/#{hook_dir}/#{action} #{args} 2&gt;&amp;1&quot;</span>
    <span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_info identifier id'>info</span><span class='lparen token'>(</span><span class='dstring node'>&quot;handle_cartridge_action executing #{cart_cmd}&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_pid identifier id'>pid</span><span class='comma token'>,</span> <span class='rubyid_stdin identifier id'>stdin</span><span class='comma token'>,</span> <span class='rubyid_stdout identifier id'>stdout</span><span class='comma token'>,</span> <span class='rubyid_stderr identifier id'>stderr</span> <span class='assign token'>=</span> <span class='rubyid_Open4 constant id'>Open4</span><span class='colon2 op'>::</span><span class='rubyid_popen4ext identifier id'>popen4ext</span><span class='lparen token'>(</span><span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_cart_cmd identifier id'>cart_cmd</span><span class='rparen token'>)</span>
  <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span> <span class='dstring node'>&quot;/usr/libexec/openshift/cartridges/embedded/#{cartridge}/info/hooks/#{action}&quot;</span>
    <span class='rubyid_cart_cmd identifier id'>cart_cmd</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;/usr/bin/runcon -l s0-s0:c0.c1023 /usr/libexec/openshift/cartridges/embedded/#{cartridge}/info/#{hook_dir}/#{action} #{args} 2&gt;&amp;1&quot;</span>
    <span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_info identifier id'>info</span><span class='lparen token'>(</span><span class='dstring node'>&quot;handle_cartridge_action executing #{cart_cmd}&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_pid identifier id'>pid</span><span class='comma token'>,</span> <span class='rubyid_stdin identifier id'>stdin</span><span class='comma token'>,</span> <span class='rubyid_stdout identifier id'>stdout</span><span class='comma token'>,</span> <span class='rubyid_stderr identifier id'>stderr</span> <span class='assign token'>=</span> <span class='rubyid_Open4 constant id'>Open4</span><span class='colon2 op'>::</span><span class='rubyid_popen4ext identifier id'>popen4ext</span><span class='lparen token'>(</span><span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='rubyid_cart_cmd identifier id'>cart_cmd</span><span class='rparen token'>)</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_exitcode identifier id'>exitcode</span> <span class='assign token'>=</span> <span class='integer val'>127</span>
    <span class='rubyid_output identifier id'>output</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;ERROR: action '#{action}' not found.&quot;</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_exitcode identifier id'>exitcode</span><span class='comma token'>,</span> <span class='rubyid_output identifier id'>output</span> <span class='assign token'>=</span> <span class='rubyid_complete_process_gracefully identifier id'>complete_process_gracefully</span><span class='lparen token'>(</span><span class='rubyid_pid identifier id'>pid</span><span class='comma token'>,</span> <span class='rubyid_stdin identifier id'>stdin</span><span class='comma token'>,</span> <span class='rubyid_stdout identifier id'>stdout</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_exitcode identifier id'>exitcode</span> <span class='eq op'>==</span> <span class='integer val'>0</span>

  <span class='comment val'>#XXX: account for run_hook vs. run_hook_output in test.</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_exitcode identifier id'>exitcode</span><span class='comma token'>,</span> <span class='rubyid_output identifier id'>output</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="locked_files-instance_method">
  
    - (<tt>Object</tt>) <strong>locked_files</strong>(cartridge) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 305</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_locked_files identifier id'>locked_files</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_NotImplementedError constant id'>NotImplementedError</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'V1 locked_files is not implemented via ApplicationContainer'</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="primary_cartridge-instance_method">
  
    - (<tt>Object</tt>) <strong>primary_cartridge</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the <tt>Cartridge</tt> in the gear whose <tt>primary</tt> flag is
set to true,
</p>
<p>
Raises an exception if no such cartridge is present.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76
77
78
79
80
81
82
83
84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 74</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_primary_cartridge identifier id'>primary_cartridge</span>
  <span class='rubyid_cart identifier id'>cart</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
  <span class='rubyid_each_cartridge identifier id'>each_cartridge</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='bitor op'>|</span>
    <span class='rubyid_cart identifier id'>cart</span> <span class='assign token'>=</span> <span class='rubyid_cartridge identifier id'>cartridge</span>
    <span class='rubyid_break break kw'>break</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_cartridge identifier id'>cartridge</span><span class='dot token'>.</span><span class='rubyid_deployable? fid id'>deployable?</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_cart identifier id'>cart</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='dstring node'>&quot;No primary cartridge found on gear #{@user.uuid}&quot;</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_cart identifier id'>cart</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="processed_templates-instance_method">
  
    - (<tt>Object</tt>) <strong>processed_templates</strong>(cartridge) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


321
322
323</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 321</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_processed_templates identifier id'>processed_templates</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_NotImplementedError constant id'>NotImplementedError</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'V1 processed_templates is not implemented via ApplicationContainer'</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_httpd_proxy-instance_method">
  
    - (<tt>Object</tt>) <strong>remove_httpd_proxy</strong>(cart_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 223</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_remove_httpd_proxy identifier id'>remove_httpd_proxy</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
  <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='string val'>'remove-httpd-proxy'</span><span class='comma token'>,</span> <span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="resolve_application_dependencies-instance_method">
  
    - (<tt>Object</tt>) <strong>resolve_application_dependencies</strong>(cart_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 202</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_resolve_application_dependencies identifier id'>resolve_application_dependencies</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>    
  <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='string val'>'resolve-application-dependencies'</span><span class='comma token'>,</span> <span class='string val'>'abstract'</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{@user.container_name} #{@user.namespace} #{@user.container_uuid}&quot;</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="restart_httpd_proxy-instance_method">
  
    - (<tt>Object</tt>) <strong>restart_httpd_proxy</strong>(cart_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 227</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_restart_httpd_proxy identifier id'>restart_httpd_proxy</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
  <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='string val'>'restart-httpd-proxy'</span><span class='comma token'>,</span> <span class='rubyid_cart_name identifier id'>cart_name</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="restore_transforms-instance_method">
  
    - (<tt>Object</tt>) <strong>restore_transforms</strong>(cartridge) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


317
318
319</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 317</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_restore_transforms identifier id'>restore_transforms</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_NotImplementedError constant id'>NotImplementedError</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'V1 restore_transforms is not implemented via ApplicationContainer'</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_rewritten-instance_method">
  
    - (<tt>Object</tt>) <strong>setup_rewritten</strong>(cartridge) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


313
314
315</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 313</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_setup_rewritten identifier id'>setup_rewritten</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_NotImplementedError constant id'>NotImplementedError</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'V1 setup_rewritten is not implemented via ApplicationContainer'</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="snapshot-instance_method">
  
    - (<tt>Object</tt>) <strong>snapshot</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


301
302
303</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 301</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_snapshot identifier id'>snapshot</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_NotImplementedError constant id'>NotImplementedError</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'V1 snapshot is not implemented via ApplicationContainer'</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="snapshot_exclusions-instance_method">
  
    - (<tt>Object</tt>) <strong>snapshot_exclusions</strong>(cartridge) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 309</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_snapshot_exclusions identifier id'>snapshot_exclusions</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_NotImplementedError constant id'>NotImplementedError</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'V1 snapshot_exclusions is not implemented via ApplicationContainer'</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_cartridge-instance_method">
  
    - (<tt>Object</tt>) <strong>start_cartridge</strong>(type, cartridge, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 100</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_start_cartridge identifier id'>start_cartridge</span><span class='lparen token'>(</span><span class='rubyid_type identifier id'>type</span><span class='comma token'>,</span> <span class='rubyid_cartridge identifier id'>cartridge</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_initiated</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:user_initiated</span><span class='rparen token'>)</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_initiated</span><span class='rbrack token'>]</span> <span class='rubyid_and and kw'>and</span> <span class='rubyid_stop_lock? fid id'>stop_lock?</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>
    <span class='rubyid_return return kw'>return</span> <span class='dstring node'>&quot;Not starting cartridge #{cartridge} because the application was explicitly stopped by the user&quot;</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='rubyid_type identifier id'>type</span><span class='comma token'>,</span> <span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_gear-instance_method">
  
    - (<tt>Object</tt>) <strong>start_gear</strong>(options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 94</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_start_gear identifier id'>start_gear</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_initiated</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:user_initiated</span><span class='rparen token'>)</span>

  <span class='rubyid_start_cartridge identifier id'>start_cartridge</span><span class='lparen token'>(</span><span class='string val'>'start'</span><span class='comma token'>,</span> <span class='rubyid_primary_cartridge identifier id'>primary_cartridge</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop_cartridge-instance_method">
  
    - (<tt>Object</tt>) <strong>stop_cartridge</strong>(cartridge, options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110
111
112
113
114
115
116
117
118
119
120
121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 110</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_stop_cartridge identifier id'>stop_cartridge</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_initiated</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:user_initiated</span><span class='rparen token'>)</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_initiated</span><span class='rbrack token'>]</span> <span class='rubyid_and and kw'>and</span> <span class='rubyid_stop_lock? fid id'>stop_lock?</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>
    <span class='rubyid_return return kw'>return</span> <span class='dstring node'>&quot;Not stopping cartridge #{cartridge} because the application was explicitly stopped by the user&quot;</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_buffer identifier id'>buffer</span> <span class='assign token'>=</span> <span class='rubyid_do_control identifier id'>do_control</span><span class='lparen token'>(</span><span class='string val'>'stop'</span><span class='comma token'>,</span> <span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_initiated</span><span class='rbrack token'>]</span> <span class='rubyid_and and kw'>and</span> <span class='rubyid_stop_lock? fid id'>stop_lock?</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span>
    <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_unlink identifier id'>unlink</span><span class='lparen token'>(</span><span class='rubyid_stop_lock identifier id'>stop_lock</span><span class='lparen token'>(</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_buffer identifier id'>buffer</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop_gear-instance_method">
  
    - (<tt>Object</tt>) <strong>stop_gear</strong>(options = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 88</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_stop_gear identifier id'>stop_gear</span><span class='lparen token'>(</span><span class='rubyid_options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:user_initiated</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_options identifier id'>options</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='symbol val'>:user_initiated</span><span class='rparen token'>)</span>

  <span class='rubyid_stop_cartridge identifier id'>stop_cartridge</span><span class='lparen token'>(</span><span class='rubyid_primary_cartridge identifier id'>primary_cartridge</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop_lock-instance_method">
  
    - (<tt>Object</tt>) <strong>stop_lock</strong>(cartridge_name = nil) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30
31
32
33
34
35
36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 28</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_stop_lock identifier id'>stop_lock</span><span class='lparen token'>(</span><span class='rubyid_cartridge_name identifier id'>cartridge_name</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_cartridge_name identifier id'>cartridge_name</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='comment val'># Return a cartridge in the gear; the primary if there is one.</span>
    <span class='rubyid_each_cartridge identifier id'>each_cartridge</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_cartridge identifier id'>cartridge</span><span class='bitor op'>|</span>
      <span class='rubyid_cartridge_name identifier id'>cartridge_name</span> <span class='assign token'>=</span> <span class='rubyid_cartridge identifier id'>cartridge</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span>
      <span class='rubyid_break break kw'>break</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_cartridge identifier id'>cartridge</span><span class='dot token'>.</span><span class='rubyid_deployable? fid id'>deployable?</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_cartridge_name identifier id'>cartridge_name</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='dstring node'>&quot;Partial gear with no cartridges: #{@user.uuid}&quot;</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_homedir identifier id'>homedir</span><span class='comma token'>,</span> <span class='rubyid_cartridge_name identifier id'>cartridge_name</span><span class='comma token'>,</span> <span class='string val'>'run'</span><span class='comma token'>,</span> <span class='string val'>'stop_lock'</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop_lock?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>stop_lock?</strong>(cartridge_name = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 42</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_stop_lock? fid id'>stop_lock?</span><span class='lparen token'>(</span><span class='rubyid_cartridge_name identifier id'>cartridge_name</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span><span class='lparen token'>(</span><span class='rubyid_stop_lock identifier id'>stop_lock</span><span class='lparen token'>(</span><span class='rubyid_cartridge_name identifier id'>cartridge_name</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tidy-instance_method">
  
    - (<tt>Object</tt>) <strong>tidy</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 173</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_tidy identifier id'>tidy</span>
  <span class='comment val'># Execute the tidy hooks in any installed carts, in the context</span>
  <span class='comment val'># of the gear user. For now, we detect cart installations by iterating</span>
  <span class='comment val'># over the gear subdirs and using the dir names to construct a path</span>
  <span class='comment val'># to cart scripts in the base cartridge directory. If such a file exists,</span>
  <span class='comment val'># it's assumed the cart is installed on the gear.</span>
  <span class='rubyid_cart_tidy_timeout identifier id'>cart_tidy_timeout</span> <span class='assign token'>=</span> <span class='integer val'>30</span>
  <span class='rubyid_Dir constant id'>Dir</span><span class='dot token'>.</span><span class='rubyid_entries identifier id'>entries</span><span class='lparen token'>(</span><span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_homedir identifier id'>homedir</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_gear_subdir identifier id'>gear_subdir</span><span class='bitor op'>|</span>
    <span class='rubyid_tidy_script identifier id'>tidy_script</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@config ivar id'>@config</span><span class='dot token'>.</span><span class='rubyid_get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>&quot;CARTRIDGE_BASE_PATH&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_gear_subdir identifier id'>gear_subdir</span><span class='comma token'>,</span> <span class='string val'>&quot;info&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;hooks&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;tidy&quot;</span><span class='rparen token'>)</span>

    <span class='rubyid_next next kw'>next</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span><span class='lparen token'>(</span><span class='rubyid_tidy_script identifier id'>tidy_script</span><span class='rparen token'>)</span>

    <span class='rubyid_begin begin kw'>begin</span>
      <span class='comment val'># Execute the hook in the context of the gear user</span>
      <span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_debug identifier id'>debug</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Executing cart tidy script #{tidy_script} in gear #{@user.uuid} as user #{@user.uid}:#{@user.gid}&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_ShellExec constant id'>ShellExec</span><span class='dot token'>.</span><span class='rubyid_run_as identifier id'>run_as</span><span class='lparen token'>(</span><span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_uid identifier id'>uid</span><span class='comma token'>,</span> <span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_gid identifier id'>gid</span><span class='comma token'>,</span> <span class='rubyid_tidy_script identifier id'>tidy_script</span><span class='comma token'>,</span> <span class='rubyid_@user ivar id'>@user</span><span class='dot token'>.</span><span class='rubyid_homedir identifier id'>homedir</span><span class='comma token'>,</span> <span class='rubyid_false false kw'>false</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='rubyid_cart_tidy_timeout identifier id'>cart_tidy_timeout</span><span class='rparen token'>)</span>
    <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_ShellExecutionException constant id'>ShellExecutionException</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
      <span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_warn identifier id'>warn</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Cartridge tidy operation failed on gear #{@user.uuid} for cart #{gear_subdir}: #{e.message} (rc=#{e.rc})&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unsubscribe-instance_method">
  
    - (<tt>Object</tt>) <strong>unsubscribe</strong>(cart_name, pub_cart_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/v1_cart_model.rb', line 212</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_unsubscribe identifier id'>unsubscribe</span><span class='lparen token'>(</span><span class='rubyid_cart_name identifier id'>cart_name</span><span class='comma token'>,</span> <span class='rubyid_pub_cart_name identifier id'>pub_cart_name</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sat Jun  1 18:43:05 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-1.8.7).
</div>

  </body>
</html>