<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: OpenShift::FrontendHttpServer
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../OpenShift.html" title="OpenShift (module)">OpenShift</a></span></span>
     &raquo; 
    <span class="title">FrontendHttpServer</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: OpenShift::FrontendHttpServer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Model</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Model</li>
          
            <li class="next">OpenShift::FrontendHttpServer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="NodeLogger.html" title="OpenShift::NodeLogger (module)">NodeLogger</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h2>Frontend Http Server</h2>
<p>
Represents the front-end HTTP server on the system.
</p>
<p>
Note: This is the Apache VirtualHost implementation; other implementations
may vary.
</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  



  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="NodeLogger.html" title="OpenShift::NodeLogger (module)">NodeLogger</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="NodeLogger.html#PROFILES-constant" title="OpenShift::NodeLogger::PROFILES (constant)">NodeLogger::PROFILES</a></span></p>


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#container_name-instance_method" title="#container_name (instance method)">- (Object) <strong>container_name</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute container_name.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#container_uuid-instance_method" title="#container_uuid (instance method)">- (Object) <strong>container_uuid</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute container_uuid.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#fqdn-instance_method" title="#fqdn (instance method)">- (Object) <strong>fqdn</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute fqdn.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#namespace-instance_method" title="#namespace (instance method)">- (Object) <strong>namespace</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute namespace.
</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all-class_method" title="all (class method)">+ (Object) <strong>all</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: return an Enumerator which yields FrontendHttpServer objects for
each gear which has run create.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#json_create-class_method" title="json_create (class method)">+ (Object) <strong>json_create</strong>(obj) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Load from json.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_alias-instance_method" title="#add_alias (instance method)">- (Object) <strong>add_alias</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Add an alias to this namespace.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_ssl_cert-instance_method" title="#add_ssl_cert (instance method)">- (Object) <strong>add_ssl_cert</strong>(ssl_cert, priv_key, server_alias, passphrase = '') </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Adds a ssl certificate for an alias.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#aliases-instance_method" title="#aliases (instance method)">- (Object) <strong>aliases</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: List aliases for this gear.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clean_server_name-instance_method" title="#clean_server_name (instance method)">- (Object) <strong>clean_server_name</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Private: Validate the server name.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connect-instance_method" title="#connect (instance method)">- (Object) <strong>connect</strong>(*elements) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Connect path elements to a back-end URI for this namespace.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connect_websocket-instance_method" title="#connect_websocket (instance method)">- (Object) <strong>connect_websocket</strong>(path, uri, options) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connections-instance_method" title="#connections (instance method)">- (Object) <strong>connections</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: List connections Returns [ [path, uri, options], [path, uri,
options], &#8230;].
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-instance_method" title="#create (instance method)">- (Object) <strong>create</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Initialize a new configuration for this gear.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">- (Object) <strong>destroy</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Remove the frontend httpd configuration for a gear.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disconnect-instance_method" title="#disconnect (instance method)">- (Object) <strong>disconnect</strong>(*paths) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Disconnect a path element from this namespace.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disconnect_websocket-instance_method" title="#disconnect_websocket (instance method)">- (Object) <strong>disconnect_websocket</strong>(*paths) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_sts-instance_method" title="#get_sts (instance method)">- (Object) <strong>get_sts</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Determine whether the gear has sts.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#idle-instance_method" title="#idle (instance method)">- (Object) <strong>idle</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Mark a gear as idled.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#idle%3F-instance_method" title="#idle? (instance method)">- (Boolean) <strong>idle?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Determine whether the gear is idle.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (FrontendHttpServer) <strong>initialize</strong>(container_uuid, container_name = nil, namespace = nil) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of FrontendHttpServer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#no_sts-instance_method" title="#no_sts (instance method)">- (Object) <strong>no_sts</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Unmark a gear for sts.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reload_httpd-instance_method" title="#reload_httpd (instance method)">- (Object) <strong>reload_httpd</strong>(async = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Reload the Apache configuration.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_alias-instance_method" title="#remove_alias (instance method)">- (Object) <strong>remove_alias</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Removes an alias from this namespace.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_ssl_cert-instance_method" title="#remove_ssl_cert (instance method)">- (Object) <strong>remove_ssl_cert</strong>(server_alias) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Removes ssl certificate/private key associated with an alias.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ssl_certs-instance_method" title="#ssl_certs (instance method)">- (Object) <strong>ssl_certs</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: List aliases with SSL certs and unencrypted private keys.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sts-instance_method" title="#sts (instance method)">- (Object) <strong>sts</strong>(max_age = 15768000) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Mark a gear for STS.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_hash-instance_method" title="#to_hash (instance method)">- (Object) <strong>to_hash</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: extract hash version of complete data for this gear.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_json-instance_method" title="#to_json (instance method)">- (Object) <strong>to_json</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Generate json.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unidle-instance_method" title="#unidle (instance method)">- (Object) <strong>unidle</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Unmark a gear as idled.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unprivileged_unidle-instance_method" title="#unprivileged_unidle (instance method)">- (Object) <strong>unprivileged_unidle</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Make an unprivileged call to unidle the gear.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (Object) <strong>update</strong>(container_name, namespace) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Public: Update identifier to the new names.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_name-instance_method" title="#update_name (instance method)">- (Object) <strong>update_name</strong>(container_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="NodeLogger.html" title="OpenShift::NodeLogger (module)">NodeLogger</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="NodeLogger.html#build_logger-class_method" title="OpenShift::NodeLogger.build_logger (method)">build_logger</a></span>, <span class='object_link'><a href="NodeLogger.html#logger-instance_method" title="OpenShift::NodeLogger#logger (method)">#logger</a></span>, <span class='object_link'><a href="NodeLogger.html#logger-class_method" title="OpenShift::NodeLogger.logger (method)">logger</a></span>, <span class='object_link'><a href="NodeLogger.html#logger_rebuild-class_method" title="OpenShift::NodeLogger.logger_rebuild (method)">logger_rebuild</a></span>, <span class='object_link'><a href="NodeLogger.html#trace_logger-instance_method" title="OpenShift::NodeLogger#trace_logger (method)">#trace_logger</a></span>, <span class='object_link'><a href="NodeLogger.html#trace_logger-class_method" title="OpenShift::NodeLogger.trace_logger (method)">trace_logger</a></span>, <span class='object_link'><a href="NodeLogger.html#trace_rebuild-class_method" title="OpenShift::NodeLogger.trace_rebuild (method)">trace_rebuild</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="OpenShift::FrontendHttpServer (class)">FrontendHttpServer</a></span></tt>) <strong>initialize</strong>(container_uuid, container_name = nil, namespace = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
A new instance of FrontendHttpServer
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 142</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_container_uuid identifier id'>container_uuid</span><span class='comma token'>,</span> <span class='rubyid_container_name identifier id'>container_name</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_namespace identifier id'>namespace</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='rubyid_@config ivar id'>@config</span> <span class='assign token'>=</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_Config constant id'>Config</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span>

  <span class='rubyid_@cloud_domain ivar id'>@cloud_domain</span> <span class='assign token'>=</span> <span class='rubyid_clean_server_name identifier id'>clean_server_name</span><span class='lparen token'>(</span><span class='rubyid_@config ivar id'>@config</span><span class='dot token'>.</span><span class='rubyid_get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>&quot;CLOUD_DOMAIN&quot;</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

  <span class='rubyid_@basedir ivar id'>@basedir</span> <span class='assign token'>=</span> <span class='rubyid_@config ivar id'>@config</span><span class='dot token'>.</span><span class='rubyid_get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>&quot;OPENSHIFT_HTTP_CONF_DIR&quot;</span><span class='rparen token'>)</span>

  <span class='rubyid_@container_uuid ivar id'>@container_uuid</span> <span class='assign token'>=</span> <span class='rubyid_container_uuid identifier id'>container_uuid</span>
  <span class='rubyid_@container_name ivar id'>@container_name</span> <span class='assign token'>=</span> <span class='rubyid_container_name identifier id'>container_name</span>
  <span class='rubyid_@namespace ivar id'>@namespace</span> <span class='assign token'>=</span> <span class='rubyid_namespace identifier id'>namespace</span>

  <span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>

  <span class='comment val'># Did we save the old information?</span>
  <span class='rubyid_if if kw'>if</span> <span class='lparen token'>(</span><span class='rubyid_@container_name ivar id'>@container_name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span> <span class='rubyid_or or kw'>or</span> <span class='lparen token'>(</span><span class='rubyid_@namespace ivar id'>@namespace</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_begin begin kw'>begin</span>
      <span class='rubyid_GearDB constant id'>GearDB</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_GearDB constant id'>GearDB</span><span class='colon2 op'>::</span><span class='rubyid_READER constant id'>READER</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
        <span class='rubyid_@container_name ivar id'>@container_name</span> <span class='assign token'>=</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='string val'>'container_name'</span><span class='rparen token'>)</span>
        <span class='rubyid_@namespace ivar id'>@namespace</span> <span class='assign token'>=</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='string val'>'namespace'</span><span class='rparen token'>)</span>
        <span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='assign token'>=</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='string val'>'fqdn'</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_rescue rescue kw'>rescue</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Last ditch, attempt to infer from the gear itself</span>
  <span class='rubyid_if if kw'>if</span> <span class='lparen token'>(</span><span class='rubyid_@container_name ivar id'>@container_name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span> <span class='rubyid_or or kw'>or</span> <span class='lparen token'>(</span><span class='rubyid_@namespace ivar id'>@namespace</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_begin begin kw'>begin</span>
      <span class='rubyid_env identifier id'>env</span> <span class='assign token'>=</span> <span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_Environ constant id'>Environ</span><span class='dot token'>.</span><span class='rubyid_for_gear identifier id'>for_gear</span><span class='lparen token'>(</span><span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@config ivar id'>@config</span><span class='dot token'>.</span><span class='rubyid_get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>&quot;GEAR_BASE_DIR&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
      <span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='assign token'>=</span> <span class='rubyid_clean_server_name identifier id'>clean_server_name</span><span class='lparen token'>(</span><span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>'OPENSHIFT_GEAR_DNS'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='rubyid_@container_name ivar id'>@container_name</span> <span class='assign token'>=</span> <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>'OPENSHIFT_GEAR_NAME'</span><span class='rbrack token'>]</span>
      <span class='rubyid_@namespace ivar id'>@namespace</span> <span class='assign token'>=</span> <span class='rubyid_env identifier id'>env</span><span class='lbrack token'>[</span><span class='string val'>'OPENSHIFT_GEAR_DNS'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\..*$/</span><span class='comma token'>,</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/^.*\-/</span><span class='comma token'>,</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_rescue rescue kw'>rescue</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Could not infer from any source</span>
  <span class='rubyid_if if kw'>if</span> <span class='lparen token'>(</span><span class='rubyid_@container_name ivar id'>@container_name</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span> <span class='rubyid_or or kw'>or</span> <span class='lparen token'>(</span><span class='rubyid_@namespace ivar id'>@namespace</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='eq op'>==</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerException constant id'>FrontendHttpServerException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Name or namespace not specified and could not infer it&quot;</span><span class='comma token'>,</span>
                                          <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='assign token'>=</span> <span class='rubyid_clean_server_name identifier id'>clean_server_name</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{@container_name}-#{@namespace}.#{@cloud_domain}&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="container_name-instance_method">
  
    - (<tt>Object</tt>) <strong>container_name</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute container_name
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 111</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_container_name identifier id'>container_name</span>
  <span class='rubyid_@container_name ivar id'>@container_name</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="container_uuid-instance_method">
  
    - (<tt>Object</tt>) <strong>container_uuid</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute container_uuid
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 111</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_container_uuid identifier id'>container_uuid</span>
  <span class='rubyid_@container_uuid ivar id'>@container_uuid</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="fqdn-instance_method">
  
    - (<tt>Object</tt>) <strong>fqdn</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute fqdn
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 112</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_fqdn identifier id'>fqdn</span>
  <span class='rubyid_@fqdn ivar id'>@fqdn</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="namespace-instance_method">
  
    - (<tt>Object</tt>) <strong>namespace</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute namespace
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 112</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_namespace identifier id'>namespace</span>
  <span class='rubyid_@namespace ivar id'>@namespace</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="all-class_method">
  
    + (<tt>Object</tt>) <strong>all</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: return an Enumerator which yields FrontendHttpServer objects for
each gear which has run create.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 116</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all identifier id'>all</span>
  <span class='rubyid_Enumerator constant id'>Enumerator</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_yielder identifier id'>yielder</span><span class='bitor op'>|</span>

    <span class='comment val'># Avoid deadlocks by listing the gears first</span>
    <span class='rubyid_gearlist identifier id'>gearlist</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='rubyid_GearDB constant id'>GearDB</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_GearDB constant id'>GearDB</span><span class='colon2 op'>::</span><span class='rubyid_READER constant id'>READER</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
      <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_uuid identifier id'>uuid</span><span class='comma token'>,</span> <span class='rubyid_container identifier id'>container</span><span class='bitor op'>|</span>
        <span class='rubyid_gearlist identifier id'>gearlist</span><span class='lbrack token'>[</span><span class='rubyid_uuid identifier id'>uuid</span><span class='dot token'>.</span><span class='rubyid_clone identifier id'>clone</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_container identifier id'>container</span><span class='dot token'>.</span><span class='rubyid_clone identifier id'>clone</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_gearlist identifier id'>gearlist</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_uuid identifier id'>uuid</span><span class='comma token'>,</span> <span class='rubyid_container identifier id'>container</span><span class='bitor op'>|</span>
      <span class='rubyid_frontend identifier id'>frontend</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
      <span class='rubyid_begin begin kw'>begin</span>
        <span class='rubyid_frontend identifier id'>frontend</span> <span class='assign token'>=</span> <span class='rubyid_FrontendHttpServer constant id'>FrontendHttpServer</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_uuid identifier id'>uuid</span><span class='comma token'>,</span> <span class='rubyid_container identifier id'>container</span><span class='lbrack token'>[</span><span class='string val'>'container_name'</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_container identifier id'>container</span><span class='lbrack token'>[</span><span class='string val'>'namespace'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
      <span class='rubyid_rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
        <span class='rubyid_NodeLogger constant id'>NodeLogger</span><span class='dot token'>.</span><span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_error identifier id'>error</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Failed to instantiate FrontendHttpServer for #{uuid}: #{e}&quot;</span><span class='rparen token'>)</span>
        <span class='rubyid_NodeLogger constant id'>NodeLogger</span><span class='dot token'>.</span><span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_error identifier id'>error</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Backtrace: #{e.backtrace}&quot;</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_yielder identifier id'>yielder</span><span class='dot token'>.</span><span class='rubyid_yield identifier id'>yield</span><span class='lparen token'>(</span><span class='rubyid_frontend identifier id'>frontend</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="json_create-class_method">
  
    + (<tt>Object</tt>) <strong>json_create</strong>(obj) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Load from json
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 260</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_json_create identifier id'>json_create</span><span class='lparen token'>(</span><span class='rubyid_obj identifier id'>obj</span><span class='rparen token'>)</span>
  <span class='rubyid_data identifier id'>data</span> <span class='assign token'>=</span> <span class='rubyid_obj identifier id'>obj</span><span class='lbrack token'>[</span><span class='string val'>'data'</span><span class='rbrack token'>]</span>
  <span class='rubyid_new_obj identifier id'>new_obj</span> <span class='assign token'>=</span> <span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'container_uuid'</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'container_name'</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
                <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>'namespace'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='rubyid_new_obj identifier id'>new_obj</span><span class='dot token'>.</span><span class='rubyid_create identifier id'>create</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_data identifier id'>data</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;connections&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_new_obj identifier id'>new_obj</span><span class='dot token'>.</span><span class='rubyid_connect identifier id'>connect</span><span class='lparen token'>(</span><span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;connections&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_data identifier id'>data</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;aliases&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;aliases&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_a identifier id'>a</span><span class='bitor op'>|</span>
      <span class='rubyid_new_obj identifier id'>new_obj</span><span class='dot token'>.</span><span class='rubyid_add_alias identifier id'>add_alias</span><span class='lparen token'>(</span><span class='rubyid_a identifier id'>a</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_data identifier id'>data</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;ssl_certs&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;ssl_certs&quot;</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_c identifier id'>c</span><span class='comma token'>,</span> <span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_a identifier id'>a</span><span class='bitor op'>|</span>
      <span class='rubyid_new_obj identifier id'>new_obj</span><span class='dot token'>.</span><span class='rubyid_add_ssl_cert identifier id'>add_ssl_cert</span><span class='lparen token'>(</span><span class='rubyid_c identifier id'>c</span><span class='comma token'>,</span> <span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_a identifier id'>a</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_data identifier id'>data</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;idle&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;idle&quot;</span><span class='rbrack token'>]</span>
      <span class='rubyid_new_obj identifier id'>new_obj</span><span class='dot token'>.</span><span class='rubyid_idle identifier id'>idle</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_new_obj identifier id'>new_obj</span><span class='dot token'>.</span><span class='rubyid_unidle identifier id'>unidle</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_data identifier id'>data</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='string val'>&quot;sts&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;sts&quot;</span><span class='rbrack token'>]</span>
      <span class='rubyid_new_obj identifier id'>new_obj</span><span class='dot token'>.</span><span class='rubyid_sts identifier id'>sts</span><span class='lparen token'>(</span><span class='rubyid_data identifier id'>data</span><span class='lbrack token'>[</span><span class='string val'>&quot;sts&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_new_obj identifier id'>new_obj</span><span class='dot token'>.</span><span class='rubyid_no_sts identifier id'>no_sts</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_new_obj identifier id'>new_obj</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_alias-instance_method">
  
    - (<tt>Object</tt>) <strong>add_alias</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Add an alias to this namespace
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    add_alias(&quot;foo.example.com&quot;)
    # =&gt; nil
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 684</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_add_alias identifier id'>add_alias</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='rubyid_dname identifier id'>dname</span> <span class='assign token'>=</span> <span class='rubyid_clean_server_name identifier id'>clean_server_name</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='rparen token'>)</span>

  <span class='comment val'># Broker checks for global uniqueness</span>
  <span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_store identifier id'>store</span><span class='lparen token'>(</span><span class='rubyid_dname identifier id'>dname</span><span class='comma token'>,</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_begin begin kw'>begin</span>
      <span class='rubyid_routes_ent identifier id'>routes_ent</span> <span class='assign token'>=</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_routes_ent identifier id'>routes_ent</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
        <span class='rubyid_alias_ent identifier id'>alias_ent</span> <span class='assign token'>=</span> <span class='rubyid_routes_ent identifier id'>routes_ent</span><span class='dot token'>.</span><span class='rubyid_clone identifier id'>clone</span>
        <span class='rubyid_alias_ent identifier id'>alias_ent</span><span class='lbrack token'>[</span><span class='string val'>&quot;alias&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span>
        <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_store identifier id'>store</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_alias_ent identifier id'>alias_ent</span><span class='rparen token'>)</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_KeyError constant id'>KeyError</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_ssl_cert-instance_method">
  
    - (<tt>Object</tt>) <strong>add_ssl_cert</strong>(ssl_cert, priv_key, server_alias, passphrase = '') 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Adds a ssl certificate for an alias
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 749</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_add_ssl_cert identifier id'>add_ssl_cert</span><span class='lparen token'>(</span><span class='rubyid_ssl_cert identifier id'>ssl_cert</span><span class='comma token'>,</span> <span class='rubyid_priv_key identifier id'>priv_key</span><span class='comma token'>,</span> <span class='rubyid_server_alias identifier id'>server_alias</span><span class='comma token'>,</span> <span class='rubyid_passphrase identifier id'>passphrase</span><span class='assign token'>=</span><span class='string val'>''</span><span class='rparen token'>)</span>
  <span class='rubyid_server_alias_clean identifier id'>server_alias_clean</span> <span class='assign token'>=</span> <span class='rubyid_clean_server_name identifier id'>clean_server_name</span><span class='lparen token'>(</span><span class='rubyid_server_alias identifier id'>server_alias</span><span class='rparen token'>)</span>

  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_priv_key_clean identifier id'>priv_key_clean</span> <span class='assign token'>=</span> <span class='rubyid_OpenSSL constant id'>OpenSSL</span><span class='colon2 op'>::</span><span class='rubyid_PKey constant id'>PKey</span><span class='dot token'>.</span><span class='rubyid_read identifier id'>read</span><span class='lparen token'>(</span><span class='rubyid_priv_key identifier id'>priv_key</span><span class='comma token'>,</span> <span class='rubyid_passphrase identifier id'>passphrase</span><span class='rparen token'>)</span>
    <span class='rubyid_ssl_cert_clean identifier id'>ssl_cert_clean</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_ssl_cert_unit identifier id'>ssl_cert_unit</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
    <span class='rubyid_ssl_cert identifier id'>ssl_cert</span><span class='dot token'>.</span><span class='rubyid_each_line identifier id'>each_line</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_cert_line identifier id'>cert_line</span><span class='bitor op'>|</span>
      <span class='rubyid_ssl_cert_unit identifier id'>ssl_cert_unit</span> <span class='opasgn op'>+=</span> <span class='rubyid_cert_line identifier id'>cert_line</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_cert_line identifier id'>cert_line</span><span class='dot token'>.</span><span class='rubyid_start_with? fid id'>start_with?</span><span class='lparen token'>(</span><span class='string val'>'-----END'</span><span class='rparen token'>)</span>
        <span class='rubyid_ssl_cert_clean identifier id'>ssl_cert_clean</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_OpenSSL constant id'>OpenSSL</span><span class='colon2 op'>::</span><span class='rubyid_X509 constant id'>X509</span><span class='colon2 op'>::</span><span class='rubyid_Certificate constant id'>Certificate</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_ssl_cert_unit identifier id'>ssl_cert_unit</span><span class='rparen token'>)</span>
        <span class='rubyid_ssl_cert_unit identifier id'>ssl_cert_unit</span> <span class='assign token'>=</span> <span class='string val'>&quot;&quot;</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_ArgumentError constant id'>ArgumentError</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerException constant id'>FrontendHttpServerException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Invalid Private Key or Passphrase&quot;</span><span class='comma token'>,</span>
                                          <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span>
                                          <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_OpenSSL constant id'>OpenSSL</span><span class='colon2 op'>::</span><span class='rubyid_X509 constant id'>X509</span><span class='colon2 op'>::</span><span class='rubyid_CertificateError constant id'>CertificateError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerException constant id'>FrontendHttpServerException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Invalid X509 Certificate: #{e.message}&quot;</span><span class='comma token'>,</span>
                                          <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span>
                                          <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerException constant id'>FrontendHttpServerException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Other key/cert error: #{e.message}&quot;</span><span class='comma token'>,</span>
                                          <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span>
                                          <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_ssl_cert_clean identifier id'>ssl_cert_clean</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerException constant id'>FrontendHttpServerException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Could not parse certificates&quot;</span><span class='comma token'>,</span>
                                          <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span>
                                          <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_ssl_cert_clean identifier id'>ssl_cert_clean</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_check_private_key identifier id'>check_private_key</span><span class='lparen token'>(</span><span class='rubyid_priv_key_clean identifier id'>priv_key_clean</span><span class='rparen token'>)</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerException constant id'>FrontendHttpServerException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Key/cert mismatch&quot;</span><span class='comma token'>,</span>
                                          <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span>
                                          <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='lbrack token'>[</span><span class='rubyid_OpenSSL constant id'>OpenSSL</span><span class='colon2 op'>::</span><span class='rubyid_PKey constant id'>PKey</span><span class='colon2 op'>::</span><span class='rubyid_RSA constant id'>RSA</span><span class='comma token'>,</span> <span class='rubyid_OpenSSL constant id'>OpenSSL</span><span class='colon2 op'>::</span><span class='rubyid_PKey constant id'>PKey</span><span class='colon2 op'>::</span><span class='rubyid_DSA constant id'>DSA</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span><span class='lparen token'>(</span><span class='rubyid_priv_key_clean identifier id'>priv_key_clean</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='rparen token'>)</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerException constant id'>FrontendHttpServerException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Key must be RSA or DSA for Apache mod_ssl&quot;</span><span class='comma token'>,</span>
                                          <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span>
                                          <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>


  <span class='comment val'># Create a new directory for the alias and copy the certificates</span>
  <span class='rubyid_alias_token identifier id'>alias_token</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{@container_uuid}_#{@namespace}_#{server_alias_clean}&quot;</span>
  <span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@basedir ivar id'>@basedir</span><span class='comma token'>,</span> <span class='rubyid_alias_token identifier id'>alias_token</span><span class='rparen token'>)</span>
  <span class='rubyid_ssl_cert_file_path identifier id'>ssl_cert_file_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span><span class='comma token'>,</span> <span class='rubyid_server_alias_clean identifier id'>server_alias_clean</span> <span class='plus op'>+</span> <span class='string val'>&quot;.crt&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_priv_key_file_path identifier id'>priv_key_file_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span><span class='comma token'>,</span> <span class='rubyid_server_alias_clean identifier id'>server_alias_clean</span> <span class='plus op'>+</span> <span class='string val'>&quot;.key&quot;</span><span class='rparen token'>)</span>

  <span class='comment val'>#</span>
  <span class='comment val'># Create configuration for the alias</span>
  <span class='comment val'>#</span>

  <span class='comment val'># Create top level config file for the alias</span>
  <span class='rubyid_alias_conf_contents identifier id'>alias_conf_contents</span> <span class='assign token'>=</span> <span class='string val'>&quot;&lt;VirtualHost *:443&gt;\nServerName \#{server_alias_clean}\nServerAdmin openshift-bofh@redhat.com\nDocumentRoot /var/www/html\nDefaultType None\n\nSSLEngine on\n\nSSLCertificateFile \#{ssl_cert_file_path}\nSSLCertificateKeyFile \#{priv_key_file_path}\nSSLCertificateChainFile \#{ssl_cert_file_path}\nSSLCipherSuite RSA:!EXPORT:!DH:!LOW:!NULL:+MEDIUM:+HIGH\nSSLProtocol -ALL +SSLv3 +TLSv1\nSSLOptions +StdEnvVars +ExportCertData\n# SSLVerifyClient must be set for +ExportCertData to take effect, so just use\n# optional_no_ca.\nSSLVerifyClient optional_no_ca\n\nRequestHeader set X-Forwarded-Proto \&quot;https\&quot;\nRequestHeader set X-Forwarded-SSL-Client-Cert %{SSL_CLIENT_CERT}e\n\nRewriteEngine On\ninclude conf.d/openshift_route.include\n\n&lt;/VirtualHost&gt;\n&quot;</span>

  <span class='comment val'># Finally, commit the changes</span>
  <span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='lparen token'>(</span><span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span> <span class='rubyid_server_alias_clean identifier id'>server_alias_clean</span><span class='rparen token'>)</span>
      <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerException constant id'>FrontendHttpServerException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Specified alias #{server_alias_clean} does not exist for the app&quot;</span><span class='comma token'>,</span>
                                            <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span>
                                            <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='rubyid_FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rubyid_mkdir_p identifier id'>mkdir_p</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span><span class='rparen token'>)</span>
    <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ssl_cert_file_path identifier id'>ssl_cert_file_path</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_f identifier id'>f</span><span class='bitor op'>|</span> <span class='rubyid_f identifier id'>f</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_ssl_cert_clean identifier id'>ssl_cert_clean</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_c identifier id'>c</span><span class='bitor op'>|</span> <span class='rubyid_c identifier id'>c</span><span class='dot token'>.</span><span class='rubyid_to_pem identifier id'>to_pem</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
    <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_priv_key_file_path identifier id'>priv_key_file_path</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_f identifier id'>f</span><span class='bitor op'>|</span> <span class='rubyid_f identifier id'>f</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_priv_key_clean identifier id'>priv_key_clean</span><span class='dot token'>.</span><span class='rubyid_to_pem identifier id'>to_pem</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

    <span class='rubyid_alias_conf_file_path identifier id'>alias_conf_file_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@basedir ivar id'>@basedir</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{alias_token}.conf&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_file_path identifier id'>alias_conf_file_path</span><span class='comma token'>,</span> <span class='string val'>'w'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_f identifier id'>f</span><span class='bitor op'>|</span> <span class='rubyid_f identifier id'>f</span><span class='dot token'>.</span><span class='rubyid_write identifier id'>write</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_contents identifier id'>alias_conf_contents</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

    <span class='comment val'># Reload httpd to pick up the new configuration</span>
    <span class='rubyid_reload_httpd identifier id'>reload_httpd</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="aliases-instance_method">
  
    - (<tt>Object</tt>) <strong>aliases</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: List aliases for this gear
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    aliases
    # =&gt; [&quot;foo.example.com&quot;, &quot;bar.example.com&quot;]
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


670
671
672
673
674</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 670</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_aliases identifier id'>aliases</span>
  <span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='colon2 op'>::</span><span class='rubyid_READER constant id'>READER</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span> <span class='rubyid_v identifier id'>v</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span> <span class='rubyid_k identifier id'>k</span> <span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clean_server_name-instance_method">
  
    - (<tt>Object</tt>) <strong>clean_server_name</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Private: Validate the server name
</p>
<p>
The name is validated against DNS host name requirements from RFC 1123 and
RFC 952. Additionally, OpenShift does not allow names/aliases to be an IP
address.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 885</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_clean_server_name identifier id'>clean_server_name</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='rubyid_dname identifier id'>dname</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_dname identifier id'>dname</span><span class='dot token'>.</span><span class='rubyid_index identifier id'>index</span><span class='lparen token'>(</span><span class='regexp val'>/[^0-9a-z\-.]/</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerNameException constant id'>FrontendHttpServerNameException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Invalid characters&quot;</span><span class='comma token'>,</span> <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> \
                                               <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='comma token'>,</span> <span class='rubyid_dname identifier id'>dname</span> <span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_dname identifier id'>dname</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>255</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerNameException constant id'>FrontendHttpServerNameException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Too long&quot;</span><span class='comma token'>,</span> <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> \
                                              <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='comma token'>,</span> <span class='rubyid_dname identifier id'>dname</span> <span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_dname identifier id'>dname</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerNameException constant id'>FrontendHttpServerNameException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;Name was blank&quot;</span><span class='comma token'>,</span> <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> \
                                              <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='comma token'>,</span> <span class='rubyid_dname identifier id'>dname</span> <span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_dname identifier id'>dname</span> <span class='match op'>=~</span> <span class='regexp val'>/^\d+\.\d+\.\d+\.\d+$/</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerNameException constant id'>FrontendHttpServerNameException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>&quot;IP addresses are not allowed&quot;</span><span class='comma token'>,</span> <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> \
                                              <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='comma token'>,</span> <span class='rubyid_dname identifier id'>dname</span> <span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_return return kw'>return</span> <span class='rubyid_dname identifier id'>dname</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="connect-instance_method">
  
    - (<tt>Object</tt>) <strong>connect</strong>(*elements) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Connect path elements to a back-end URI for this namespace.
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    connect('', '127.0.250.1:8080')
    connect('/', '127.0.250.1:8080/')
    connect('/phpmyadmin', '127.0.250.2:8080/')
    connect('/socket, '127.0.250.3:8080/', {&quot;websocket&quot;=&gt;1}

        Options:
            websocket      Enable web sockets on a particular path
            gone           Mark the path as gone (uri is ignored)
            forbidden      Mark the path as forbidden (uri is ignored)
            noproxy        Mark the path as not proxied (uri is ignored)
            redirect       Use redirection to uri instead of proxy (uri must be a path)
            file           Ignore request and load file path contained in uri (must be path)
            tohttps        Redirect request to https and use the path contained in the uri (must be path)
        While more than one option is allowed, the above options conflict with each other.
        Additional options may be provided which are target specific.
    # =&gt; nil
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 403</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_connect identifier id'>connect</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rubyid_elements identifier id'>elements</span><span class='rparen token'>)</span>

  <span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>

    <span class='rubyid_elements identifier id'>elements</span><span class='dot token'>.</span><span class='rubyid_flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='rubyid_enum_for identifier id'>enum_for</span><span class='lparen token'>(</span><span class='symbol val'>:each_slice</span><span class='comma token'>,</span> <span class='integer val'>3</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_path identifier id'>path</span><span class='comma token'>,</span> <span class='rubyid_uri identifier id'>uri</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='bitor op'>|</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;gone&quot;</span><span class='rbrack token'>]</span>
        <span class='rubyid_map_dest identifier id'>map_dest</span> <span class='assign token'>=</span> <span class='string val'>&quot;GONE&quot;</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;forbidden&quot;</span><span class='rbrack token'>]</span>
        <span class='rubyid_map_dest identifier id'>map_dest</span> <span class='assign token'>=</span> <span class='string val'>&quot;FORBIDDEN&quot;</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;noproxy&quot;</span><span class='rbrack token'>]</span>
        <span class='rubyid_map_dest identifier id'>map_dest</span> <span class='assign token'>=</span> <span class='string val'>&quot;NOPROXY&quot;</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;health&quot;</span><span class='rbrack token'>]</span>
        <span class='rubyid_map_dest identifier id'>map_dest</span> <span class='assign token'>=</span> <span class='string val'>&quot;HEALTH&quot;</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;redirect&quot;</span><span class='rbrack token'>]</span>
        <span class='rubyid_map_dest identifier id'>map_dest</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;REDIRECT:#{uri}&quot;</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;file&quot;</span><span class='rbrack token'>]</span>
        <span class='rubyid_map_dest identifier id'>map_dest</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;FILE:#{uri}&quot;</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;tohttps&quot;</span><span class='rbrack token'>]</span>
        <span class='rubyid_map_dest identifier id'>map_dest</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;TOHTTPS:#{uri}&quot;</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_map_dest identifier id'>map_dest</span> <span class='assign token'>=</span> <span class='rubyid_uri identifier id'>uri</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;websocket&quot;</span><span class='rbrack token'>]</span>
        <span class='rubyid_connect_websocket identifier id'>connect_websocket</span><span class='lparen token'>(</span><span class='rubyid_path identifier id'>path</span><span class='comma token'>,</span> <span class='rubyid_uri identifier id'>uri</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_disconnect_websocket identifier id'>disconnect_websocket</span><span class='lparen token'>(</span><span class='rubyid_path identifier id'>path</span><span class='rparen token'>)</span> <span class='comment val'># We could be changing a path</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_store identifier id'>store</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='plus op'>+</span> <span class='rubyid_path identifier id'>path</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='rubyid_map_dest identifier id'>map_dest</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="connect_websocket-instance_method">
  
    - (<tt>Object</tt>) <strong>connect_websocket</strong>(path, uri, options) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 439</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_connect_websocket identifier id'>connect_websocket</span><span class='lparen token'>(</span><span class='rubyid_path identifier id'>path</span><span class='comma token'>,</span> <span class='rubyid_uri identifier id'>uri</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_path identifier id'>path</span> <span class='neq op'>!=</span> <span class='string val'>&quot;&quot;</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerException constant id'>FrontendHttpServerException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='dstring node'>&quot;Path must be empty for a websocket: #{path}&quot;</span><span class='comma token'>,</span>
                                          <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>

  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_conn identifier id'>conn</span> <span class='assign token'>=</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;connections&quot;</span><span class='rbrack token'>]</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_conn identifier id'>conn</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_conn identifier id'>conn</span> <span class='assign token'>=</span> <span class='integer val'>5</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_bw identifier id'>bw</span> <span class='assign token'>=</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;bandwidth&quot;</span><span class='rbrack token'>]</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_bw identifier id'>bw</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_bw identifier id'>bw</span> <span class='assign token'>=</span> <span class='integer val'>100</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># Use the websocket port if it is passed as an option</span>
  <span class='rubyid_port identifier id'>port</span> <span class='assign token'>=</span> <span class='rubyid_options identifier id'>options</span><span class='lbrack token'>[</span><span class='string val'>&quot;websocket_port&quot;</span><span class='rbrack token'>]</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_port identifier id'>port</span>
    <span class='rubyid_uri identifier id'>uri</span> <span class='assign token'>=</span> <span class='rubyid_uri identifier id'>uri</span><span class='dot token'>.</span><span class='rubyid_sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/:(\d)+/</span><span class='comma token'>,</span> <span class='string val'>&quot;:&quot;</span> <span class='plus op'>+</span> <span class='rubyid_port identifier id'>port</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_routes_ent identifier id'>routes_ent</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
    <span class='string val'>&quot;endpoints&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span> <span class='rubyid_uri identifier id'>uri</span> <span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='string val'>&quot;limits&quot;</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span>
      <span class='string val'>&quot;connections&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_conn identifier id'>conn</span><span class='comma token'>,</span>
      <span class='string val'>&quot;bandwidth&quot;</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_bw identifier id'>bw</span>
    <span class='rbrace token'>}</span>
  <span class='rbrace token'>}</span>

  <span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_store identifier id'>store</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='comma token'>,</span> <span class='rubyid_routes_ent identifier id'>routes_ent</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="connections-instance_method">
  
    - (<tt>Object</tt>) <strong>connections</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: List connections Returns [ [path, uri, options], [path, uri,
options], &#8230;]
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 479</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_connections identifier id'>connections</span>
  <span class='comment val'># We can't simply rely on the open returning the block's value in unit testing.</span>
  <span class='comment val'># http://rubyforge.org/tracker/?func=detail&amp;atid=7477&amp;aid=8687&amp;group_id=1917</span>
  <span class='rubyid_entries identifier id'>entries</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
  <span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='colon2 op'>::</span><span class='rubyid_READER constant id'>READER</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_entries identifier id'>entries</span> <span class='assign token'>=</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='rubyid_k identifier id'>k</span><span class='dot token'>.</span><span class='rubyid_split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span>
    <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='rubyid_entry identifier id'>entry</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span> <span class='rubyid_k identifier id'>k</span><span class='dot token'>.</span><span class='rubyid_sub identifier id'>sub</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rbrack token'>]</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;&quot;</span>
        <span class='rubyid_begin begin kw'>begin</span>
          <span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='colon2 op'>::</span><span class='rubyid_READER constant id'>READER</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
            <span class='rubyid_routes_ent identifier id'>routes_ent</span> <span class='assign token'>=</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
            <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='rubyid_routes_ent identifier id'>routes_ent</span><span class='lbrack token'>[</span><span class='string val'>&quot;limits&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
            <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='string val'>&quot;websocket&quot;</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='integer val'>1</span>
          <span class='rubyid_end end kw'>end</span>
        <span class='rubyid_rescue rescue kw'>rescue</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>

      <span class='rubyid_if if kw'>if</span> <span class='rubyid_v identifier id'>v</span> <span class='match op'>=~</span> <span class='regexp val'>/^(GONE|FORBIDDEN|NOPROXY|HEALTH)$/</span>
        <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='rubyid_$~ gvar id'>$~</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='integer val'>1</span>
      <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_v identifier id'>v</span> <span class='match op'>=~</span> <span class='regexp val'>/^(REDIRECT|FILE|TOHTTPS):(.*)$/</span>
        <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='rubyid_$~ gvar id'>$~</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='integer val'>1</span>
        <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_$~ gvar id'>$~</span><span class='lbrack token'>[</span><span class='integer val'>2</span><span class='rbrack token'>]</span>
      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_v identifier id'>v</span>
      <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_entry identifier id'>entry</span>
    <span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_entries identifier id'>entries</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create-instance_method">
  
    - (<tt>Object</tt>) <strong>create</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Initialize a new configuration for this gear
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
   create
   # =&gt; nil
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 198</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_create identifier id'>create</span>
  <span class='rubyid_GearDB constant id'>GearDB</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_GearDB constant id'>GearDB</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_store identifier id'>store</span><span class='lparen token'>(</span><span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='string val'>'fqdn'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='comma token'>,</span>  <span class='string val'>'container_name'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span> <span class='string val'>'namespace'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy-instance_method">
  
    - (<tt>Object</tt>) <strong>destroy</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Remove the frontend httpd configuration for a gear.
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
   destroy
   # =&gt; nil
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 212</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_destroy identifier id'>destroy</span>
  <span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span>     <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete_if identifier id'>delete_if</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span> <span class='rubyid_k identifier id'>k</span><span class='dot token'>.</span><span class='rubyid_split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='rbrace token'>}</span> <span class='rbrace token'>}</span>
  <span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete_if identifier id'>delete_if</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span> <span class='rubyid_v identifier id'>v</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='rbrace token'>}</span> <span class='rbrace token'>}</span>
  <span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span>     <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span>         <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span>   <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete_if identifier id'>delete_if</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span> <span class='lparen token'>(</span><span class='rubyid_k identifier id'>k</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span> <span class='rubyid_or or kw'>or</span> <span class='lparen token'>(</span><span class='rubyid_v identifier id'>v</span><span class='lbrack token'>[</span><span class='string val'>&quot;alias&quot;</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span> <span class='rbrace token'>}</span>
  <span class='rubyid_GearDB constant id'>GearDB</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_GearDB constant id'>GearDB</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span>                   <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>

  <span class='comment val'># Clean up SSL certs and legacy node configuration</span>
  <span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
    <span class='rubyid_paths identifier id'>paths</span> <span class='assign token'>=</span> <span class='rubyid_Dir constant id'>Dir</span><span class='dot token'>.</span><span class='rubyid_glob identifier id'>glob</span><span class='lparen token'>(</span><span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@basedir ivar id'>@basedir</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{container_uuid}_*&quot;</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='rubyid_FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rubyid_rm_rf identifier id'>rm_rf</span><span class='lparen token'>(</span><span class='rubyid_paths identifier id'>paths</span><span class='rparen token'>)</span>
    <span class='rubyid_paths identifier id'>paths</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_p identifier id'>p</span><span class='bitor op'>|</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_p identifier id'>p</span> <span class='match op'>=~</span> <span class='regexp val'>/\.conf$/</span>
        <span class='rubyid_begin begin kw'>begin</span>
          <span class='rubyid_reload_httpd identifier id'>reload_httpd</span>
        <span class='rubyid_rescue rescue kw'>rescue</span>
        <span class='rubyid_end end kw'>end</span>
        <span class='rubyid_break break kw'>break</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disconnect-instance_method">
  
    - (<tt>Object</tt>) <strong>disconnect</strong>(*paths) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Disconnect a path element from this namespace
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    disconnect('')
    disconnect('/')
    disconnect('/phpmyadmin)
    disconnect('/a', '/b', '/c')

    # =&gt; nil
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


526
527
528
529
530
531
532
533</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 526</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_disconnect identifier id'>disconnect</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rubyid_paths identifier id'>paths</span><span class='rparen token'>)</span>
  <span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_paths identifier id'>paths</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_p identifier id'>p</span><span class='bitor op'>|</span>
      <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='plus op'>+</span> <span class='rubyid_p identifier id'>p</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_disconnect_websocket identifier id'>disconnect_websocket</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rubyid_paths identifier id'>paths</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disconnect_websocket-instance_method">
  
    - (<tt>Object</tt>) <strong>disconnect_websocket</strong>(*paths) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


535
536
537
538
539
540
541</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 535</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_disconnect_websocket identifier id'>disconnect_websocket</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rubyid_paths identifier id'>paths</span><span class='rparen token'>)</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_paths identifier id'>paths</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
      <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_sts-instance_method">
  
    - (<tt>Object</tt>) <strong>get_sts</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Determine whether the gear has sts
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    sts?

    # =&gt; true or false
</code></pre>
<p>
Returns true if the gear is idled
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


654
655
656
657
658
659
660
661</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 654</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_get_sts identifier id'>get_sts</span>
  <span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='colon2 op'>::</span><span class='rubyid_READER constant id'>READER</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
      <span class='rubyid_return return kw'>return</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_nil nil kw'>nil</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="idle-instance_method">
  
    - (<tt>Object</tt>) <strong>idle</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Mark a gear as idled
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    idle()

    # =&gt; nil()
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


552
553
554
555
556</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 552</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_idle identifier id'>idle</span>
  <span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_store identifier id'>store</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='comma token'>,</span> <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="idle?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>idle?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Determine whether the gear is idle
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    idle?

    # =&gt; true or false
</code></pre>
<p>
Returns true if the gear is idled
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


605
606
607
608
609</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 605</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_idle? fid id'>idle?</span>
  <span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='colon2 op'>::</span><span class='rubyid_READER constant id'>READER</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="no_sts-instance_method">
  
    - (<tt>Object</tt>) <strong>no_sts</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Unmark a gear for sts
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    nosts()

    # =&gt; nil()
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


640
641
642
643
644</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 640</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_no_sts identifier id'>no_sts</span>
  <span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reload_httpd-instance_method">
  
    - (<tt>Object</tt>) <strong>reload_httpd</strong>(async = false) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Reload the Apache configuration
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


912
913
914
915
916
917
918
919
920</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 912</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_reload_httpd identifier id'>reload_httpd</span><span class='lparen token'>(</span><span class='rubyid_async identifier id'>async</span><span class='assign token'>=</span><span class='rubyid_false false kw'>false</span><span class='rparen token'>)</span>
  <span class='rubyid_async_opt identifier id'>async_opt</span><span class='assign token'>=</span><span class='string val'>&quot;-b&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_async identifier id'>async</span>
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_oo_spawn identifier id'>oo_spawn</span><span class='lparen token'>(</span><span class='dstring node'>&quot;/usr/sbin/oo-httpd-singular #{async_opt} graceful&quot;</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='symbol val'>:expected_exitstatus=</span><span class='gt op'>&gt;</span><span class='integer val'>0</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_Utils constant id'>Utils</span><span class='colon2 op'>::</span><span class='rubyid_ShellExecutionException constant id'>ShellExecutionException</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
    <span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_error identifier id'>error</span><span class='lparen token'>(</span><span class='dstring node'>&quot;ERROR: failure from oo-httpd-singular(#{e.rc}): #{@uuid} stdout: #{e.stdout} stderr:#{e.stderr}&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_FrontendHttpServerExecException constant id'>FrontendHttpServerExecException</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_message identifier id'>message</span><span class='comma token'>,</span> <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='comma token'>,</span> <span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_rc identifier id'>rc</span><span class='comma token'>,</span> <span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_stdout identifier id'>stdout</span><span class='comma token'>,</span> <span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_stderr identifier id'>stderr</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_alias-instance_method">
  
    - (<tt>Object</tt>) <strong>remove_alias</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Removes an alias from this namespace
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    add_alias(&quot;foo.example.com&quot;)
    # =&gt; nil
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


714
715
716
717
718
719
720
721
722
723
724
725
726</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 714</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_remove_alias identifier id'>remove_alias</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='rubyid_dname identifier id'>dname</span> <span class='assign token'>=</span> <span class='rubyid_clean_server_name identifier id'>clean_server_name</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='rparen token'>)</span>

  <span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_dname identifier id'>dname</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_dname identifier id'>dname</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_remove_ssl_cert identifier id'>remove_ssl_cert</span><span class='lparen token'>(</span><span class='rubyid_dname identifier id'>dname</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_ssl_cert-instance_method">
  
    - (<tt>Object</tt>) <strong>remove_ssl_cert</strong>(server_alias) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Removes ssl certificate/private key associated with an alias
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 857</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_remove_ssl_cert identifier id'>remove_ssl_cert</span><span class='lparen token'>(</span><span class='rubyid_server_alias identifier id'>server_alias</span><span class='rparen token'>)</span>
  <span class='rubyid_server_alias_clean identifier id'>server_alias_clean</span> <span class='assign token'>=</span> <span class='rubyid_clean_server_name identifier id'>clean_server_name</span><span class='lparen token'>(</span><span class='rubyid_server_alias identifier id'>server_alias</span><span class='rparen token'>)</span>

  <span class='comment val'>#</span>
  <span class='comment val'># Remove the alias specific configuration</span>
  <span class='comment val'>#</span>
  <span class='rubyid_alias_token identifier id'>alias_token</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{@container_uuid}_#{@namespace}_#{server_alias_clean}&quot;</span>

  <span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@basedir ivar id'>@basedir</span><span class='comma token'>,</span> <span class='rubyid_alias_token identifier id'>alias_token</span><span class='rparen token'>)</span>
  <span class='rubyid_alias_conf_file_path identifier id'>alias_conf_file_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@basedir ivar id'>@basedir</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{alias_token}.conf&quot;</span><span class='rparen token'>)</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_file_path identifier id'>alias_conf_file_path</span><span class='rparen token'>)</span> <span class='rubyid_or or kw'>or</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span><span class='rparen token'>)</span>
    <span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>

      <span class='rubyid_FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rubyid_rm_rf identifier id'>rm_rf</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_file_path identifier id'>alias_conf_file_path</span><span class='rparen token'>)</span>
      <span class='rubyid_FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rubyid_rm_rf identifier id'>rm_rf</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span><span class='rparen token'>)</span>

      <span class='comment val'># Reload httpd to pick up the configuration changes</span>
      <span class='rubyid_reload_httpd identifier id'>reload_httpd</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ssl_certs-instance_method">
  
    - (<tt>Object</tt>) <strong>ssl_certs</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: List aliases with SSL certs and unencrypted private keys
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 729</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_ssl_certs identifier id'>ssl_certs</span>
  <span class='rubyid_aliases identifier id'>aliases</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_a identifier id'>a</span><span class='bitor op'>|</span>
    <span class='rubyid_alias_token identifier id'>alias_token</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{@container_uuid}_#{@namespace}_#{a}&quot;</span>
    <span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@basedir ivar id'>@basedir</span><span class='comma token'>,</span> <span class='rubyid_alias_token identifier id'>alias_token</span><span class='rparen token'>)</span>
    <span class='rubyid_ssl_cert_file_path identifier id'>ssl_cert_file_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span><span class='comma token'>,</span> <span class='rubyid_a identifier id'>a</span> <span class='plus op'>+</span> <span class='string val'>&quot;.crt&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_priv_key_file_path identifier id'>priv_key_file_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_alias_conf_dir_path identifier id'>alias_conf_dir_path</span><span class='comma token'>,</span> <span class='rubyid_a identifier id'>a</span> <span class='plus op'>+</span> <span class='string val'>&quot;.key&quot;</span><span class='rparen token'>)</span>

    <span class='rubyid_begin begin kw'>begin</span>
      <span class='rubyid_ssl_cert identifier id'>ssl_cert</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_read identifier id'>read</span><span class='lparen token'>(</span><span class='rubyid_ssl_cert_file_path identifier id'>ssl_cert_file_path</span><span class='rparen token'>)</span>
      <span class='rubyid_priv_key identifier id'>priv_key</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_read identifier id'>read</span><span class='lparen token'>(</span><span class='rubyid_priv_key_file_path identifier id'>priv_key_file_path</span><span class='rparen token'>)</span>
    <span class='rubyid_rescue rescue kw'>rescue</span>
      <span class='rubyid_ssl_cert identifier id'>ssl_cert</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
      <span class='rubyid_priv_key identifier id'>priv_key</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
    <span class='rubyid_end end kw'>end</span>

    <span class='lbrack token'>[</span> <span class='rubyid_ssl_cert identifier id'>ssl_cert</span><span class='comma token'>,</span> <span class='rubyid_priv_key identifier id'>priv_key</span><span class='comma token'>,</span> <span class='rubyid_a identifier id'>a</span> <span class='rbrack token'>]</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_select identifier id'>select</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_e identifier id'>e</span><span class='bitor op'>|</span> <span class='rubyid_e identifier id'>e</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='neq op'>!=</span> <span class='rubyid_nil nil kw'>nil</span> <span class='rbrace token'>}</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sts-instance_method">
  
    - (<tt>Object</tt>) <strong>sts</strong>(max_age = 15768000) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Mark a gear for STS
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    sts(duration)

    # =&gt; nil()
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


621
622
623
624
625
626
627
628
629</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 621</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_sts identifier id'>sts</span><span class='lparen token'>(</span><span class='rubyid_max_age identifier id'>max_age</span><span class='assign token'>=</span><span class='integer val'>15768000</span><span class='rparen token'>)</span>
  <span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_max_age identifier id'>max_age</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
      <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_store identifier id'>store</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='comma token'>,</span> <span class='rubyid_max_age identifier id'>max_age</span><span class='dot token'>.</span><span class='rubyid_to_i identifier id'>to_i</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_hash-instance_method">
  
    - (<tt>Object</tt>) <strong>to_hash</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: extract hash version of complete data for this gear
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246
247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 238</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_to_hash identifier id'>to_hash</span>
  <span class='lbrace token'>{</span>
    <span class='string val'>&quot;container_uuid&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span>
    <span class='string val'>&quot;container_name&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='comma token'>,</span>
    <span class='string val'>&quot;namespace&quot;</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='comma token'>,</span>
    <span class='string val'>&quot;connections&quot;</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_connections identifier id'>connections</span><span class='comma token'>,</span>
    <span class='string val'>&quot;aliases&quot;</span>        <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_aliases identifier id'>aliases</span><span class='comma token'>,</span>
    <span class='string val'>&quot;ssl_certs&quot;</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_ssl_certs identifier id'>ssl_certs</span><span class='comma token'>,</span>
    <span class='string val'>&quot;idle&quot;</span>           <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_idle? fid id'>idle?</span><span class='comma token'>,</span>
    <span class='string val'>&quot;sts&quot;</span>            <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_get_sts identifier id'>get_sts</span>
  <span class='rbrace token'>}</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_json-instance_method">
  
    - (<tt>Object</tt>) <strong>to_json</strong>(*args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Generate json
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254
255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 252</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_to_json identifier id'>to_json</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='lbrace token'>{</span>
    <span class='string val'>'json_class'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span>
    <span class='string val'>'data'</span>       <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_to_hash identifier id'>to_hash</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_to_json identifier id'>to_json</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unidle-instance_method">
  
    - (<tt>Object</tt>) <strong>unidle</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Unmark a gear as idled
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    unidle()

    # =&gt; nil()
</code></pre>
<p>
Returns nil on Success or raises on Failure
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


567
568
569
570
571</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 567</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_unidle identifier id'>unidle</span>
  <span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unprivileged_unidle-instance_method">
  
    - (<tt>Object</tt>) <strong>unprivileged_unidle</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Make an unprivileged call to unidle the gear
</p>
<p>
Examples
</p>
<pre class="code ruby18"><code class="ruby18">
    unprivileged_unidle()

    # =&gt; nil()
</code></pre>
<p>
Returns nil. This is an opportunistic call, failure conditions are ignored
but the call may take over a minute to complete.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


583
584
585
586
587
588
589
590
591
592
593
594
595</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 583</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_unprivileged_unidle identifier id'>unprivileged_unidle</span>
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_http identifier id'>http</span> <span class='assign token'>=</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_HTTP constant id'>HTTP</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'127.0.0.1'</span><span class='comma token'>,</span> <span class='integer val'>80</span><span class='rparen token'>)</span>
    <span class='rubyid_http identifier id'>http</span><span class='dot token'>.</span><span class='rubyid_open_timeout identifier id'>open_timeout</span> <span class='assign token'>=</span> <span class='integer val'>5</span>
    <span class='rubyid_http identifier id'>http</span><span class='dot token'>.</span><span class='rubyid_read_timeout identifier id'>read_timeout</span> <span class='assign token'>=</span> <span class='integer val'>60</span>
    <span class='rubyid_http identifier id'>http</span><span class='dot token'>.</span><span class='rubyid_use_ssl identifier id'>use_ssl</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>
    <span class='rubyid_http identifier id'>http</span><span class='dot token'>.</span><span class='rubyid_start identifier id'>start</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_client identifier id'>client</span><span class='bitor op'>|</span>
      <span class='rubyid_resp identifier id'>resp</span> <span class='assign token'>=</span> <span class='rubyid_client identifier id'>client</span><span class='dot token'>.</span><span class='rubyid_request_head identifier id'>request_head</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='comma token'>,</span> <span class='lbrace token'>{</span> <span class='string val'>'Host'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='rubyid_resp identifier id'>resp</span><span class='dot token'>.</span><span class='rubyid_code identifier id'>code</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_rescue rescue kw'>rescue</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update-instance_method">
  
    - (<tt>Object</tt>) <strong>update</strong>(container_name, namespace) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Public: Update identifier to the new names
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 304</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_update identifier id'>update</span><span class='lparen token'>(</span><span class='rubyid_container_name identifier id'>container_name</span><span class='comma token'>,</span> <span class='rubyid_namespace identifier id'>namespace</span><span class='rparen token'>)</span>
  <span class='rubyid_if if kw'>if</span> <span class='lparen token'>(</span><span class='rubyid_container_name identifier id'>container_name</span> <span class='eq op'>==</span> <span class='rubyid_@container_name ivar id'>@container_name</span><span class='rparen token'>)</span> <span class='rubyid_and and kw'>and</span> <span class='lparen token'>(</span><span class='rubyid_namespace identifier id'>namespace</span> <span class='eq op'>==</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_nil nil kw'>nil</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_saved_ssl_certs identifier id'>saved_ssl_certs</span> <span class='assign token'>=</span> <span class='rubyid_ssl_certs identifier id'>ssl_certs</span>

  <span class='rubyid_new_fqdn identifier id'>new_fqdn</span> <span class='assign token'>=</span> <span class='rubyid_clean_server_name identifier id'>clean_server_name</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{container_name}-#{namespace}.#{@cloud_domain}&quot;</span><span class='rparen token'>)</span>

  <span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBNodes constant id'>ApacheDBNodes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_update_block identifier id'>update_block</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_deletions identifier id'>deletions</span><span class='comma token'>,</span> <span class='rubyid_updates identifier id'>updates</span><span class='comma token'>,</span> <span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_k identifier id'>k</span><span class='dot token'>.</span><span class='rubyid_split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'/'</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span>
        <span class='rubyid_deletions identifier id'>deletions</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_k identifier id'>k</span>
        <span class='rubyid_updates identifier id'>updates</span><span class='lbrack token'>[</span><span class='rubyid_k identifier id'>k</span><span class='dot token'>.</span><span class='rubyid_sub identifier id'>sub</span><span class='lparen token'>(</span><span class='rubyid_@fqdn ivar id'>@fqdn</span><span class='comma token'>,</span> <span class='rubyid_new_fqdn identifier id'>new_fqdn</span><span class='rparen token'>)</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_v identifier id'>v</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBAliases constant id'>ApacheDBAliases</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_update_block identifier id'>update_block</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_deletions identifier id'>deletions</span><span class='comma token'>,</span> <span class='rubyid_updates identifier id'>updates</span><span class='comma token'>,</span> <span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_v identifier id'>v</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span>
        <span class='rubyid_updates identifier id'>updates</span><span class='lbrack token'>[</span><span class='rubyid_k identifier id'>k</span><span class='rbrack token'>]</span><span class='assign token'>=</span><span class='rubyid_new_fqdn identifier id'>new_fqdn</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBIdler constant id'>ApacheDBIdler</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_update_block identifier id'>update_block</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_deletions identifier id'>deletions</span><span class='comma token'>,</span> <span class='rubyid_updates identifier id'>updates</span><span class='comma token'>,</span> <span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_k identifier id'>k</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span>
        <span class='rubyid_deletions identifier id'>deletions</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_k identifier id'>k</span>
        <span class='rubyid_updates identifier id'>updates</span><span class='lbrack token'>[</span><span class='rubyid_new_fqdn identifier id'>new_fqdn</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_v identifier id'>v</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_ApacheDBSTS constant id'>ApacheDBSTS</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_update_block identifier id'>update_block</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_deletions identifier id'>deletions</span><span class='comma token'>,</span> <span class='rubyid_updates identifier id'>updates</span><span class='comma token'>,</span> <span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_k identifier id'>k</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span>
        <span class='rubyid_deletions identifier id'>deletions</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_k identifier id'>k</span>
        <span class='rubyid_updates identifier id'>updates</span><span class='lbrack token'>[</span><span class='rubyid_new_fqdn identifier id'>new_fqdn</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_v identifier id'>v</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_NodeJSDBRoutes constant id'>NodeJSDBRoutes</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_update_block identifier id'>update_block</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_deletions identifier id'>deletions</span><span class='comma token'>,</span> <span class='rubyid_updates identifier id'>updates</span><span class='comma token'>,</span> <span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_k identifier id'>k</span> <span class='eq op'>==</span> <span class='rubyid_@fqdn ivar id'>@fqdn</span>
        <span class='rubyid_deletions identifier id'>deletions</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_k identifier id'>k</span>
        <span class='rubyid_updates identifier id'>updates</span><span class='lbrack token'>[</span><span class='rubyid_new_fqdn identifier id'>new_fqdn</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_v identifier id'>v</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_GearDB constant id'>GearDB</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='rubyid_GearDB constant id'>GearDB</span><span class='colon2 op'>::</span><span class='rubyid_WRCREAT constant id'>WRCREAT</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='rubyid_d identifier id'>d</span><span class='dot token'>.</span><span class='rubyid_store identifier id'>store</span><span class='lparen token'>(</span><span class='rubyid_@container_uuid ivar id'>@container_uuid</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='string val'>'fqdn'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_new_fqdn identifier id'>new_fqdn</span><span class='comma token'>,</span>  <span class='string val'>'container_name'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_container_name identifier id'>container_name</span><span class='comma token'>,</span> <span class='string val'>'namespace'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_namespace identifier id'>namespace</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_old_namespace identifier id'>old_namespace</span> <span class='assign token'>=</span> <span class='rubyid_@namespace ivar id'>@namespace</span>

  <span class='rubyid_@container_name ivar id'>@container_name</span> <span class='assign token'>=</span> <span class='rubyid_container_name identifier id'>container_name</span>
  <span class='rubyid_@namespace ivar id'>@namespace</span> <span class='assign token'>=</span> <span class='rubyid_namespace identifier id'>namespace</span>
  <span class='rubyid_@fqdn ivar id'>@fqdn</span> <span class='assign token'>=</span> <span class='rubyid_new_fqdn identifier id'>new_fqdn</span>

  <span class='rubyid_saved_ssl_certs identifier id'>saved_ssl_certs</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_c identifier id'>c</span><span class='comma token'>,</span> <span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_a identifier id'>a</span><span class='bitor op'>|</span>
    <span class='rubyid_add_ssl_cert identifier id'>add_ssl_cert</span><span class='lparen token'>(</span><span class='rubyid_c identifier id'>c</span><span class='comma token'>,</span> <span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span> <span class='rubyid_a identifier id'>a</span><span class='rparen token'>)</span>
    <span class='rubyid_old_path identifier id'>old_path</span> <span class='assign token'>=</span> <span class='rubyid_File constant id'>File</span><span class='dot token'>.</span><span class='rubyid_join identifier id'>join</span><span class='lparen token'>(</span><span class='rubyid_@basedir ivar id'>@basedir</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{@container_uuid}_#{old_namespace}_#{a}&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rubyid_rm_rf identifier id'>rm_rf</span><span class='lparen token'>(</span><span class='rubyid_old_path identifier id'>old_path</span> <span class='plus op'>+</span> <span class='string val'>&quot;.conf&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rubyid_rm_rf identifier id'>rm_rf</span><span class='lparen token'>(</span><span class='rubyid_old_path identifier id'>old_path</span><span class='rparen token'>)</span>
    <span class='rubyid_reload_httpd identifier id'>reload_httpd</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_name-instance_method">
  
    - (<tt>Object</tt>) <strong>update_name</strong>(container_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/node/lib/openshift-origin-node/model/frontend_httpd.rb', line 376</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_update_name identifier id'>update_name</span><span class='lparen token'>(</span><span class='rubyid_container_name identifier id'>container_name</span><span class='rparen token'>)</span>
  <span class='rubyid_update identifier id'>update</span><span class='lparen token'>(</span><span class='rubyid_container_name identifier id'>container_name</span><span class='comma token'>,</span> <span class='rubyid_@namespace ivar id'>@namespace</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Tue May 14 18:13:19 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-1.8.7).
</div>

  </body>
</html>