<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: OpenShift::Runtime::Frontend::Http::Plugins::ApacheDB
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="../../../../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../../../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../../../../';
  framesUrl = "../../../../../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../../../../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../../OpenShift.html" title="OpenShift (module)">OpenShift</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../../Runtime.html" title="OpenShift::Runtime (module)">Runtime</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../Frontend.html" title="OpenShift::Runtime::Frontend (module)">Frontend</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Http.html" title="OpenShift::Runtime::Frontend::Http (module)">Http</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Plugins.html" title="OpenShift::Runtime::Frontend::Http::Plugins (module)">Plugins</a></span></span>
     &raquo; 
    <span class="title">ApacheDB</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../../../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../../../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: OpenShift::Runtime::Frontend::Http::Plugins::ApacheDB
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Hash</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Hash</li>
          
            <li class="next">OpenShift::Runtime::Frontend::Http::Plugins::ApacheDB</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Present an API to Apache&#39;s DB files for mod_rewrite.</p>

<p>The process to update database files is complicated and hand-editing is
strongly discouraged for the following reasons:</p>
<ol><li>
<p>There did not appear to be a corruption free database format in</p>
</li></ol>

<p>common between ruby and Apache that had a guaranteed consistent API.  Even
BerkeleyDB and the BDB module corrupted each other on testing.</p>
<ol><li>
<p>Every effort was made to ensure that a crash, even due to a</p>
</li></ol>

<p>system issue such as disk space or memory starvation did not result in a
corrupt database and the loss of old information.</p>
<ol><li>
<p>Every effort was made to ensure that multiple threads and</p>
</li></ol>

<p>processes could not corrupt or step on each other.</p>
<ol><li>
<p>While the httxt2dbm tool can run on an existing database, that</p>
</li></ol>

<p>will result in additions but not removals from the database.  Only some of
your changes will take unless the entire db is recreated each time.</p>
<ol><li>
<p>In order for BerkeleyDB to be safe for multiple processes to</p>
</li></ol>

<p>access/edit, the environment must be specifically set up to allow locking. 
An audit of the Apache source code shows that it does not do that.  And an
strace of Apache shows no attempt to either lock or establish a mutex on
the BerkeleyDB file.  I believe the claim that BerkeleyDB is safe to have
multiple processess reading/writing it is simply not true the way its used
by Apache.</p>

<p>This locks down to one thread for safety.  You MUST ensure that close is
called to release all locks.  Close also syncs changes to Apache if data
was modified.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="ApacheDBAliases.html" title="OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBAliases (class)">ApacheDBAliases</a></span>, <span class='object_link'><a href="ApacheDBIdler.html" title="OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBIdler (class)">ApacheDBIdler</a></span>, <span class='object_link'><a href="ApacheDBJSON.html" title="OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBJSON (class)">ApacheDBJSON</a></span>, <span class='object_link'><a href="ApacheDBNodes.html" title="OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBNodes (class)">ApacheDBNodes</a></span>, <span class='object_link'><a href="ApacheDBSTS.html" title="OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBSTS (class)">ApacheDBSTS</a></span></p>
</div>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="READER-constant" class="">READER =
          
        </dt>
        <dd><pre class="code"><span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_RDONLY</span></pre></dd>
      
        <dt id="WRITER-constant" class="">WRITER =
          
        </dt>
        <dd><pre class="code"><span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_RDWR</span></pre></dd>
      
        <dt id="WRCREAT-constant" class="">WRCREAT =
          
        </dt>
        <dd><pre class="code"><span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_RDWR</span> <span class='op'>|</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_CREAT</span></pre></dd>
      
        <dt id="NEWDB-constant" class="">NEWDB =
          
        </dt>
        <dd><pre class="code"><span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_RDWR</span> <span class='op'>|</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_CREAT</span> <span class='op'>|</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_TRUNC</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open-class_method" title="open (class method)">+ (Object) <strong>open</strong>(flags = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Preferred method of access is to feed a block to open so we can guarantee
the close.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#callout-instance_method" title="#callout (instance method)">- (Object) <strong>callout</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">- (Object) <strong>close</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#closed%3F-instance_method" title="#closed? (instance method)">- (Boolean) <strong>closed?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#decode_contents-instance_method" title="#decode_contents (instance method)">- (Object) <strong>decode_contents</strong>(f) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#encode_contents-instance_method" title="#encode_contents (instance method)">- (Object) <strong>encode_contents</strong>(f) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flush-instance_method" title="#flush (instance method)">- (Object) <strong>flush</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (ApacheDB) <strong>initialize</strong>(flags = nil) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of ApacheDB.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reload-instance_method" title="#reload (instance method)">- (Object) <strong>reload</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#writable%3F-instance_method" title="#writable? (instance method)">- (Boolean) <strong>writable?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="OpenShift::Runtime::Frontend::Http::Plugins::ApacheDB (class)">ApacheDB</a></span></tt>) <strong>initialize</strong>(flags = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A new instance of ApacheDB</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_flags'>flags</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@closed</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>MAPNAME</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Must subclass with proper map name.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@config</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Config</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@basedir</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OPENSHIFT_HTTP_CONF_DIR</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@mode</span> <span class='op'>=</span> <span class='int'>0640</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_flags'>flags</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='ivar'>@flags</span> <span class='op'>=</span> <span class='const'>READER</span>
  <span class='kw'>else</span>
    <span class='ivar'>@flags</span> <span class='op'>=</span> <span class='id identifier rubyid_flags'>flags</span>
  <span class='kw'>end</span>

  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@basedir</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>MAPNAME</span><span class='rparen'>)</span>

  <span class='ivar'>@lockfile</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>LOCKFILEBASE</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>MAPNAME</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.lock</span><span class='tstring_end'>&#39;</span></span>

  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>

  <span class='comment'># Each filename needs its own mutex and lockfile
</span>  <span class='kw'>self</span><span class='period'>.</span><span class='const'>LOCK</span><span class='period'>.</span><span class='id identifier rubyid_lock'>lock</span>

  <span class='kw'>begin</span>
    <span class='ivar'>@lfd</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@lockfile</span><span class='comma'>,</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_RDWR</span> <span class='op'>|</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_CREAT</span><span class='comma'>,</span> <span class='int'>0640</span><span class='rparen'>)</span>

    <span class='ivar'>@lfd</span><span class='period'>.</span><span class='id identifier rubyid_fcntl'>fcntl</span><span class='lparen'>(</span><span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>F_SETFD</span><span class='comma'>,</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>FD_CLOEXEC</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_writable?'>writable?</span>
      <span class='ivar'>@lfd</span><span class='period'>.</span><span class='id identifier rubyid_flock'>flock</span><span class='lparen'>(</span><span class='const'>File</span><span class='op'>::</span><span class='const'>LOCK_EX</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='ivar'>@lfd</span><span class='period'>.</span><span class='id identifier rubyid_flock'>flock</span><span class='lparen'>(</span><span class='const'>File</span><span class='op'>::</span><span class='const'>LOCK_SH</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='ivar'>@flags</span> <span class='op'>!=</span> <span class='const'>NEWDB</span>
      <span class='id identifier rubyid_reload'>reload</span>
    <span class='kw'>end</span>

  <span class='kw'>rescue</span>
    <span class='kw'>begin</span>
      <span class='kw'>if</span> <span class='kw'>not</span> <span class='ivar'>@lfd</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='ivar'>@lfd</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>ensure</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='const'>LOCK</span><span class='period'>.</span><span class='id identifier rubyid_unlock'>unlock</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="open-class_method">
  
    + (<tt>Object</tt>) <strong>open</strong>(flags = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Preferred method of access is to feed a block to open so we can guarantee
the close.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 255</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_flags'>flags</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_inst'>inst</span> <span class='op'>=</span> <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_flags'>flags</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>begin</span>
      <span class='kw'>return</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_inst'>inst</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span>
      <span class='ivar'>@flags</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='comment'># Disable flush
</span>      <span class='id identifier rubyid_raise'>raise</span>
    <span class='kw'>ensure</span>
      <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_inst'>inst</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>
        <span class='id identifier rubyid_inst'>inst</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_inst'>inst</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="callout-instance_method">
  
    - (<tt>Object</tt>) <strong>callout</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 184</span>

<span class='kw'>def</span> <span class='id identifier rubyid_callout'>callout</span>
  <span class='comment'># Use Berkeley DB so that there&#39;s no race condition between
</span>  <span class='comment'># multiple file moves.  The Berkeley DB implementation creates a
</span>  <span class='comment'># scratch working file under certain circumstances.  Use a
</span>  <span class='comment'># scratch dir to protect it.
</span>  <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_mktmpdir'>mktmpdir</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='ivar'>@filename</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.db-</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='ivar'>@filename</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_wd'>wd</span><span class='op'>|</span>
    <span class='id identifier rubyid_tmpdb'>tmpdb</span> <span class='op'>=</span> <span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_wd'>wd</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>new.db</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_httxt2dbm'>httxt2dbm</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/usr/bin</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/usr/sbin</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/bin</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/sbin</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span> <span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>httxt2dbm</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_httxt2dbm'>httxt2dbm</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_httxt2dbm'>httxt2dbm</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>httxt2dbm</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_httxt2dbm'>httxt2dbm</span><span class='embexpr_end'>}</span><span class='tstring_content'> -f DB -i </span><span class='embexpr_beg'>#{</span><span class='ivar'>@filename</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span><span class='embexpr_end'>}</span><span class='tstring_content'> -o </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tmpdb'>tmpdb</span><span class='embexpr_end'>}</span><span class='tstring_end'>}</span></span>
    <span class='kw'>begin</span>
      <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='id identifier rubyid_oo_spawn'>oo_spawn</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='symbol'>:expected_exitstatus</span><span class='op'>=&gt;</span> <span class='int'>0</span><span class='rparen'>)</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_oldstat'>oldstat</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='lparen'>(</span><span class='ivar'>@filename</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.db</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_chown'>chown</span><span class='lparen'>(</span><span class='id identifier rubyid_oldstat'>oldstat</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='id identifier rubyid_oldstat'>oldstat</span><span class='period'>.</span><span class='id identifier rubyid_gid'>gid</span><span class='comma'>,</span> <span class='id identifier rubyid_tmpdb'>tmpdb</span><span class='rparen'>)</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_chmod'>chmod</span><span class='lparen'>(</span><span class='id identifier rubyid_oldstat'>oldstat</span><span class='period'>.</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>&amp;</span> <span class='int'>0777</span><span class='comma'>,</span> <span class='id identifier rubyid_tmpdb'>tmpdb</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
      <span class='kw'>end</span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mv'>mv</span><span class='lparen'>(</span><span class='id identifier rubyid_tmpdb'>tmpdb</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.db</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:force</span><span class='op'>=&gt;</span><span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>ShellExecutionException</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='const'>NodeLogger</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ERROR: failure httxt2dbm </span><span class='embexpr_beg'>#{</span><span class='ivar'>@filename</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_rc'>rc</span><span class='embexpr_end'>}</span><span class='tstring_content'>: stdout: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_stdout'>stdout</span><span class='embexpr_end'>}</span><span class='tstring_content'> stderr:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_stderr'>stderr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="close-instance_method">
  
    - (<tt>Object</tt>) <strong>close</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238
239
240
241
242
243
244
245
246
247</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 236</span>

<span class='kw'>def</span> <span class='id identifier rubyid_close'>close</span>
  <span class='ivar'>@closed</span><span class='op'>=</span><span class='kw'>true</span>
  <span class='kw'>begin</span>
    <span class='kw'>begin</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
    <span class='kw'>ensure</span>
      <span class='ivar'>@lfd</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='ivar'>@lfd</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>
    <span class='kw'>end</span>
  <span class='kw'>ensure</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='const'>LOCK</span><span class='period'>.</span><span class='id identifier rubyid_unlock'>unlock</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>LOCK</span><span class='period'>.</span><span class='id identifier rubyid_locked?'>locked?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="closed?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>closed?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 249</span>

<span class='kw'>def</span> <span class='id identifier rubyid_closed?'>closed?</span>
  <span class='ivar'>@closed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="decode_contents-instance_method">
  
    - (<tt>Object</tt>) <strong>decode_contents</strong>(f) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 153</span>

<span class='kw'>def</span> <span class='id identifier rubyid_decode_contents'>decode_contents</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_l'>l</span><span class='op'>|</span>
    <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_dest'>dest</span> <span class='op'>=</span> <span class='id identifier rubyid_l'>l</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='kw'>not</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='kw'>not</span> <span class='id identifier rubyid_dest'>dest</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_dest'>dest</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="encode_contents-instance_method">
  
    - (<tt>Object</tt>) <strong>encode_contents</strong>(f) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_encode_contents'>encode_contents</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flush-instance_method">
  
    - (<tt>Object</tt>) <strong>flush</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 213</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flush'>flush</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_writable?'>writable?</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_RDWR</span> <span class='op'>|</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_CREAT</span> <span class='op'>|</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_TRUNC</span><span class='comma'>,</span> <span class='int'>0640</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
      <span class='id identifier rubyid_encode_contents'>encode_contents</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_fsync'>fsync</span>
    <span class='kw'>end</span>

    <span class='comment'># Ruby 1.9 Hash preserves order, compare files to see if anything changed
</span>    <span class='kw'>if</span> <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_compare_file'>compare_file</span><span class='lparen'>(</span><span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span><span class='rparen'>)</span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm'>rm</span><span class='lparen'>(</span><span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:force</span><span class='op'>=&gt;</span><span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_oldstat'>oldstat</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='lparen'>(</span><span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span><span class='rparen'>)</span>
        <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_chown'>chown</span><span class='lparen'>(</span><span class='id identifier rubyid_oldstat'>oldstat</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='id identifier rubyid_oldstat'>oldstat</span><span class='period'>.</span><span class='id identifier rubyid_gid'>gid</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_chmod'>chmod</span><span class='lparen'>(</span><span class='id identifier rubyid_oldstat'>oldstat</span><span class='period'>.</span><span class='id identifier rubyid_mode'>mode</span> <span class='op'>&amp;</span> <span class='int'>0777</span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
      <span class='kw'>end</span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mv'>mv</span><span class='lparen'>(</span><span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span><span class='comma'>,</span> <span class='symbol'>:force</span><span class='op'>=&gt;</span><span class='kw'>true</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_callout'>callout</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reload-instance_method">
  
    - (<tt>Object</tt>) <strong>reload</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 168</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reload'>reload</span>
  <span class='kw'>begin</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@filename</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='const'>SUFFIX</span><span class='comma'>,</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>O_RDONLY</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
      <span class='id identifier rubyid_decode_contents'>decode_contents</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
    <span class='kw'>if</span> <span class='kw'>not</span> <span class='lbracket'>[</span><span class='const'>WRCREAT</span><span class='comma'>,</span> <span class='const'>NEWDB</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@flags</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="writable?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>writable?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/plugins/frontend/apachedb/lib/openshift/runtime/frontend/http/plugins/apachedb.rb', line 180</span>

<span class='kw'>def</span> <span class='id identifier rubyid_writable?'>writable?</span>
  <span class='lbracket'>[</span><span class='const'>WRITER</span><span class='comma'>,</span> <span class='const'>WRCREAT</span><span class='comma'>,</span> <span class='const'>NEWDB</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@flags</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Sep 19 22:06:33 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-2.0.0).
</div>

  </body>
</html>