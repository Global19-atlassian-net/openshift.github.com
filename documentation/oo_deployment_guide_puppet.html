<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Asciidoctor 0.1.4" name="generator">
<meta content="OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;" name="author">
<title>OpenShift Origin Puppet Deployment Guide</title>
<style>@import url(http://openshift.redhat.com/app/assets/overpass.css);
@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/*
Origin theme source file

To build it:
- clone the asciidoctor-stylesheet-factory repo
- copy this theme file to the sass folder inside the repo
- copy the settings file to the sass/settings file inside the repo
- cd to the cloned repo
- bundle install
- compass compile
- compiled stylesheet is in the stylesheets/ directory
*/
/* Generated by Font Squirrel (http://www.fontsquirrel.com) on July 24, 2013 */
@font-face { font-family: 'source_code_pro'; src: url("fonts/sourcecodepro-regular-webfont.eot"); src: url("fonts/sourcecodepro-regular-webfont.eot?#iefix") format("embedded-opentype"), url("fonts/sourcecodepro-regular-webfont.woff") format("woff"), url("fonts/sourcecodepro-regular-webfont.ttf") format("truetype"), url("sourcecodepro-regular-webfont.svg#source_code_proregular") format("svg"); font-weight: normal; font-style: normal; }

/*
Settings and overrides for the Origin theme
*/
/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title, .tableblock > caption { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #006699; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #005580; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Overpass, sans-serif; font-weight: bold; font-style: normal; color: #222222; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #7f0a0c; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

/*
.clearfix,
.floatend { zoom: 1; &:before, &:after { content: " "; display: table; } &:after { clear: both; }
}
*/
code { font-size: inherit; padding: 0; white-space: nowrap; background-color: inherit; border: 0 solid #dddddd; -webkit-border-radius: 0; border-radius: 0; text-shadow: none; }

kbd.keyseq { color: #555555; }

kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: #222222; font-weight: bold; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 1.25em; }
#toc > ul, #toc > ol { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a, #toc ol.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1, #toc ol.sectlevel0 ol.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul, #toc ol { list-style-type: none; }

#toctitle { color: #6f6f6f; }

@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul, #toc.toc2 > ol { font-size: .95em; }
  #toc.toc2 ul ul, #toc.toc2 ol ol { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1, #toc.toc2 ol.sectlevel0 ol.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > .paragraph:last-child > p { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; line-height: 1.6; }
.sidebarblock > .content > .paragraph:last-child p { margin-bottom: 0; }

pre { color: black; font-family: source_code_pro, monospace, serif; overflow-x: auto; line-height: 1.4; }

.verseblock { margin-bottom: 1.25em; }

.literalblock, .listingblock { margin-bottom: 1.25em; }
.literalblock > .content > pre, .listingblock > .content > pre { background: #eeeeee; color: black; font-family: source_code_pro, monospace, serif; border-width: 0; padding: 0.8em 0.8em 0.6em 0.8em; word-wrap: break-word; line-height: 1.4; }
.literalblock > .content > pre.nowrap, .listingblock > .content > pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content > pre > code, .listingblock > .content > pre > code { font-size: 1em; white-space: inherit; color: black; font-family: source_code_pro, monospace, serif; padding: 0; background: none; font-weight: normal; border: none; }
@media only screen { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 1em; } }

.listingblock:hover .xml:before { content: "xml"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .html:before { content: "html"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .ruby:before { content: "ruby"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .asciidoc:before { content: "asciidoc"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .java:before { content: "java"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .javascript:before { content: "javascript"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .css:before { content: "css"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .scss:before { content: "scss"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: 0.8125em; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 0; border-radius: 0; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.halign-top, td.tableblock.halign-top { vertical-align: top; }

th.tableblock.halign-bottom, td.tableblock.halign-bottom { vertical-align: bottom; }

th.tableblock.halign-middle, td.tableblock.halign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist { list-style-type: none; margin-left: 0.625em; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

td.hdlist1 { vertical-align: top; padding-right: .8em; font-weight: bold; }

.qanda > ol > li > p:first-child { color: #005580; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: none; box-shadow: none; }

.imageblock { margin-bottom: 1.25em; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding: 0.75em 0.375em; margin-bottom: 1.25em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: none; cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #006699; color: #004c73; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

nav.global { background: #222; width: 100%; height: 4em; }
nav.global ul { list-style-type: none; margin: 0; }
nav.global li { display: inline-block; }
nav.global a { display: block; padding: .5em 1em; font-family: Overpass; font-size: 1.1em; color: white; }
nav.global a:hover { color: #ef2e32; }
nav.global a img { margin-top: .25em; height: 2.75em; }

#header > h1 { border: none; }

#toc { background: #eee; border-right: none; }
#toc.toc2 { box-shadow: 1px 0 1px rgba(0, 0, 0, 0.3); }

code { font-family: source_code_pro; }

.admonitionblock td.icon .icon-tip:before { color: #cc6; text-shadow: none; }

#footer { background-image: url("images/panda.png"); background-position: right bottom; background-repeat: no-repeat; }

/* Alignment Styles */
.halign-left { text-align: left }
.halign-center { text-align: center }
.halign-right { text-align: right }

.valign-top { vertical-align: top }
.valign-middle { vertical-align: middle }
.valign-bottom { vertical-align: bottom }</style>
<link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body class="article toc2">
<nav class="global">
<ul>
<li>
<a href="http://openshift.github.io">
<img alt="OpenShift Origin" src="images/logo.png">
</a>
</li>
<li>
<a href="index.html">Documentation Home</a>
</li>
</ul>
</nav>
<div id="header">
<h1>OpenShift Origin Puppet Deployment Guide</h1>
<span id="author">OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;</span>
<br>
<span id="revdate">LATEST DOC UPDATES</span>
<div class="toc2" id="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#system-prerequisites">1. System Prerequisites</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#optional-repository-for-rhel">1.1. "Optional" Repository for RHEL</a></li>
<li><a href="#installing-the-openshift-origin-puppet-module">1.2. Installing the OpenShift Origin Puppet Module</a></li>
<li><a href="#generating-a-bind-tsig-key">1.3. Generating a BIND TSIG Key</a></li>
<li><a href="#update-the-hostname">1.4. Update the Hostname</a></li>
</ul>
</li>
<li><a href="#puppet-configurations">2. Puppet Configurations</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#all-in-one">2.1. All-in-One</a></li>
<li><a href="#two-hosts-basic-broker-and-node">2.2. Two Hosts: "Basic" Broker and Node</a></li>
<li><a href="#different-plugins-kerberos-auth-and-dns">2.3. Different plugins: Kerberos auth and DNS</a></li>
<li><a href="#high-availability-deployments">2.4. High Availability Deployments</a></li>
</ul>
</li>
<li><a href="#manual-tasks">3. Manual Tasks</a></li>
<li><a href="#puppet-parameters">4. Puppet Parameters</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#roles">4.1. roles</a></li>
<li><a href="#install_method">4.2. install_method</a></li>
<li><a href="#parallel_deployment">4.3. parallel_deployment</a></li>
<li><a href="#repos_base">4.4. repos_base</a></li>
<li><a href="#architecture">4.5. architecture</a></li>
<li><a href="#override_install_repo">4.6. override_install_repo</a></li>
<li><a href="#os_repo">4.7. os_repo</a></li>
<li><a href="#os_updates">4.8. os_updates</a></li>
<li><a href="#jboss_repo_base">4.9. jboss_repo_base</a></li>
<li><a href="#jenkins_repo_base">4.10. jenkins_repo_base</a></li>
<li><a href="#optional_repo">4.11. optional_repo</a></li>
<li><a href="#domain">4.12. domain</a></li>
<li><a href="#broker_hostname">4.13. broker_hostname</a></li>
<li><a href="#node_hostname">4.14. node_hostname</a></li>
<li><a href="#nameserver_hostname">4.15. nameserver_hostname</a></li>
<li><a href="#msgserver_hostname">4.16. msgserver_hostname</a></li>
<li><a href="#datastore_hostname">4.17. datastore_hostname</a></li>
<li><a href="#nameserver_ip_addr">4.18. nameserver_ip_addr</a></li>
<li><a href="#bind_key">4.19. bind_key</a></li>
<li><a href="#bind_krb_keytab">4.20. bind_krb_keytab</a></li>
<li><a href="#bind_krb_principal">4.21. bind_krb_principal</a></li>
<li><a href="#aws_access_key_id">4.22. aws_access_key_id</a></li>
<li><a href="#aws_secret_key">4.23. aws_secret_key</a></li>
<li><a href="#aws_zone_id">4.24. aws_zone_id</a></li>
<li><a href="#conf_nameserver_upstream_dns">4.25. conf_nameserver_upstream_dns</a></li>
<li><a href="#broker_ip_addr">4.26. broker_ip_addr</a></li>
<li><a href="#broker_cluster_members">4.27. broker_cluster_members</a></li>
<li><a href="#broker_cluster_ip_addresses">4.28. broker_cluster_ip_addresses</a></li>
<li><a href="#broker_virtual_ip_address">4.29. broker_virtual_ip_address</a></li>
<li><a href="#broker_virtual_hostname">4.30. broker_virtual_hostname</a></li>
<li><a href="#load_balancer_master">4.31. load_balancer_master</a></li>
<li><a href="#load_balancer_auth_password">4.32. load_balancer_auth_password</a></li>
<li><a href="#node_ip_addr">4.33. node_ip_addr</a></li>
<li><a href="#configure_ntp">4.34. configure_ntp</a></li>
<li><a href="#ntp_servers">4.35. ntp_servers</a></li>
<li><a href="#msgserver_cluster">4.36. msgserver_cluster</a></li>
<li><a href="#msgserver_cluster_members">4.37. msgserver_cluster_members</a></li>
<li><a href="#mcollective_cluster_members">4.38. mcollective_cluster_members</a></li>
<li><a href="#msgserver_password">4.39. msgserver_password</a></li>
<li><a href="#msgserver_admin_password">4.40. msgserver_admin_password</a></li>
<li><a href="#mcollective_user">4.41. mcollective_user</a></li>
<li><a href="#mcollective_password">4.42. mcollective_password</a></li>
<li><a href="#mongodb_admin_user">4.43. mongodb_admin_user</a></li>
<li><a href="#mongodb_admin_password">4.44. mongodb_admin_password</a></li>
<li><a href="#mongodb_broker_user">4.45. mongodb_broker_user</a></li>
<li><a href="#mongodb_broker_password">4.46. mongodb_broker_password</a></li>
<li><a href="#mongodb_name">4.47. mongodb_name</a></li>
<li><a href="#mongodb_port">4.48. mongodb_port</a></li>
<li><a href="#mongodb_replicasets">4.49. mongodb_replicasets</a></li>
<li><a href="#mongodb_replica_name">4.50. mongodb_replica_name</a></li>
<li><a href="#mongodb_replica_primary">4.51. mongodb_replica_primary</a></li>
<li><a href="#mongodb_replica_primary_ip_addr">4.52. mongodb_replica_primary_ip_addr</a></li>
<li><a href="#mongodb_replicasets_members">4.53. mongodb_replicasets_members</a></li>
<li><a href="#mongodb_keyfile">4.54. mongodb_keyfile</a></li>
<li><a href="#mongodb_key">4.55. mongodb_key</a></li>
<li><a href="#openshift_user1">4.56. openshift_user1</a></li>
<li><a href="#openshift_password1">4.57. openshift_password1</a></li>
<li><a href="#conf_broker_auth_salt">4.58. conf_broker_auth_salt</a></li>
<li><a href="#conf_broker_auth_public_key">4.59. conf_broker_auth_public_key</a></li>
<li><a href="#conf_broker_auth_private_key">4.60. conf_broker_auth_private_key</a></li>
<li><a href="#conf_broker_auth_key_password">4.61. conf_broker_auth_key_password</a></li>
<li><a href="#conf_broker_multi_haproxy_per_node">4.62. conf_broker_multi_haproxy_per_node</a></li>
<li><a href="#conf_broker_session_secret">4.63. conf_broker_session_secret</a></li>
<li><a href="#conf_console_session_secret">4.64. conf_console_session_secret</a></li>
<li><a href="#conf_valid_gear_sizes">4.65. conf_valid_gear_sizes</a></li>
<li><a href="#conf_default_gear_size">4.66. conf_default_gear_size</a></li>
<li><a href="#conf_default_gear_capabilities">4.67. conf_default_gear_capabilities</a></li>
<li><a href="#broker_dns_plugin">4.68. broker_dns_plugin</a></li>
<li><a href="#broker_auth_plugin">4.69. broker_auth_plugin</a></li>
<li><a href="#broker_krb_service_name">4.70. broker_krb_service_name</a></li>
<li><a href="#broker_krb_auth_realms">4.71. broker_krb_auth_realms</a></li>
<li><a href="#broker_krb_keytab">4.72. broker_krb_keytab</a></li>
<li><a href="#broker_ldap_uri">4.73. broker_ldap_uri</a></li>
<li><a href="#broker_ldap_bind_dn">4.74. broker_ldap_bind_dn</a></li>
<li><a href="#broker_ldap_bind_password">4.75. broker_ldap_bind_password</a></li>
<li><a href="#node_shmmax">4.76. node_shmmax</a></li>
<li><a href="#node_shmall">4.77. node_shmall</a></li>
<li><a href="#node_container_plugin">4.78. node_container_plugin</a></li>
<li><a href="#node_frontend_plugins">4.79. node_frontend_plugins</a></li>
<li><a href="#node_unmanaged_users">4.80. node_unmanaged_users</a></li>
<li><a href="#conf_node_external_eth_dev">4.81. conf_node_external_eth_dev</a></li>
<li><a href="#conf_node_supplementary_posix_groups">4.82. conf_node_supplementary_posix_groups</a></li>
<li><a href="#development_mode">4.83. development_mode</a></li>
<li><a href="#install_login_shell">4.84. install_login_shell</a></li>
<li><a href="#register_host_with_nameserver">4.85. register_host_with_nameserver</a></li>
<li><a href="#dns_infrastructure_zone">4.86. dns_infrastructure_zone</a></li>
<li><a href="#dns_infrastructure_key">4.87. dns_infrastructure_key</a></li>
<li><a href="#dns_infrastructure_names">4.88. dns_infrastructure_names</a></li>
<li><a href="#manage_firewall">4.89. manage_firewall</a></li>
<li><a href="#install_cartridges">4.90. install_cartridges</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide will walk you through configuring puppet scripts to install and configure OpenShift Origin.</p>
</div>
<h3 id="configuring-puppet-for-a-complex-deployment" class="float">Configuring Puppet for a complex deployment?</h3>
<div class="paragraph">
<p>OpenShift is, by its nature, a multi-host system. While Puppet works well on a host-by-host basis, synchronizing the deployment of OpenShift across even two hosts requires some extra work that Puppet alone cannot do. If you are interested in a multi-host deployment, be aware that <code>oo-install</code> can help you. Using the <code>oo-install</code> utility, you can either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Have <code>oo-install</code> generate your per-host Puppet config files for you <em>or</em></p>
</li>
<li>
<p>Automatically perform the whole deployment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So even if you ultimately want to run Puppet by hand, consider using <code>oo-install</code> to help you generate your puppet config files. You can learn more about it at <a href="https://install.openshift.com">install.openshift.com</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="system-prerequisites"><a class="anchor" href="#system-prerequisites"></a>1. System Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you can succesfully run a puppet deployment, you will need to install the <code>puppet</code> RPM, and possibly also the <code>bind</code> RPM, on your target system. The PuppetLabs site has more information on <a href="http://docs.puppetlabs.com/guides/puppetlabs_package_repositories.html#for-red-hat-enterprise-linux-and-derivatives">installing puppet from the PuppetLabs repo</a>, and <code>bind</code> can be installed using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ yum install bind -y</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
The bind installation is only necessary if you want the OpenShift host to act as the nameserver for OpenShift-hosted applications.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="optional-repository-for-rhel"><a class="anchor" href="#optional-repository-for-rhel"></a>1.1. "Optional" Repository for RHEL</h3>
<div class="paragraph">
<p>If you are deploying to a Red Hat Enterprise Linux host, you will also need to enable the Optional repository for some necessary RPMs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Via yum config manasger: <code>yum-config-manager --enable rhel-6-server-optional-rpms</code></p>
</li>
<li>
<p>Via RHN classic: enable the <code>rhel-x86_64-server-optional-6</code> channel</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="installing-the-openshift-origin-puppet-module"><a class="anchor" href="#installing-the-openshift-origin-puppet-module"></a>1.2. Installing the OpenShift Origin Puppet Module</h3>
<div class="paragraph">
<p>Once puppet has been installed on the target system, you can install the OpenShift Origin module by running this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ puppet module install openshift/openshift_origin</pre>
</div>
</div>
<div class="paragraph">
<p>If you would like to work from the puppet module source instead, you can clone the puppet-openshift_origin repository into the target system as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git clone https://github.com/openshift/puppet-openshift_origin.git /etc/puppet/modules/openshift_origin</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="generating-a-bind-tsig-key"><a class="anchor" href="#generating-a-bind-tsig-key"></a>1.3. Generating a BIND TSIG Key</h3>
<div class="paragraph">
<p>If you want OpenShift to manage DNS for hosted applications, you will need to generate a TSIG key for the OpenShift <code>bind</code> instance. This key will be used to update DNS records in the BIND server that will be installed,
both for managing application DNS and (by default) for creating host DNS records:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#Using example.com as the cloud domain
$ /usr/sbin/dnssec-keygen -a HMAC-MD5 -b 512 -n USER -r /dev/urandom -K /var/named example.com
$ cat /var/named/Kexample.com.*.key  | awk '{print $8}'</pre>
</div>
</div>
<div class="paragraph">
<p>The TSIG key should look like <code>CNk+wjszKi9da9nL/1gkMY7H+GuUng==</code>. We will use this in the following steps.</p>
</div>
</div>
<div class="sect2">
<h3 id="update-the-hostname"><a class="anchor" href="#update-the-hostname"></a>1.4. Update the Hostname</h3>
<div class="paragraph">
<p>You may also want to change the hostname of the target system before you deploy; here&#8217;s how.</p>
</div>
<div class="paragraph">
<p>Choose a hostname and substitute it where needed for "broker.example.com" below.
This sets the host&#8217;s name locally, not in DNS. For nodes, this is used as the server identity.
Generally it is best to use a name that matches how the host will resolve in DNS.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cat&lt;&lt;EOF&gt;/etc/sysconfig/network
NETWORKING=yes
HOSTNAME=broker.example.com
EOF

$ hostname broker.example.com</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="puppet-configurations"><a class="anchor" href="#puppet-configurations"></a>2. Puppet Configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With Puppet installed, now you can create a file for puppet&#8217;s installation parameters for this host. This file will define one class (<code>openshift_origin</code>) that tells Puppet which OpenShift components to install and configure on the host. If you are new to Puppet, you can learn more about how this works in the <a href="http://docs.puppetlabs.com/guides/parameterized_classes.html">PuppetLabs documentation</a>.</p>
</div>
<div class="paragraph">
<p>For all of these examples, the indicated configuration is written to a file called <code>configure_origin.pp</code>. The the puppet utility is run as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>puppet apply --verbose configure_origin.pp</pre>
</div>
</div>
<div class="paragraph">
<p>The deployment process may take up to an hour. After it is completed, refer to the Post-Install Steps below for information on how to finish the OpenShift Origin setup.</p>
</div>
<div class="sect2">
<h3 id="all-in-one"><a class="anchor" href="#all-in-one"></a>2.1. All-in-One</h3>
<div class="paragraph">
<p>This configuration will deploy the entire OpenShift system on a single host. This configuration includes an OpenShift-hosted DNS server that handles both the hosted application domain and a separate zone for the OpenShift host.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class { 'openshift_origin' :
  roles =&gt; ['msgserver','datastore','nameserver','broker','node'],

  # Hostname values (all identical)
  broker_hostname     =&gt; 'broker.openshift.local',
  datastore_hostname  =&gt; 'broker.openshift.local',
  msgserver_hostname  =&gt; 'broker.openshift.local',
  nameserver_hostname =&gt; 'broker.openshift.local',
  node_hostname       =&gt; 'broker.openshift.local',

  # IP address values (all identical)
  broker_ip_addr     =&gt; '10.10.10.24',
  nameserver_ip_addr =&gt; '10.10.10.24',
  node_ip_addr       =&gt; '10.10.10.24',
  conf_node_external_eth_dev =&gt; 'eth0',

  # RPM sources
  install_method    =&gt; 'yum',
  repos_base        =&gt; 'https://mirror.openshift.com/pub/origin-server/release/4/rhel-6',
  jenkins_repo_base =&gt; 'http://pkg.jenkins-ci.org/redhat',
  optional_repo     =&gt; 'http://download.fedoraproject.org/pub/epel/6/$basearch',

  # OpenShift Config
  domain                         =&gt; 'example.com',
  openshift_user1                =&gt; 'demo',
  openshift_password1            =&gt; 'sMwNUIUqRkV9he1zRfFiAA',
  conf_valid_gear_sizes          =&gt; 'small,medium,large',
  conf_default_gear_capabilities =&gt; 'small,medium',
  conf_default_gear_size         =&gt; 'small',

  # Datastore config
  mongodb_port            =&gt; 27017,
  mongodb_replicasets     =&gt; false,
  mongodb_broker_user     =&gt; 'openshift',
  mongodb_broker_password =&gt; '9Km0vPS9U9v0h5IowgCyw',
  mongodb_admin_user      =&gt; 'admin',
  mongodb_admin_password  =&gt; 'NnZqfvTetXoSqfEWaYNzw',

  # MsgServer config
  msgserver_cluster    =&gt; false,
  mcollective_user     =&gt; 'mcollective',
  mcollective_password =&gt; 'pv5bDYXFDkYSLRdI5ywQ',

  # DNS config
  dns_infrastructure_zone  =&gt; 'openshift.local',
  dns_infrastructure_names =&gt; [{ hostname =&gt; 'broker.openshift.local', ipaddr =&gt; '10.10.10.24' }],
  dns_infrastructure_key   =&gt; 'UjCNCJgnqJPx6dFaQcWVwDjpEAGQY4Sc2H/llwJ6Rt+0iN8CP0Bm5j5pZsvvhZq7mxx7/MdTBBMWJIA9/yLQYg==',
  bind_key                 =&gt; 'SgUfFVngIN3M2MfmYpfybJGr0VJ8ldBxY3/xtEQLwBSnJZjCmAeudf0cfmPVPSPYgV8657mDFDOg9KPIyyztzw==',
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="two-hosts-basic-broker-and-node"><a class="anchor" href="#two-hosts-basic-broker-and-node"></a>2.2. Two Hosts: "Basic" Broker and Node</h3>
<div class="paragraph">
<p>This configuration puts most of the OpenShift components on one host, but configures a second host as a dedicated node. This is a good template for a basic production-capable OpenShift deployment as you can add Node hosts as needed to increase capacity.</p>
</div>
<div class="sect3">
<h4 id="broker-host-configuration"><a class="anchor" href="#broker-host-configuration"></a>2.2.1. Broker Host Configuration</h4>
<div class="listingblock">
<div class="content">
<pre>class { 'openshift_origin' :
  roles =&gt; ['msgserver','datastore','nameserver','broker'],

  # Hostname values
  broker_hostname     =&gt; 'broker.openshift.local',
  datastore_hostname  =&gt; 'broker.openshift.local',
  nameserver_hostname =&gt; 'broker.openshift.local',
  msgserver_hostname  =&gt; 'broker.openshift.local',
  node_hostname       =&gt; 'node.openshift.local',

  # IP address values
  broker_ip_addr     =&gt; '10.10.10.24',
  nameserver_ip_addr =&gt; '10.10.10.24',
  node_ip_addr       =&gt; '10.10.10.27',
  conf_node_external_eth_dev =&gt; 'eth0',

  # RPM Sources
  install_method    =&gt; 'yum',
  repos_base        =&gt; 'https://mirror.openshift.com/pub/origin-server/release/4/rhel-6',
  jenkins_repo_base =&gt; 'http://pkg.jenkins-ci.org/redhat',
  optional_repo     =&gt; 'http://download.fedoraproject.org/pub/epel/6/$basearch',

  # OpenShift Config
  domain                         =&gt; 'example.com',
  conf_valid_gear_sizes          =&gt; 'small,medium,large',
  conf_default_gear_capabilities =&gt; 'small,medium',
  conf_default_gear_size         =&gt; 'small',
  openshift_user1                =&gt; 'demo',
  openshift_password1            =&gt; 'IZPmHrdxOgqjqB0TMNDGQ',

  # Datastore Config
  mongodb_port            =&gt; 27017,
  mongodb_replicasets     =&gt; false,
  mongodb_broker_user     =&gt; 'openshift',
  mongodb_broker_password =&gt; 'brFZGRCiOlmAqrMbj0OYgg',
  mongodb_admin_user      =&gt; 'admin',
  mongodb_admin_password  =&gt; 'BbMsrtPxsmSi5SY1zerN5A',

  # MsgServer config
  msgserver_cluster    =&gt; false,
  mcollective_user     =&gt; 'mcollective',
  mcollective_password =&gt; 'eLMRLsAcytKAJmuYOPE6Q',

  # DNS Config
  dns_infrastructure_zone =&gt; 'openshift.local',
  dns_infrastructure_names =&gt;
  [
   { hostname =&gt; 'broker.openshift.local',
     ipaddr   =&gt; '10.10.10.24'
   },
   { hostname =&gt; 'node.openshift.local',
     ipaddr   =&gt; '10.10.10.27'
   }
  ],
  bind_key               =&gt; 'yV9qIn/KuCqvnu7SNtRKU3oZQMMxF1ET/GjkXt5pf5JBcHSKY8tqRagiocCbUX56GOM/iuP//D0TteLc3f1N2g==',
  dns_infrastructure_key =&gt; 'UjCNCJgnqJPx6dFaQcWVwDjpEAGQY4Sc2H/llwJ6Rt+0iN8CP0Bm5j5pZsvvhZq7mxx7/MdTBBMWJIA9/yLQYg==',
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="node-host-configuration"><a class="anchor" href="#node-host-configuration"></a>2.2.2. Node Host Configuration</h4>
<div class="listingblock">
<div class="content">
<pre>class { 'openshift_origin' :
  roles =&gt; ['node'],

  # Hostname values
  broker_hostname     =&gt; 'broker.openshift.local',
  datastore_hostname  =&gt; 'broker.openshift.local',
  msgserver_hostname  =&gt; 'broker.openshift.local',
  nameserver_hostname =&gt; 'broker.openshift.local',
  node_hostname       =&gt; 'node.openshift.local',

  # IP Address values
  broker_ip_addr     =&gt; '10.10.10.24',
  nameserver_ip_addr =&gt; '10.10.10.24',
  node_ip_addr       =&gt; '10.10.10.27',
  conf_node_external_eth_dev =&gt; 'eth0',

  # RPM Sources
  install_method    =&gt; 'yum',
  repos_base        =&gt; 'https://mirror.openshift.com/pub/origin-server/release/4/rhel-6',
  jenkins_repo_base =&gt; 'http://pkg.jenkins-ci.org/redhat',
  optional_repo     =&gt; 'http://download.fedoraproject.org/pub/epel/6/$basearch',

  # OpenShift Config
  domain                         =&gt; 'example.com',
  openshift_user1                =&gt; 'demo',
  openshift_password1            =&gt; 'IZPmHrdxOgqjqB0TMNDGQ',
  conf_valid_gear_sizes          =&gt; 'small,medium,large',
  conf_default_gear_capabilities =&gt; 'small,medium',
  conf_default_gear_size         =&gt; 'small',

  # Datastore config
  mongodb_port =&gt; 27017,
  mongodb_replicasets =&gt; false,
  mongodb_broker_user =&gt; 'openshift',
  mongodb_broker_password =&gt; 'brFZGRCiOlmAqrMbj0OYgg',
  mongodb_admin_user =&gt; 'admin',
  mongodb_admin_password =&gt; 'BbMsrtPxsmSi5SY1zerN5A',

  # MsgServer Config
  mcollective_user     =&gt; 'mcollective',
  mcollective_password =&gt; 'eLMRLsAcytKAJmuYOPE6Q',

  # DNS Config
  bind_key =&gt; 'yV9qIn/KuCqvnu7SNtRKU3oZQMMxF1ET/GjkXt5pf5JBcHSKY8tqRagiocCbUX56GOM/iuP//D0TteLc3f1N2g==',
  dns_infrastructure_key =&gt; 'UjCNCJgnqJPx6dFaQcWVwDjpEAGQY4Sc2H/llwJ6Rt+0iN8CP0Bm5j5pZsvvhZq7mxx7/MdTBBMWJIA9/yLQYg==',
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="different-plugins-kerberos-auth-and-dns"><a class="anchor" href="#different-plugins-kerberos-auth-and-dns"></a>2.3. Different plugins: Kerberos auth and DNS</h3>
<div class="paragraph">
<p>This example uses Kerberos for user authentication,
and a Kerberos keytab for making authenticated updates to a remote nameserver.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class { 'openshift_origin' :
  # Other settings as appropriate per above examples
  ...

  # broker authenticates updates to BIND server with keytab
  broker_dns_plugin          =&gt; 'named',
  named_ip_addr              =&gt; '&lt;BIND server IP address&gt;',
  bind_krb_principal         =&gt; $hostname,
  bind_krb_keytab            =&gt; '/etc/dns.keytab'
  register_host_with_named   =&gt; true,

  # authenticate OpenShift users with kerberos
  broker_auth_plugin         =&gt; 'kerberos',
  broker_krb_keytab          =&gt; '/etc/http.keytab',
  broker_krb_auth_realms     =&gt; 'EXAMPLE.COM',
  broker_krb_service_name    =&gt; $hostname,
}</pre>
</div>
</div>
<div class="paragraph">
<p>Please note:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Broker needs to be enrolled in the KDC as a host, <code>host/node_fqdn</code> as well as a service, <code>HTTP/node_fqdn</code></p>
</li>
<li>
<p>Keytab should be generated, is located on the Broker machine, and Apache should be able to access it (<code>chown apache &lt;kerberos_keytab&gt;</code>)</p>
</li>
<li>
<p>Like the example config below:</p>
<div class="ulist">
<ul>
<li>
<p>set <code>broker_auth_plugin</code> to <code>'kerberos'</code></p>
</li>
<li>
<p>set <code>broker_krb_keytab</code> and <code>bind_krb_keytab</code> to the absolute file location of the keytab</p>
</li>
<li>
<p>set <code>broker_krb_auth_realms</code> to the kerberos realm that the Broker host is enrolled with</p>
</li>
<li>
<p>set <code>broker_krb_service_name</code> to the FQDN of the enrolled kerberos service, e.g. <code>$hostname</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>After setup, to test:</p>
<div class="ulist">
<ul>
<li>
<p>authentication: <code>kinit &lt;user&gt;</code> then <code>curl -Ik --negotiate -u : &lt;node_fqdn&gt;</code></p>
</li>
<li>
<p>GSS-TSIG (should return <code>nil</code>):</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use the Rails console on the broker to access the DNS plugin and test that it creates application records.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># cd /var/www/openshift/broker
# scl enable ruby193 bash  # (needed for Enterprise Linux only)
# bundle --local
# rails console
# d = OpenShift::DnsService.instance
# d.register_application "appname", "namespace", "node_fqdn"
  =&gt; nil</pre>
</div>
</div>
<div class="paragraph">
<p>For any errors, on the Broker, check <code>/var/log/openshift/broker/httpd/error_log</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="high-availability-deployments"><a class="anchor" href="#high-availability-deployments"></a>2.4. High Availability Deployments</h3>
<div class="paragraph">
<p>The broker, msgserver and datastore roles can be deployed in high availability (HA) configurations.</p>
</div>
<div class="sect3">
<h4 id="ha-broker"><a class="anchor" href="#ha-broker"></a>2.4.1. HA Broker</h4>
<div class="paragraph">
<p>Broker clustering is accomplished by using HAProxy and a virtual host / IP address as a front for an arbitrary number of Broker instances. This means that you will assign an additional IP address to OpenShift to serve as the virtual IP address and that all OpenShift hosts will use this virtual broker hostname and IP address to communicate with the Broker cluster.</p>
</div>
<div class="paragraph">
<p>In addition to selecting a virtual broker hostname and IP address, you must elect a Broker host to additionally serve the "load_balancer" role. This Broker will host the HAProxy service that front-ends the cluster.</p>
</div>
<div class="paragraph">
<p>Here are the variations that you will need to make to your basic configurations:</p>
</div>
<div class="listingblock">
<div class="title">Non-Broker host configurations</div>
<div class="content">
<pre>class { 'openshift_origin' :
  # Other settings as appropriate per above examples
  ...

  # Use the *virtual* broker info for these values on hosts that are not Brokers
  broker_hostname =&gt; 'virtbroker.openshift.local',
  broker_ip_addr  =&gt; '10.10.20.250',

  ...
}</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Broker host configurations</div>
<div class="content">
<pre>class { 'openshift_origin' :
  # Other settings as appropriate per above examples
  ...

  # One and only one of the brokers must include the load_balancer role
  roles =&gt; [...,'load_balancer'],

  # Use the actual target host info for these values on hosts that are Brokers
  broker_hostname =&gt; &lt;target_hostname&gt;,
  broker_ip_addr  =&gt; &lt;target_ip_addr&gt;,

  # Provide the cluster info
  broker_cluster_members      =&gt; ['broker1.openshift.local','broker2.openshift.local','broker3.openshift.local'],
  broker_cluster_ip_addresses =&gt; ['10.10.20.24','10.10.20.25','10.10.20.26'],
  broker_virtual_hostname     =&gt; 'virtbroker.openshift.local',
  broker_virtual_ip_address   =&gt; '10.10.20.250',

  # Indicate if this Broker is also the load balancer; if this host includes
  # the load_baancer role, then set this to 'true'
  load_balancer_master =&gt; true|false,

  ...
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;And if OpenShift is also handling DNS your you, use this info one the host where you are deploying the <em>nameserver</em> role:</p>
</div>
<div class="listingblock">
<div class="title">Nameserver configuration</div>
<div class="content">
<pre>class { 'openshift_origin' :
  # Other settings as appropriate per above examples
  ...

  # Use the *virtual* broker info for these values
  broker_virtual_hostname =&gt; 'virtbroker.openshift.local',
  broker_virtual_ip_addr  =&gt; '10.10.20.250',

  # Additionally if you are using this nameserver to serve the domain for
  # OpenShift host systems, include the virtual host info in the infrastructure
  # list:
  dns_infrastructure_names =&gt;
  [
   ...
   { hostname =&gt; 'virtbroker.openshift.local',
     ipaddr   =&gt; '10.10.10.250'
   },
  ],

  ...
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ha-datastore"><a class="anchor" href="#ha-datastore"></a>2.4.2. HA Datastore</h4>
<div class="paragraph">
<p>The OpenShift Origin puppet module will configure multiple <em>datastore</em> instances into a MongoDB replica set.</p>
</div>
<div class="paragraph">
<p>Hosts that will include the Broker role should have this additional information:</p>
</div>
<div class="listingblock">
<div class="title">Broker host configuration</div>
<div class="content">
<pre>class { 'openshift_origin' :
  # Other settings as appropriate per above examples
  ...

  # Include the MongoDB replica set information for Brokers
  mongodb_replicasets         =&gt; true,
  mongodb_replicasets_members =&gt; ['10.10.20.30:27071','10.10.20.31:27071','10.10.20.32:27071'],
}</pre>
</div>
</div>
<div class="paragraph">
<p>Hosts that include the datastore role should have this information:</p>
</div>
<div class="listingblock">
<div class="title">Datastore configuration</div>
<div class="content">
<pre>class { 'openshift_origin' :
  # Other settings as appropriate per above examples
  ...

  # Set the datastore_hostname value to the current datastore host's name
  datastore_hostname =&gt; &lt;this_datastore_hostname&gt;,

  # Include the MongoDB replica set information
  mongodb_replicasets         =&gt; true,
  mongodb_replicasets_members =&gt; ['10.10.20.30:27071','10.10.20.31:27071','10.10.20.32:27071'],

  # One and only of the datastore hosts will be the primary
  mongodb_replica_primary =&gt; true|false,

  # All datastore hosts will know the primary's IP address and a
  # common replica key value
  mongodb_replica_primary_ip_addr = &lt;primary_datastore_ip_addr&gt;,
  mongodb_key                     = &lt;replica_key_value&gt;,
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ha-msgserver"><a class="anchor" href="#ha-msgserver"></a>2.4.3. HA MsgServer</h4>
<div class="paragraph">
<p>For message server redundancy, OpenShift makes use of ActiveMQ&#8217;s native clustering capability.</p>
</div>
<div class="listingblock">
<div class="title">MsgServer configuration</div>
<div class="content">
<pre>class { 'openshift_origin' :
  # Other settings as appropriate per above examples
  ...

  # Set the msgserver_hostname to the current msgserver host
  msgserver_hostname =&gt; &lt;this_msgserver_hostname&gt;,

  # Set the shared password that the cluster members will use
  msgserver_password =&gt; &lt;shared_cluster_password&gt;,

  # Specify the hostnames of all of the cluster members.
  msgserver_cluster         =&gt; true,
  msgserver_cluster_members =&gt; ['msgserver1.openshift.local','msgserver2.openshift.local','msgserver3.openshift.local'],
}</pre>
</div>
</div>
<div class="paragraph">
<p>Brokers and Nodes need some of this information even they arent&#8217;s MsgServer hosts as well:</p>
</div>
<div class="listingblock">
<div class="title">Broker and Node configuration</div>
<div class="content">
<pre>class { 'openshift_origin' :
  # Other settings as appropriate per above examples
  ...

  # Specify the hostnames of the msgserver cluster members.
  msgserver_cluster         =&gt; true,
  msgserver_cluster_members =&gt; ['msgserver1.openshift.local','msgserver2.openshift.local','msgserver3.openshift.local'],
}</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="manual-tasks"><a class="anchor" href="#manual-tasks"></a>3. Manual Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This script attempts to automate as many tasks as it reasonably can.
Unfortunately, it is constrained to setting up only a single host at a
time. In an assumed multi-host setup, you will need to do the
following after the script has completed.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Set up DNS entries for hosts.</strong><br>
If you installed BIND with the script, then any other components installed with the script on the same host received DNS entries. Other hosts must all be defined manually, including at least your node hosts. oo-register-dns may prove useful for this.</p>
</li>
<li>
<p><strong>Copy public rsync key to enable moving gears.</strong><br>
The broker rsync public key needs to go on nodes, but there is no good way to script that generically. Nodes should not have password-less access to brokers to copy the .pub key, so this must be performed manually on each node host:<br></p>
<div class="listingblock">
<div class="content">
<pre># scp root@broker:/etc/openshift/rsync_id_rsa.pub /root/.ssh/
(above step will ask for the root password of the broker machine)
# cat /root/.ssh/rsync_id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys
# rm /root/.ssh/rsync_id_rsa.pub</pre>
</div>
</div>
<div class="paragraph">
<p>If you skip this, each gear move will require typing root passwords for each of the node hosts involved.</p>
</div>
</li>
<li>
<p><strong>Copy ssh host keys between the node hosts.</strong><br>
All node hosts should identify with the same host keys, so that when gears are moved between hosts, ssh and git don&#8217;t give developers spurious warnings about the host keys changing. So, copy /etc/ssh/ssh_* from one node host to all the rest (or, if using the same image for all hosts, just keep the keys from the image).</p>
</li>
<li>
<p><strong>Perform the Post-Install tasks.</strong><br>
The Comprehensive Deployment guide includes information on the <a href="oo_deployment_guide_comprehensive.html#post-install-tasks">steps needed to complete a new OpenShift Origin deployment</a>. These steps incude creating districts and registering gear types, and they are necessary for the proper operation of the system.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="puppet-parameters"><a class="anchor" href="#puppet-parameters"></a>4. Puppet Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An exhaustive list of the parameters you can specify with puppet configuration follows.</p>
</div>
<div class="sect2">
<h3 id="roles"><a class="anchor" href="#roles"></a>4.1. roles</h3>
<div class="paragraph">
<p>Choose from the following roles to be configured on this node.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>broker        - Installs the broker and console.</p>
</li>
<li>
<p>node          - Installs the node and cartridges.</p>
</li>
<li>
<p>msgserver     - Installs ActiveMQ message broker.</p>
</li>
<li>
<p>datastore     - Installs MongoDB (not sharded/replicated)</p>
</li>
<li>
<p>nameserver    - Installs a BIND dns server configured with a TSIG key for updates.</p>
</li>
<li>
<p>load_balancer - Installs HAProxy and Keepalived for Broker API high-availability.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: ["broker","node","msgserver","datastore","nameserver"]</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Multiple servers are required when using the load_balancer role.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="install_method"><a class="anchor" href="#install_method"></a>4.2. install_method</h3>
<div class="paragraph">
<p>Choose from the following ways to provide packages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>none - install sources are already set up when the script executes (default)</p>
</li>
<li>
<p>yum - set up yum repos manually</p>
<div class="ulist">
<ul>
<li>
<p>repos_base</p>
</li>
<li>
<p>os_repo</p>
</li>
<li>
<p>os_updates_repo</p>
</li>
<li>
<p>jboss_repo_base</p>
</li>
<li>
<p>jenkins_repo_base</p>
</li>
<li>
<p>optional_repo</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: yum</p>
</div>
</div>
<div class="sect2">
<h3 id="parallel_deployment"><a class="anchor" href="#parallel_deployment"></a>4.3. parallel_deployment</h3>
<div class="paragraph">
<p>This flag is used to control some module behaviors when an outside utility
(like oo-install) is managing the deployment of OpenShift across multiple
hosts simultaneously. Some configuration tasks can"t be performed during
a multi-host parallel installation and this boolean enables the user to
indicate whether or not thos tasks should be attempted.</p>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="repos_base"><a class="anchor" href="#repos_base"></a>4.4. repos_base</h3>
<div class="paragraph">
<p>Base path to repository for OpenShift Origin</p>
</div>
<div class="paragraph">
<p>Nightlies: <a href="https://mirror.openshift.com/pub/origin-server/nightly/rhel-6">https://mirror.openshift.com/pub/origin-server/nightly/rhel-6</a><br>
Release (currently v4): <a href="https://mirror.openshift.com/pub/origin-server/release/4/rhel-6">https://mirror.openshift.com/pub/origin-server/release/4/rhel-6</a></p>
</div>
<div class="paragraph">
<p>Default: Nightlies</p>
</div>
</div>
<div class="sect2">
<h3 id="architecture"><a class="anchor" href="#architecture"></a>4.5. architecture</h3>
<div class="paragraph">
<p>CPU Architecture to use for the definition OpenShift Origin yum repositories</p>
</div>
<div class="paragraph">
<p>Defaults to $::architecture</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Currently only the <code>x86_64</code> architecutre is supported.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="override_install_repo"><a class="anchor" href="#override_install_repo"></a>4.6. override_install_repo</h3>
<div class="paragraph">
<p>Repository path override. Uses dependencies from repos_base but uses
override_install_repo path for OpenShift RPMs. Used when doing local builds.</p>
</div>
<div class="paragraph">
<p>Default: none</p>
</div>
</div>
<div class="sect2">
<h3 id="os_repo"><a class="anchor" href="#os_repo"></a>4.7. os_repo</h3>
<div class="paragraph">
<p>The URL for a Fedora 19/RHEL 6 yum repository used with the "yum" install method.
Should end in x86_64/os/.</p>
</div>
<div class="paragraph">
<p>Default: no change</p>
</div>
</div>
<div class="sect2">
<h3 id="os_updates"><a class="anchor" href="#os_updates"></a>4.8. os_updates</h3>
<div class="paragraph">
<p>The URL for a Fedora 19/RHEL 6 yum updates repository used with the "yum" install method.
Should end in x86_64/.</p>
</div>
<div class="paragraph">
<p>Default: no change</p>
</div>
</div>
<div class="sect2">
<h3 id="jboss_repo_base"><a class="anchor" href="#jboss_repo_base"></a>4.9. jboss_repo_base</h3>
<div class="paragraph">
<p>The URL for a JBoss repositories used with the "yum" install method.
Does not install repository if not specified.</p>
</div>
</div>
<div class="sect2">
<h3 id="jenkins_repo_base"><a class="anchor" href="#jenkins_repo_base"></a>4.10. jenkins_repo_base</h3>
<div class="paragraph">
<p>The URL for a Jenkins repositories used with the "yum" install method.
Does not install repository if not specified.</p>
</div>
</div>
<div class="sect2">
<h3 id="optional_repo"><a class="anchor" href="#optional_repo"></a>4.11. optional_repo</h3>
<div class="paragraph">
<p>The URL for a EPEL or optional repositories used with the "yum" install method.
Does not install repository if not specified.</p>
</div>
</div>
<div class="sect2">
<h3 id="domain"><a class="anchor" href="#domain"></a>4.12. domain</h3>
<div class="paragraph">
<p>Default: example.com
The network domain under which apps and hosts will be placed.</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_hostname"><a class="anchor" href="#broker_hostname"></a>4.13. broker_hostname</h3>

</div>
<div class="sect2">
<h3 id="node_hostname"><a class="anchor" href="#node_hostname"></a>4.14. node_hostname</h3>

</div>
<div class="sect2">
<h3 id="nameserver_hostname"><a class="anchor" href="#nameserver_hostname"></a>4.15. nameserver_hostname</h3>

</div>
<div class="sect2">
<h3 id="msgserver_hostname"><a class="anchor" href="#msgserver_hostname"></a>4.16. msgserver_hostname</h3>

</div>
<div class="sect2">
<h3 id="datastore_hostname"><a class="anchor" href="#datastore_hostname"></a>4.17. datastore_hostname</h3>
<div class="paragraph">
<p>Default: the root plus the domain, e.g. broker.example.com - except
nameserver=ns1.example.com</p>
</div>
<div class="paragraph">
<p>These supply the FQDN of the hosts containing these components. Used
for configuring the host"s name at install, and also for configuring
the broker application to reach the services needed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>if installing a nameserver, the script will create
DNS entries for the hostnames of the other components being
installed on this host as well. If you are using a nameserver set
up separately, you are responsible for all necessary DNS entries.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nameserver_ip_addr"><a class="anchor" href="#nameserver_ip_addr"></a>4.18. nameserver_ip_addr</h3>
<div class="paragraph">
<p>IP of a nameserver instance or current IP if installing on this
node. This is used by every node to configure its primary name server.</p>
</div>
<div class="paragraph">
<p>Default: the current IP (at install)</p>
</div>
</div>
<div class="sect2">
<h3 id="bind_key"><a class="anchor" href="#bind_key"></a>4.19. bind_key</h3>
<div class="paragraph">
<p>When the nameserver is remote, use this to specify the HMAC-MD5 key
for updates. This is the "Key:" field from the .private key file
generated by dnssec-keygen. This field is required on all nodes.</p>
</div>
</div>
<div class="sect2">
<h3 id="bind_krb_keytab"><a class="anchor" href="#bind_krb_keytab"></a>4.20. bind_krb_keytab</h3>
<div class="paragraph">
<p>When the nameserver is remote, Kerberos keytab together with principal
can be used instead of the HMAC-MD5 key for updates.</p>
</div>
</div>
<div class="sect2">
<h3 id="bind_krb_principal"><a class="anchor" href="#bind_krb_principal"></a>4.21. bind_krb_principal</h3>
<div class="paragraph">
<p>When the nameserver is remote, this Kerberos principal together with
Kerberos keytab can be used instead of the HMAC-MD5 key for updates.</p>
</div>
</div>
<div class="sect2">
<h3 id="aws_access_key_id"><a class="anchor" href="#aws_access_key_id"></a>4.22. aws_access_key_id</h3>
<div class="paragraph">
<p>This and the next value are Amazon AWS security credentials.
The aws_access_key_id is a string which identifies an access credential.</p>
</div>
<div class="paragraph">
<p>For more info see <a href="http://docs.aws.amazon.com/AWSSecurityCredentials/1.0/AboutAWSCredentials.html#AccessCredentials">http://docs.aws.amazon.com/AWSSecurityCredentials/1.0/AboutAWSCredentials.html#AccessCredentials</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="aws_secret_key"><a class="anchor" href="#aws_secret_key"></a>4.23. aws_secret_key</h3>
<div class="paragraph">
<p>This is the secret portion of AWS Access Credentials indicated by the
aws_access_key_id</p>
</div>
</div>
<div class="sect2">
<h3 id="aws_zone_id"><a class="anchor" href="#aws_zone_id"></a>4.24. aws_zone_id</h3>
<div class="paragraph">
<p>This is the ID string for an AWS Hosted zone which will contain the
OpenShift application records.</p>
</div>
<div class="paragraph">
<p>For more info see <a href="http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/CreatingHostedZone.html">http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/CreatingHostedZone.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="conf_nameserver_upstream_dns"><a class="anchor" href="#conf_nameserver_upstream_dns"></a>4.25. conf_nameserver_upstream_dns</h3>
<div class="paragraph">
<p>List of upstream DNS servers to use when installing nameserver on this node.
These DNS servers are also appended to the resolv.conf for all configured hosts</p>
</div>
<div class="paragraph">
<p>Default: ["8.8.8.8"]</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_ip_addr"><a class="anchor" href="#broker_ip_addr"></a>4.26. broker_ip_addr</h3>
<div class="paragraph">
<p>This is used for the node to record its broker. Also is the default
for the nameserver IP if none is given.</p>
</div>
<div class="paragraph">
<p>Default: the current IP (at install)</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_cluster_members"><a class="anchor" href="#broker_cluster_members"></a>4.27. broker_cluster_members</h3>
<div class="paragraph">
<p>An array of broker hostnames that will be load-balanced for high-availability.</p>
</div>
<div class="paragraph">
<p>Default: undef</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_cluster_ip_addresses"><a class="anchor" href="#broker_cluster_ip_addresses"></a>4.28. broker_cluster_ip_addresses</h3>
<div class="paragraph">
<p>An array of Broker IP addresses within the load-balanced cluster.</p>
</div>
<div class="paragraph">
<p>Default: undef</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_virtual_ip_address"><a class="anchor" href="#broker_virtual_ip_address"></a>4.29. broker_virtual_ip_address</h3>
<div class="paragraph">
<p>The virtual IP address that will front-end the Broker cluster.</p>
</div>
<div class="paragraph">
<p>Default: undef</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_virtual_hostname"><a class="anchor" href="#broker_virtual_hostname"></a>4.30. broker_virtual_hostname</h3>
<div class="paragraph">
<p>The hostame that represents the Broker API cluster.  This name is associated
to broker_virtual_ip_address and added to Named for DNS resolution.</p>
</div>
<div class="paragraph">
<p>Default: "broker.${domain}"</p>
</div>
</div>
<div class="sect2">
<h3 id="load_balancer_master"><a class="anchor" href="#load_balancer_master"></a>4.31. load_balancer_master</h3>
<div class="paragraph">
<p>Sets the state of the load-balancer.  Valid options are true or false.
true sets load_balancer_master as the active listener for the Broker Cluster
Virtual IP address.</p>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="load_balancer_auth_password"><a class="anchor" href="#load_balancer_auth_password"></a>4.32. load_balancer_auth_password</h3>
<div class="paragraph">
<p>The password used to secure communication between the load-balancers
within a Broker cluster.</p>
</div>
<div class="paragraph">
<p>Default: "changeme"</p>
</div>
</div>
<div class="sect2">
<h3 id="node_ip_addr"><a class="anchor" href="#node_ip_addr"></a>4.33. node_ip_addr</h3>
<div class="paragraph">
<p>This is used for the node to give a public IP, if different from the
one on its NIC.</p>
</div>
<div class="paragraph">
<p>Default: the current IP (at install)</p>
</div>
</div>
<div class="sect2">
<h3 id="configure_ntp"><a class="anchor" href="#configure_ntp"></a>4.34. configure_ntp</h3>
<div class="paragraph">
<p>Enabling this option configures NTP.  It is important that the time
be synchronized across hosts because MCollective messages have a TTL
of 60 seconds and may be dropped if the clocks are too far out of
synch.  However, NTP is not necessary if the clock will be kept in
synch by some other means.</p>
</div>
<div class="paragraph">
<p>Default: true</p>
</div>
</div>
<div class="sect2">
<h3 id="ntp_servers"><a class="anchor" href="#ntp_servers"></a>4.35. ntp_servers</h3>
<div class="paragraph">
<p>Specifies one or more servers for NTP clock syncronization.</p>
</div>
<div class="paragraph">
<p>Default: ["time.apple.com iburst", "pool.ntp.org iburst", "clock.redhat.com iburst"]</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Use iburst after every ntp server definition to speed up the initial synchronization.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="msgserver_cluster"><a class="anchor" href="#msgserver_cluster"></a>4.36. msgserver_cluster</h3>
<div class="paragraph">
<p>Set to true to cluster ActiveMQ for high-availability and scalability
of OpenShift message queues.</p>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="msgserver_cluster_members"><a class="anchor" href="#msgserver_cluster_members"></a>4.37. msgserver_cluster_members</h3>
<div class="paragraph">
<p>An array of ActiveMQ server hostnames.  Required when parameter
msgserver_cluster is set to true.</p>
</div>
<div class="paragraph">
<p>Default: undef</p>
</div>
</div>
<div class="sect2">
<h3 id="mcollective_cluster_members"><a class="anchor" href="#mcollective_cluster_members"></a>4.38. mcollective_cluster_members</h3>
<div class="paragraph">
<p>An array of ActiveMQ server hostnames.  Required when parameter
msgserver_cluster is set to true.</p>
</div>
<div class="paragraph">
<p>Default: $msgserver_cluster_members</p>
</div>
</div>
<div class="sect2">
<h3 id="msgserver_password"><a class="anchor" href="#msgserver_password"></a>4.39. msgserver_password</h3>
<div class="paragraph">
<p>Password used by ActiveMQ"s amquser.  The amquser is used to authenticate
ActiveMQ inter-cluster communication.  Only used when msgserver_cluster
is true.</p>
</div>
<div class="paragraph">
<p>Default "changeme"</p>
</div>
</div>
<div class="sect2">
<h3 id="msgserver_admin_password"><a class="anchor" href="#msgserver_admin_password"></a>4.40. msgserver_admin_password</h3>
<div class="paragraph">
<p>This is the admin password for the ActiveMQ admin console, which is
not needed by OpenShift but might be useful in troubleshooting.</p>
</div>
<div class="paragraph">
<p>Default: scrambled</p>
</div>
</div>
<div class="sect2">
<h3 id="mcollective_user"><a class="anchor" href="#mcollective_user"></a>4.41. mcollective_user</h3>

</div>
<div class="sect2">
<h3 id="mcollective_password"><a class="anchor" href="#mcollective_password"></a>4.42. mcollective_password</h3>
<div class="paragraph">
<p>This is the user and password shared between broker and node for
communicating over the mcollective topic channels in ActiveMQ. Must
be the same on all broker and node hosts.</p>
</div>
<div class="paragraph">
<p>Default: mcollective/marionette</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_admin_user"><a class="anchor" href="#mongodb_admin_user"></a>4.43. mongodb_admin_user</h3>

</div>
<div class="sect2">
<h3 id="mongodb_admin_password"><a class="anchor" href="#mongodb_admin_password"></a>4.44. mongodb_admin_password</h3>
<div class="paragraph">
<p>These are the username and password of the administrative user that
will be created in the MongoDB datastore. These credentials are not
used by in this script or by OpenShift, but an administrative user
must be added to MongoDB in order for it to enforce authentication.</p>
</div>
<div class="paragraph">
<p>Default: admin/mongopass</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
The administrative user will not be created if CONF_NO_DATASTORE_AUTH_FOR_LOCALHOST is enabled.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_broker_user"><a class="anchor" href="#mongodb_broker_user"></a>4.45. mongodb_broker_user</h3>

</div>
<div class="sect2">
<h3 id="mongodb_broker_password"><a class="anchor" href="#mongodb_broker_password"></a>4.46. mongodb_broker_password</h3>
<div class="paragraph">
<p>These are the username and password of the normal user that will be
created for the broker to connect to the MongoDB datastore. The
broker application"s MongoDB plugin is also configured with these
values.</p>
</div>
<div class="paragraph">
<p>Default: openshift/mongopass</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_name"><a class="anchor" href="#mongodb_name"></a>4.47. mongodb_name</h3>
<div class="paragraph">
<p>This is the name of the database in MongoDB in which the broker will
store data.</p>
</div>
<div class="paragraph">
<p>Default: openshift_broker</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_port"><a class="anchor" href="#mongodb_port"></a>4.48. mongodb_port</h3>
<div class="paragraph">
<p>The TCP port used for MongoDB to listen on.</p>
</div>
<div class="paragraph">
<p>Default: "27017"</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_replicasets"><a class="anchor" href="#mongodb_replicasets"></a>4.49. mongodb_replicasets</h3>
<div class="paragraph">
<p>Enable/disable MongoDB replica sets for database high-availability.</p>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_replica_name"><a class="anchor" href="#mongodb_replica_name"></a>4.50. mongodb_replica_name</h3>
<div class="paragraph">
<p>The MongoDB replica set name when $mongodb_replicasets is true.</p>
</div>
<div class="paragraph">
<p>Default: "openshift"</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_replica_primary"><a class="anchor" href="#mongodb_replica_primary"></a>4.51. mongodb_replica_primary</h3>
<div class="paragraph">
<p>Set the host as the primary with true or secondary with false.</p>
</div>
<div class="paragraph">
<p>Default: undef</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_replica_primary_ip_addr"><a class="anchor" href="#mongodb_replica_primary_ip_addr"></a>4.52. mongodb_replica_primary_ip_addr</h3>
<div class="paragraph">
<p>The IP address of the Primary host within the MongoDB replica set.</p>
</div>
<div class="paragraph">
<p>Default: undef</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_replicasets_members"><a class="anchor" href="#mongodb_replicasets_members"></a>4.53. mongodb_replicasets_members</h3>
<div class="paragraph">
<p>An array of [host:port] of replica set hosts. Example:</p>
</div>
<div class="paragraph 10 10 10:27017">
<p>Default: undef</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_keyfile"><a class="anchor" href="#mongodb_keyfile"></a>4.54. mongodb_keyfile</h3>
<div class="paragraph">
<p>The file containing the $mongodb_key used to authenticate MongoDB
replica set members.</p>
</div>
<div class="paragraph">
<p>Default: "/etc/mongodb.keyfile"</p>
</div>
</div>
<div class="sect2">
<h3 id="mongodb_key"><a class="anchor" href="#mongodb_key"></a>4.55. mongodb_key</h3>
<div class="paragraph">
<p>The key used by members of a MongoDB replica set to authenticate
one another.</p>
</div>
<div class="paragraph">
<p>Default: "changeme"</p>
</div>
</div>
<div class="sect2">
<h3 id="openshift_user1"><a class="anchor" href="#openshift_user1"></a>4.56. openshift_user1</h3>

</div>
<div class="sect2">
<h3 id="openshift_password1"><a class="anchor" href="#openshift_password1"></a>4.57. openshift_password1</h3>
<div class="paragraph">
<p>This user and password are entered in the /etc/openshift/htpasswd
file as a demo/test user. You will likely want to remove it after
installation (or just use a different auth method).</p>
</div>
<div class="paragraph">
<p>Default: demo/changeme</p>
</div>
</div>
<div class="sect2">
<h3 id="conf_broker_auth_salt"><a class="anchor" href="#conf_broker_auth_salt"></a>4.58. conf_broker_auth_salt</h3>

</div>
<div class="sect2">
<h3 id="conf_broker_auth_public_key"><a class="anchor" href="#conf_broker_auth_public_key"></a>4.59. conf_broker_auth_public_key</h3>

</div>
<div class="sect2">
<h3 id="conf_broker_auth_private_key"><a class="anchor" href="#conf_broker_auth_private_key"></a>4.60. conf_broker_auth_private_key</h3>

</div>
<div class="sect2">
<h3 id="conf_broker_auth_key_password"><a class="anchor" href="#conf_broker_auth_key_password"></a>4.61. conf_broker_auth_key_password</h3>
<div class="paragraph">
<p>Salt, public and private keys used when generating secure authentication
tokens for Application to Broker communication. Requests like scale up/down
and jenkins builds use these authentication tokens. This value must be the
same on all broker nodes.</p>
</div>
<div class="paragraph">
<p>Default: Self signed keys are generated. Will not work with multi-broker setup.</p>
</div>
</div>
<div class="sect2">
<h3 id="conf_broker_multi_haproxy_per_node"><a class="anchor" href="#conf_broker_multi_haproxy_per_node"></a>4.62. conf_broker_multi_haproxy_per_node</h3>
<div class="paragraph">
<p>This setting is applied on a per-scalable-application basis. When set to true,
OpenShift will allow multiple instances of the HAProxy gear for a given
scalable app to be established on the same node. Otherwise, on a
per-scalable-application basis, a maximum of one HAProxy gear can be created
for every node in the deployment (this is the default behavior, which protects
scalable apps from single points of failure at the Node level).</p>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="conf_broker_session_secret"><a class="anchor" href="#conf_broker_session_secret"></a>4.63. conf_broker_session_secret</h3>

</div>
<div class="sect2">
<h3 id="conf_console_session_secret"><a class="anchor" href="#conf_console_session_secret"></a>4.64. conf_console_session_secret</h3>
<div class="paragraph">
<p>Session secrets used to encode cookies used by console and broker. This
value must be the same on all broker nodes.</p>
</div>
</div>
<div class="sect2">
<h3 id="conf_valid_gear_sizes"><a class="anchor" href="#conf_valid_gear_sizes"></a>4.65. conf_valid_gear_sizes</h3>
<div class="paragraph">
<p>List of all gear sizes this will be used in this OpenShift installation.</p>
</div>
<div class="paragraph">
<p>Default: ["small"]</p>
</div>
</div>
<div class="sect2">
<h3 id="conf_default_gear_size"><a class="anchor" href="#conf_default_gear_size"></a>4.66. conf_default_gear_size</h3>
<div class="paragraph">
<p>Default gear size if one is not specified</p>
</div>
<div class="paragraph">
<p>Default: "small"</p>
</div>
</div>
<div class="sect2">
<h3 id="conf_default_gear_capabilities"><a class="anchor" href="#conf_default_gear_capabilities"></a>4.67. conf_default_gear_capabilities</h3>
<div class="paragraph">
<p>List of all gear sizes that newly created users will be able to create</p>
</div>
<div class="paragraph">
<p>Default: ["small"]</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_dns_plugin"><a class="anchor" href="#broker_dns_plugin"></a>4.68. broker_dns_plugin</h3>
<div class="paragraph">
<p>DNS plugin used by the broker to register application DNS entries.
Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>nsupdate - nsupdate based plugin. Supports TSIG and GSS-TSIG based authentication. Uses bind_key for TSIG and bind_krb_keytab, bind_krb_principal for GSS_TSIG auth.</p>
</li>
<li>
<p>avahi    - sets up a MDNS based DNS resolution. Works only for all-in-one installations.</p>
</li>
<li>
<p>route53  - use AWS Route53 for dynamic DNS service. Requires AWS key ID and secret and a delegated zone ID</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="broker_auth_plugin"><a class="anchor" href="#broker_auth_plugin"></a>4.69. broker_auth_plugin</h3>
<div class="paragraph">
<p>Authentication setup for users of the OpenShift service.
Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>mongo         - Stores username and password in mongo.</p>
</li>
<li>
<p>kerberos      - Kerberos based authentication. Uses broker_krb_service_name, broker_krb_auth_realms, broker_krb_keytab values.</p>
</li>
<li>
<p>htpasswd      - Stores username/password in a htaccess file.</p>
</li>
<li>
<p>ldap          - LDAP based authentication. Uses broker_ldap_uri</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: htpasswd</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_krb_service_name"><a class="anchor" href="#broker_krb_service_name"></a>4.70. broker_krb_service_name</h3>
<div class="paragraph">
<p>The KrbServiceName value for mod_auth_kerb configuration</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_krb_auth_realms"><a class="anchor" href="#broker_krb_auth_realms"></a>4.71. broker_krb_auth_realms</h3>
<div class="paragraph">
<p>The KrbAuthRealms value for mod_auth_kerb configuration</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_krb_keytab"><a class="anchor" href="#broker_krb_keytab"></a>4.72. broker_krb_keytab</h3>
<div class="paragraph">
<p>The Krb5KeyTab value of mod_auth_kerb is not configurable&#8201;&#8212;&#8201;the keytab
is expected in /var/www/openshift/broker/httpd/conf.d/http.keytab</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_ldap_uri"><a class="anchor" href="#broker_ldap_uri"></a>4.73. broker_ldap_uri</h3>
<div class="paragraph">
<p>URI to the LDAP server (e.g. ldap://ldap.example.com:389/ou=People,dc=my-domain,dc=com?uid?sub?(objectClass=*)).
Set &lt;code&gt;broker_auth_plugin&lt;/code&gt; to &lt;code&gt;ldap&lt;/code&gt; to enable
this feature.</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_ldap_bind_dn"><a class="anchor" href="#broker_ldap_bind_dn"></a>4.74. broker_ldap_bind_dn</h3>
<div class="paragraph">
<p>LDAP DN (Distinguished name) of user to bind to the directory with. (e.g. cn=administrator,cn=Users,dc=domain,dc=com)
Default is anonymous bind.</p>
</div>
</div>
<div class="sect2">
<h3 id="broker_ldap_bind_password"><a class="anchor" href="#broker_ldap_bind_password"></a>4.75. broker_ldap_bind_password</h3>
<div class="paragraph">
<p>Password of bind user set in broker_ldap_bind_dn.
Default is anonymous bind with a blank password.</p>
</div>
</div>
<div class="sect2">
<h3 id="node_shmmax"><a class="anchor" href="#node_shmmax"></a>4.76. node_shmmax</h3>
<div class="paragraph">
<p>kernel.shmmax sysctl setting for /etc/sysctl.conf</p>
</div>
<div class="paragraph">
<p>This setting should work for most deployments but if this is desired to be
tuned higher, the general recommendations are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>shmmax = shmall * PAGE_SIZE
- PAGE_SIZE = getconf PAGE_SIZE
- shmall = cat /proc/sys/kernel/shmall</pre>
</div>
</div>
<div class="paragraph">
<p>shmmax is not recommended to be a value higher than 80% of total available RAM on the system (expressed in BYTES).</p>
</div>
<div class="paragraph">
<p>Default: kernel.shmmax = 68719476736</p>
</div>
</div>
<div class="sect2">
<h3 id="node_shmall"><a class="anchor" href="#node_shmall"></a>4.77. node_shmall</h3>
<div class="paragraph">
<p>kernel.shmall sysctl setting for /etc/sysctl.conf, this defaults to 2097152 BYTES</p>
</div>
<div class="paragraph">
<p>This parameter sets the total amount of shared memory pages that can be
used system wide. Hence, SHMALL should always be at least
ceil(shmmax/PAGE_SIZE).</p>
</div>
<div class="paragraph">
<p>Default: kernel.shmall = 4294967296</p>
</div>
</div>
<div class="sect2">
<h3 id="node_container_plugin"><a class="anchor" href="#node_container_plugin"></a>4.78. node_container_plugin</h3>
<div class="paragraph">
<p>Specify the container type to use on the node.
Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>selinux - This is the default OpenShift Origin container type.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="node_frontend_plugins"><a class="anchor" href="#node_frontend_plugins"></a>4.79. node_frontend_plugins</h3>
<div class="paragraph">
<p>Specify one or more plugins to use register HTTP and web-socket connections
for applications.
Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>apache-mod-rewrite  - Mod-Rewrite based plugin for HTTP and HTTPS requests. Well suited for installations with a lot of creates/deletes/scale actions.</p>
</li>
<li>
<p>apache-vhost        - VHost based plugin for HTTP and HTTPS. Suited for installations with less app create/delete activity. Easier to customize.  If apache-mod-rewrite is also selected, apache-vhost will be ignored</p>
</li>
<li>
<p>nodejs-websocket    - Web-socket proxy listening on ports 8000/8444</p>
</li>
<li>
<p>haproxy-sni-proxy   - TLS proxy using SNI routing on ports 2303 through 2308 requires /usr/sbin/haproxy15 (haproxy-1.5-dev19 or later).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: ["apache-vhost","nodejs-websocket"]</p>
</div>
</div>
<div class="sect2">
<h3 id="node_unmanaged_users"><a class="anchor" href="#node_unmanaged_users"></a>4.80. node_unmanaged_users</h3>
<div class="paragraph">
<p>List of user names who have UIDs in the range of OpenShift gears but must be
excluded from OpenShift gear setups.</p>
</div>
<div class="paragraph">
<p>Default: []</p>
</div>
</div>
<div class="sect2">
<h3 id="conf_node_external_eth_dev"><a class="anchor" href="#conf_node_external_eth_dev"></a>4.81. conf_node_external_eth_dev</h3>
<div class="paragraph">
<p>External facing network device. Used for routing and traffic control setup.</p>
</div>
<div class="paragraph">
<p>Default: eth0</p>
</div>
</div>
<div class="sect2">
<h3 id="conf_node_supplementary_posix_groups"><a class="anchor" href="#conf_node_supplementary_posix_groups"></a>4.82. conf_node_supplementary_posix_groups</h3>
<div class="paragraph">
<p>Name of supplementary UNIX group to add a gear to.</p>
</div>
</div>
<div class="sect2">
<h3 id="development_mode"><a class="anchor" href="#development_mode"></a>4.83. development_mode</h3>
<div class="paragraph">
<p>Set development mode and extra logging.</p>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="install_login_shell"><a class="anchor" href="#install_login_shell"></a>4.84. install_login_shell</h3>
<div class="paragraph">
<p>Install a Getty shell which displays DNS, IP and login information. Used for
all-in-one VM installation.</p>
</div>
</div>
<div class="sect2">
<h3 id="register_host_with_nameserver"><a class="anchor" href="#register_host_with_nameserver"></a>4.85. register_host_with_nameserver</h3>
<div class="paragraph">
<p>Setup DNS entries for this host in a locally installed bind DNS instance.</p>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="dns_infrastructure_zone"><a class="anchor" href="#dns_infrastructure_zone"></a>4.86. dns_infrastructure_zone</h3>
<div class="paragraph">
<p>The name of a zone to create which will contain OpenShift infrastructure. If this is unset then no infrastructure zone or other artifacts will be created.</p>
</div>
<div class="paragraph">
<p>Default: ""</p>
</div>
</div>
<div class="sect2">
<h3 id="dns_infrastructure_key"><a class="anchor" href="#dns_infrastructure_key"></a>4.87. dns_infrastructure_key</h3>
<div class="paragraph">
<p>An HMAC-MD5 dnssec symmetric key which will grant update access to the
infrastucture zone resource records.</p>
</div>
<div class="paragraph">
<p>This is ignored unless <em>dns_infrastructure_zone</em> is set.</p>
</div>
<div class="paragraph">
<p>Default: ""</p>
</div>
</div>
<div class="sect2">
<h3 id="dns_infrastructure_names"><a class="anchor" href="#dns_infrastructure_names"></a>4.88. dns_infrastructure_names</h3>
<div class="paragraph">
<p>An array of hashes containing hostname and IP Address pairs to populate
the infrastructure zone.</p>
</div>
<div class="paragraph">
<p>This value is ignored unless <em>dns_infrastructure_zone</em> is set.</p>
</div>
<div class="paragraph">
<p>Hostnames can be simple names or fully qualified domain name (FQDN).</p>
</div>
<div class="paragraph">
<p>Simple names will be placed in the <em>dns_infrastructure_zone</em>.
Matching FQDNs will be placed in the _dns_infrastructure_zone.
Hostnames anchored with a dot (.) will be added verbatim.</p>
</div>
<div class="paragraph">
<p>Default: []</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre>$dns_infrastructure_names = [
  {hostname =&gt; "10.0.0.1", ipaddr =&gt; "broker1"},
  {hostname =&gt; "10.0.0.2", ipaddr =&gt; "data1"},
  {hostname =&gt; "10.0.0.3", ipaddr =&gt; "message1"},
  {hostname =&gt; "10.0.0.11", ipaddr =&gt; "node1"},
  {hostname =&gt; "10.0.0.12", ipaddr =&gt; "node2"},
  {hostname =&gt; "10.0.0.13", ipaddr =&gt; "node3"},
]</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="manage_firewall"><a class="anchor" href="#manage_firewall"></a>4.89. manage_firewall</h3>
<div class="paragraph">
<p>Indicate whether or not this module will configure the firewall for you</p>
</div>
</div>
<div class="sect2">
<h3 id="install_cartridges"><a class="anchor" href="#install_cartridges"></a>4.90. install_cartridges</h3>
<div class="paragraph">
<p>List of cartridges to be installed on the node. Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>10gen-mms-agent</p>
</li>
<li>
<p>cron</p>
</li>
<li>
<p>diy</p>
</li>
<li>
<p>haproxy</p>
</li>
<li>
<p>mongodb</p>
</li>
<li>
<p>nodejs</p>
</li>
<li>
<p>perl</p>
</li>
<li>
<p>php</p>
</li>
<li>
<p>phpmyadmin</p>
</li>
<li>
<p>postgresql</p>
</li>
<li>
<p>python</p>
</li>
<li>
<p>ruby</p>
</li>
<li>
<p>jenkins</p>
</li>
<li>
<p>jenkins-client</p>
</li>
<li>
<p>mariadb (will install mysql on RHEL)</p>
</li>
<li>
<p>jbossews</p>
</li>
<li>
<p>jbossas</p>
</li>
<li>
<p>jbosseap</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: ["10gen-mms-agent","cron","diy","haproxy","mongodb","nodejs","perl","php","phpmyadmin","postgresql","python","ruby","jenkins","jenkins-client","mariadb"]</p>
</div>
</div>
</div>
</div></div>
<div id="footer">
<div id="footer-text">
<br>
Last updated 2014-11-20 00:11:58 EST
</div>
<!-- Google Analytics -->
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40375612-1']);
  _gaq.push(['_setDomainName', 'openshift.github.io']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  
  $(document).ready(function() {
    _gaq.push(function() {
      $('a:not([href^="http"])').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Internal Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
      $('a[href^="http"]').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Outbound Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
    });
  });
</script>
<!-- Google Code for Remarketing -->
<script>
  var google_conversion_id = 1007064360;
  var google_conversion_label = "7jfmCMC5ugQQqKqa4AM";
  var google_custom_params = window.google_tag_params;
  var google_remarketing_only = true;
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script>
<noscript>
<div style="display: inline;">
<img alt="" height="1" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1007064360/?value=0&amp;label=7jfmCMC5ugQQqKqa4AM&amp;guid=ON&amp;script=0" style="border-style: none;" width="1">
</div>
</noscript>
</div>
</body>
</html>