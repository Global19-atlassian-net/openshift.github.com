<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: OpenShift::BuilderHelper
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../OpenShift.html" title="OpenShift (module)">OpenShift</a></span></span>
     &raquo; 
    <span class="title">BuilderHelper</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: OpenShift::BuilderHelper
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1"><span class='object_link'><a href="Amazon.html" title="OpenShift::Amazon (module)">Amazon</a></span>, <span class='object_link'><a href="SSH.html" title="OpenShift::SSH (module)">SSH</a></span>, <span class='object_link'><a href="Tito.html" title="OpenShift::Tito (module)">Tito</a></span>, Thor::Actions</dd>
      
    
  
  
    <dt class="r2">Included in:</dt>
    <dd class="r2"><span class='object_link'><a href="Builder.html" title="OpenShift::Builder (class)">Builder</a></span></dd>
    
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb</dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="SSH_TIMEOUT-classvariable" class="">@@SSH_TIMEOUT =
          
        </dt>
        <dd><pre class="code"><span class='int'>4800</span></pre></dd>
      
        <dt id="SSH_TIMEOUT_OVERRIDES-classvariable" class="">@@SSH_TIMEOUT_OVERRIDES =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>benchmark</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='int'>172800</span> <span class='rbrace'>}</span></pre></dd>
      
    </dl>
  



  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="Amazon.html" title="OpenShift::Amazon (module)">Amazon</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Amazon.html#FEDORA_SYSTEM_CA_FILE-constant" title="OpenShift::Amazon::FEDORA_SYSTEM_CA_FILE (constant)">Amazon::FEDORA_SYSTEM_CA_FILE</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="SSH.html" title="OpenShift::SSH (module)">SSH</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SSH.html#SCP_CMD-constant" title="OpenShift::SSH::SCP_CMD (constant)">SSH::SCP_CMD</a></span>, <span class='object_link'><a href="SSH.html#SSH_CMD-constant" title="OpenShift::SSH::SSH_CMD (constant)">SSH::SSH_CMD</a></span></p>





  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_and_install-instance_method" title="#build_and_install (instance method)">- (Object) <strong>build_and_install</strong>(package_name, build_dir, spec_file, options) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_cucumber_command-instance_method" title="#build_cucumber_command (instance method)">- (Object) <strong>build_cucumber_command</strong>(title = &quot;&quot;, tags = [], env = {}, old_rerun_file = nil, test_dir = &quot;/data/openshift-test/tests&quot;, feature_file = &quot;*.feature&quot;, require_gemfile_dir = nil, other_outputs = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_rake_command-instance_method" title="#build_rake_command (instance method)">- (Object) <strong>build_rake_command</strong>(title = &quot;&quot;, cmd = &quot;&quot;, env = {}, retry_indivigually = true) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#devenv_base_branch_wildcard-instance_method" title="#devenv_base_branch_wildcard (instance method)">- (Object) <strong>devenv_base_branch_wildcard</strong>(branch) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#devenv_branch_wildcard-instance_method" title="#devenv_branch_wildcard (instance method)">- (Object) <strong>devenv_branch_wildcard</strong>(branch) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_host_by_name_or_tag-instance_method" title="#get_host_by_name_or_tag (instance method)">- (Object) <strong>get_host_by_name_or_tag</strong>(name, options = nil, user = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the hostname from a tag lookup or assume it&#39;s SSH accessible
directly Only look for a tag if the â€“tag option is specified.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_ignore_packages-instance_method" title="#get_ignore_packages (instance method)">- (Object) <strong>get_ignore_packages</strong>(include_unmodified = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_required_packages-instance_method" title="#get_required_packages (instance method)">- (Object) <strong>get_required_packages</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_sorted_package_names-instance_method" title="#get_sorted_package_names (instance method)">- (Object) <strong>get_sorted_package_names</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#init_repos-instance_method" title="#init_repos (instance method)">- (Object) <strong>init_repos</strong>(hostname, replace = true, repo = nil, remote_repo_parent_dir = &quot;/root&quot;, ssh_user = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mcollective_logs-instance_method" title="#mcollective_logs (instance method)">- (Object) <strong>mcollective_logs</strong>(hostname) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_and_exit-instance_method" title="#print_and_exit (instance method)">- (Object) <strong>print_and_exit</strong>(ret, out) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_highlighted_output-instance_method" title="#print_highlighted_output (instance method)">- (Object) <strong>print_highlighted_output</strong>(title, out) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reboot-instance_method" title="#reboot (instance method)">- (Object) <strong>reboot</strong>(instance) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#repo_clone_commands-instance_method" title="#repo_clone_commands (instance method)">- (Object) <strong>repo_clone_commands</strong>(hostname) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#repo_path-instance_method" title="#repo_path (instance method)">- (Object) <strong>repo_path</strong>(dir = &#39;&#39;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_temp_commit-instance_method" title="#reset_temp_commit (instance method)">- (Object) <strong>reset_temp_commit</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_test_dir-instance_method" title="#reset_test_dir (instance method)">- (Object) <strong>reset_test_dir</strong>(hostname, backup = false, ssh_user = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_ssh-instance_method" title="#run_ssh (instance method)">- (Object) <strong>run_ssh</strong>(hostname, title, cmd, timeout = @@SSH_TIMEOUT, ssh_user = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_tests-instance_method" title="#run_tests (instance method)">- (Object) <strong>run_tests</strong>(test_queues, hostname, ssh_user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_tests_with_retry-instance_method" title="#run_tests_with_retry (instance method)">- (Object) <strong>run_tests_with_retry</strong>(test_queues, hostname, ssh_user = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scp_remote_tests-instance_method" title="#scp_remote_tests (instance method)">- (Object) <strong>scp_remote_tests</strong>(hostname, repo_parent_dir = &quot;/root&quot;, user = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sync_available_sibling_repos-instance_method" title="#sync_available_sibling_repos (instance method)">- (Object) <strong>sync_available_sibling_repos</strong>(hostname, remote_repo_parent_dir = &quot;/root&quot;, ssh_user = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>clones origin-server/rhc over to remote; returns command to run remotely
for cloning to standard working dirs, plus the names of those working dirs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sync_repo-instance_method" title="#sync_repo (instance method)">- (Object) <strong>sync_repo</strong>(repo_name, hostname, remote_repo_parent_dir = &quot;/root&quot;, ssh_user = &quot;root&quot;, verbose = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sync_repos-instance_method" title="#sync_repos (instance method)">- (Object) <strong>sync_repos</strong>(hostname, remote_repo_parent_dir = &quot;/root&quot;, sshuser = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sync_sibling_repo-instance_method" title="#sync_sibling_repo (instance method)">- (Object) <strong>sync_sibling_repo</strong>(repo_name, repo_dir, hostname, remote_repo_parent_dir = &quot;/root&quot;, ssh_user = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#temp_commit-instance_method" title="#temp_commit (instance method)">- (Object) <strong>temp_commit</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_api_file-instance_method" title="#update_api_file (instance method)">- (Object) <strong>update_api_file</strong>(instance) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_express_server-instance_method" title="#update_express_server (instance method)">- (Object) <strong>update_express_server</strong>(instance) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_remote_tests-instance_method" title="#update_remote_tests (instance method)">- (Object) <strong>update_remote_tests</strong>(hostname, branch = nil, repo_parent_dir = &quot;/root&quot;, user = &quot;root&quot;) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_ssh_config_verifier-instance_method" title="#update_ssh_config_verifier (instance method)">- (Object) <strong>update_ssh_config_verifier</strong>(instance) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_test_bundle-instance_method" title="#update_test_bundle (instance method)">- (Object) <strong>update_test_bundle</strong>(hostname, user, *dirs) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wrap_test_command-instance_method" title="#wrap_test_command (instance method)">- (Object) <strong>wrap_test_command</strong>(command, env = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Amazon.html" title="OpenShift::Amazon (module)">Amazon</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Amazon.html#add_tag-instance_method" title="OpenShift::Amazon#add_tag (method)">#add_tag</a></span>, <span class='object_link'><a href="Amazon.html#block_until_available-instance_method" title="OpenShift::Amazon#block_until_available (method)">#block_until_available</a></span>, <span class='object_link'><a href="Amazon.html#check_update-instance_method" title="OpenShift::Amazon#check_update (method)">#check_update</a></span>, <span class='object_link'><a href="Amazon.html#connect-instance_method" title="OpenShift::Amazon#connect (method)">#connect</a></span>, <span class='object_link'><a href="Amazon.html#delete_detached_volumes-instance_method" title="OpenShift::Amazon#delete_detached_volumes (method)">#delete_detached_volumes</a></span>, <span class='object_link'><a href="Amazon.html#delete_unused_snapshots-instance_method" title="OpenShift::Amazon#delete_unused_snapshots (method)">#delete_unused_snapshots</a></span>, <span class='object_link'><a href="Amazon.html#find_instance-instance_method" title="OpenShift::Amazon#find_instance (method)">#find_instance</a></span>, <span class='object_link'><a href="Amazon.html#flag_old_devenvs-instance_method" title="OpenShift::Amazon#flag_old_devenvs (method)">#flag_old_devenvs</a></span>, <span class='object_link'><a href="Amazon.html#flag_old_qe_devenvs-instance_method" title="OpenShift::Amazon#flag_old_qe_devenvs (method)">#flag_old_qe_devenvs</a></span>, <span class='object_link'><a href="Amazon.html#get_amis-instance_method" title="OpenShift::Amazon#get_amis (method)">#get_amis</a></span>, <span class='object_link'><a href="Amazon.html#get_internal_hostname-instance_method" title="OpenShift::Amazon#get_internal_hostname (method)">#get_internal_hostname</a></span>, <span class='object_link'><a href="Amazon.html#get_latest_ami-instance_method" title="OpenShift::Amazon#get_latest_ami (method)">#get_latest_ami</a></span>, <span class='object_link'><a href="Amazon.html#get_private_ip-instance_method" title="OpenShift::Amazon#get_private_ip (method)">#get_private_ip</a></span>, <span class='object_link'><a href="Amazon.html#get_specific_ami-instance_method" title="OpenShift::Amazon#get_specific_ami (method)">#get_specific_ami</a></span>, <span class='object_link'><a href="Amazon.html#get_specific_public_ami-instance_method" title="OpenShift::Amazon#get_specific_public_ami (method)">#get_specific_public_ami</a></span>, <span class='object_link'><a href="Amazon.html#instance_status-instance_method" title="OpenShift::Amazon#instance_status (method)">#instance_status</a></span>, <span class='object_link'><a href="Amazon.html#is_valid%3F-instance_method" title="OpenShift::Amazon#is_valid? (method)">#is_valid?</a></span>, <span class='object_link'><a href="Amazon.html#launch_instance-instance_method" title="OpenShift::Amazon#launch_instance (method)">#launch_instance</a></span>, <span class='object_link'><a href="Amazon.html#register_image-instance_method" title="OpenShift::Amazon#register_image (method)">#register_image</a></span>, <span class='object_link'><a href="Amazon.html#set_instance_ip-instance_method" title="OpenShift::Amazon#set_instance_ip (method)">#set_instance_ip</a></span>, <span class='object_link'><a href="Amazon.html#setup_aws_config-instance_method" title="OpenShift::Amazon#setup_aws_config (method)">#setup_aws_config</a></span>, <span class='object_link'><a href="Amazon.html#setup_rsa_key-instance_method" title="OpenShift::Amazon#setup_rsa_key (method)">#setup_rsa_key</a></span>, <span class='object_link'><a href="Amazon.html#stop_untagged_instances-instance_method" title="OpenShift::Amazon#stop_untagged_instances (method)">#stop_untagged_instances</a></span>, <span class='object_link'><a href="Amazon.html#tag_to_terminate-instance_method" title="OpenShift::Amazon#tag_to_terminate (method)">#tag_to_terminate</a></span>, <span class='object_link'><a href="Amazon.html#terminate_flagged_instances-instance_method" title="OpenShift::Amazon#terminate_flagged_instances (method)">#terminate_flagged_instances</a></span>, <span class='object_link'><a href="Amazon.html#terminate_instance-instance_method" title="OpenShift::Amazon#terminate_instance (method)">#terminate_instance</a></span>, <span class='object_link'><a href="Amazon.html#terminate_old_verifiers-instance_method" title="OpenShift::Amazon#terminate_old_verifiers (method)">#terminate_old_verifiers</a></span>, <span class='object_link'><a href="Amazon.html#update_facts-instance_method" title="OpenShift::Amazon#update_facts (method)">#update_facts</a></span>, <span class='object_link'><a href="Amazon.html#use_private_ip-instance_method" title="OpenShift::Amazon#use_private_ip (method)">#use_private_ip</a></span>, <span class='object_link'><a href="Amazon.html#use_public_ip-instance_method" title="OpenShift::Amazon#use_public_ip (method)">#use_public_ip</a></span>, <span class='object_link'><a href="Amazon.html#verify_image-instance_method" title="OpenShift::Amazon#verify_image (method)">#verify_image</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SSH.html" title="OpenShift::SSH (module)">SSH</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SSH.html#can_ssh%3F-instance_method" title="OpenShift::SSH#can_ssh? (method)">#can_ssh?</a></span>, <span class='object_link'><a href="SSH.html#scp_from-instance_method" title="OpenShift::SSH#scp_from (method)">#scp_from</a></span>, <span class='object_link'><a href="SSH.html#scp_to-instance_method" title="OpenShift::SSH#scp_to (method)">#scp_to</a></span>, <span class='object_link'><a href="SSH.html#ssh-instance_method" title="OpenShift::SSH#ssh (method)">#ssh</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Tito.html" title="OpenShift::Tito (module)">Tito</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Tito.html#get_build_dirs-instance_method" title="OpenShift::Tito#get_build_dirs (method)">#get_build_dirs</a></span>, <span class='object_link'><a href="Tito.html#get_packages-instance_method" title="OpenShift::Tito#get_packages (method)">#get_packages</a></span>, <span class='object_link'><a href="Tito.html#get_stale_dirs-instance_method" title="OpenShift::Tito#get_stale_dirs (method)">#get_stale_dirs</a></span>, <span class='object_link'><a href="Tito.html#get_sync_dirs-instance_method" title="OpenShift::Tito#get_sync_dirs (method)">#get_sync_dirs</a></span>, <span class='object_link'><a href="Tito.html#get_version-instance_method" title="OpenShift::Tito#get_version (method)">#get_version</a></span>, <span class='object_link'><a href="Tito.html#get_yum_version-instance_method" title="OpenShift::Tito#get_yum_version (method)">#get_yum_version</a></span>, <span class='object_link'><a href="Tito.html#next_minor_version-instance_method" title="OpenShift::Tito#next_minor_version (method)">#next_minor_version</a></span>, <span class='object_link'><a href="Tito.html#next_patch_version-instance_method" title="OpenShift::Tito#next_patch_version (method)">#next_patch_version</a></span>, <span class='object_link'><a href="Tito.html#next_tito_version-instance_method" title="OpenShift::Tito#next_tito_version (method)">#next_tito_version</a></span>, <span class='object_link'><a href="Tito.html#update_gemfile_version-instance_method" title="OpenShift::Tito#update_gemfile_version (method)">#update_gemfile_version</a></span>, <span class='object_link'><a href="Tito.html#update_sync_history-instance_method" title="OpenShift::Tito#update_sync_history (method)">#update_sync_history</a></span></p>

  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="build_and_install-instance_method">
  
    - (<tt>Object</tt>) <strong>build_and_install</strong>(package_name, build_dir, spec_file, options) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 38</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_and_install'>build_and_install</span><span class='lparen'>(</span><span class='id identifier rubyid_package_name'>package_name</span><span class='comma'>,</span> <span class='id identifier rubyid_build_dir'>build_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_spec_file'>spec_file</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_remove_dir'>remove_dir</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/tito/</span><span class='tstring_end'>&#39;</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/tito/</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Building in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_build_dir'>build_dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_spec_file'>spec_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_spec_file'>spec_file</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_inside'>inside</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_build_dir'>build_dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'># Build and install the RPM&#39;s locally
</span>    <span class='kw'>unless</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tito build --rpm --test</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_verbose?'>verbose?</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_package'>package</span> <span class='op'>=</span> <span class='const'>Package</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_spec_file'>spec_file</span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_spec_file'>spec_file</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_package_name'>package_name</span> <span class='op'>=</span> <span class='id identifier rubyid_package'>package</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
      <span class='id identifier rubyid_ignore_packages'>ignore_packages</span> <span class='op'>=</span> <span class='id identifier rubyid_get_ignore_packages'>get_ignore_packages</span>
      <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='id identifier rubyid_get_packages'>get_packages</span>
      <span class='id identifier rubyid_required_packages_str'>required_packages_str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_ignore_packages'>ignore_packages</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_package_name'>package_name</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_package'>package</span><span class='period'>.</span><span class='id identifier rubyid_build_requires'>build_requires</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_r_package'>r_package</span><span class='op'>|</span>
          <span class='id identifier rubyid_required_packages_str'>required_packages_str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> \\\&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_r_package'>r_package</span><span class='period'>.</span><span class='id identifier rubyid_yum_name_with_version'>yum_name_with_version</span><span class='embexpr_end'>}</span><span class='tstring_content'>\\\&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_packages'>packages</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_r_package'>r_package</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sudo bash -c \&quot;yum install -y --skip-broken </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_required_packages_str'>required_packages_str</span><span class='embexpr_end'>}</span><span class='tstring_content'> 2&gt;&amp;1\&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_required_packages_str'>required_packages_str</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_required_packages_str'>required_packages_str</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tito build --rpm --test</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_verbose?'>verbose?</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_retry_failure_with_tag'>retry_failure_with_tag</span>
          <span class='comment'># Tag to trick tito to build
</span>          <span class='id identifier rubyid_commit_id'>commit_id</span> <span class='op'>=</span> <span class='backtick'>`</span><span class='tstring_content'>git log --pretty=format:%%H --max-count=1 %s&quot; % .</span><span class='tstring_end'>`</span></span>
          <span class='id identifier rubyid_spec_file_name'>spec_file_name</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_spec_file'>spec_file</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='id identifier rubyid_get_version'>get_version</span><span class='lparen'>(</span><span class='id identifier rubyid_spec_file_name'>spec_file_name</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_next_version'>next_version</span> <span class='op'>=</span> <span class='id identifier rubyid_next_tito_version'>next_tito_version</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_commit_id'>commit_id</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>current spec file version </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_content'> next version </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_next_version'>next_version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>unless</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tito tag --accept-auto-changelog --use-version=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_next_version'>next_version</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;; tito build --rpm --test</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_verbose?'>verbose?</span><span class='rparen'>)</span>
            <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/devenv/sync/</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span>
          <span class='kw'>end</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Package </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_package_name'>package_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> failed to build.</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/tito/x86_64/*.rpm</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/tito/noarch/</span><span class='tstring_end'>&quot;</span></span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mv'>mv</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/tito/noarch/</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rpm -Uvh --force /tmp/tito/noarch/*.rpm</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_verbose?'>verbose?</span><span class='rparen'>)</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rpm -e --justdb --nodeps </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_package_name'>package_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>; yum install -y /tmp/tito/noarch/*.rpm</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_verbose?'>verbose?</span><span class='rparen'>)</span>
        <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/devenv/sync/</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_build_dir'>build_dir</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/cartridges\/openshift-origin-cartridge-(.*)</span><span class='regexp_end'>/</span></span> <span class='op'>||</span> <span class='id identifier rubyid_build_dir'>build_dir</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/cartridges\/(.*)</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_short_cart_name'>short_cart_name</span> <span class='op'>=</span> <span class='backref'>$1</span>
      <span class='id identifier rubyid_cart_install_dir'>cart_install_dir</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/usr/libexec/openshift/cartridges/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_short_cart_name'>short_cart_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span> <span class='id identifier rubyid_cart_install_dir'>cart_install_dir</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>oo-admin-cartridge --action install --source </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cart_install_dir'>cart_install_dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_verbose?'>verbose?</span><span class='rparen'>)</span>
          <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/devenv/sync/</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_cucumber_command-instance_method">
  
    - (<tt>Object</tt>) <strong>build_cucumber_command</strong>(title = &quot;&quot;, tags = [], env = {}, old_rerun_file = nil, test_dir = &quot;/data/openshift-test/tests&quot;, feature_file = &quot;*.feature&quot;, require_gemfile_dir = nil, other_outputs = nil) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 625</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_cucumber_command'>build_cucumber_command</span><span class='lparen'>(</span><span class='id identifier rubyid_title'>title</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_old_rerun_file'>old_rerun_file</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_test_dir'>test_dir</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/data/openshift-test/tests</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='id identifier rubyid_feature_file'>feature_file</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*.feature</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_require_gemfile_dir'>require_gemfile_dir</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_other_outputs'>other_outputs</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_other_outputs'>other_outputs</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='symbol'>:junit</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tmp/rhc/cucumber_results</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_rerun_file'>rerun_file</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/rerun_</span><span class='embexpr_beg'>#{</span><span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_hex'>hex</span><span class='embexpr_end'>}</span><span class='tstring_content'>.txt</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--strict</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-f progress</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-f rerun --out </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rerun_file'>rerun_file</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_other_outputs'>other_outputs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_formatter'>formatter</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_opts'>opts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-f </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_formatter'>formatter</span><span class='embexpr_end'>}</span><span class='tstring_content'> --out </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>case</span><span class='lparen'>(</span><span class='const'>BASE_OS</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rhel</span><span class='tstring_end'>&quot;</span></span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>centos</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span>
      <span class='id identifier rubyid_tags'>tags</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@fedora-18-only</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@fedora-19-only</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@not-rhel</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@jboss</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@not-origin</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fedora-19</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_tags'>tags</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@fedora-18-only</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@rhel-only</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@not-fedora-19</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@jboss</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@not-origin</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fedora-18</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_tags'>tags</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@fedora-19-only</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@rhel-only</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@not-fedora-18</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@jboss</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~@not-origin</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>+=</span> <span class='id identifier rubyid_tags'>tags</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-t </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_opts'>opts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-r </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_test_dir'>test_dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_old_rerun_file'>old_rerun_file</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_opts'>opts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_test_dir'>test_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_feature_file'>feature_file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_opts'>opts</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_old_rerun_file'>old_rerun_file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_require_gemfile_dir'>require_gemfile_dir</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='lbrace'>{</span><span class='symbol'>:command</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_wrap_test_command'>wrap_test_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cd </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_require_gemfile_dir'>require_gemfile_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>; bundle install --path=gems; bundle exec \&quot;cucumber </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span><span class='comma'>,</span>
     <span class='symbol'>:options</span> <span class='op'>=&gt;</span>
         <span class='lbrace'>{</span><span class='symbol'>:cucumber_rerun_file</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_rerun_file'>rerun_file</span><span class='comma'>,</span>
          <span class='symbol'>:timeout</span> <span class='op'>=&gt;</span> <span class='cvar'>@@SSH_TIMEOUT</span><span class='comma'>,</span>
          <span class='symbol'>:test_dir</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_test_dir'>test_dir</span><span class='comma'>,</span>
          <span class='symbol'>:env</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_env'>env</span><span class='comma'>,</span>
          <span class='symbol'>:require_gemfile_dir</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_require_gemfile_dir'>require_gemfile_dir</span><span class='comma'>,</span>
          <span class='symbol'>:other_outputs</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_other_outputs'>other_outputs</span>
         <span class='rbrace'>}</span><span class='comma'>,</span>
     <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_title'>title</span>
    <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='lbrace'>{</span><span class='symbol'>:command</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_wrap_test_command'>wrap_test_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cucumber </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span><span class='comma'>,</span>
     <span class='symbol'>:options</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
         <span class='symbol'>:cucumber_rerun_file</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_rerun_file'>rerun_file</span><span class='comma'>,</span>
         <span class='symbol'>:timeout</span> <span class='op'>=&gt;</span> <span class='cvar'>@@SSH_TIMEOUT</span><span class='comma'>,</span>
         <span class='symbol'>:test_dir</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_test_dir'>test_dir</span><span class='comma'>,</span>
         <span class='symbol'>:env</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_env'>env</span><span class='comma'>,</span>
         <span class='symbol'>:other_outputs</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_other_outputs'>other_outputs</span>
     <span class='rbrace'>}</span><span class='comma'>,</span>
     <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_title'>title</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_rake_command-instance_method">
  
    - (<tt>Object</tt>) <strong>build_rake_command</strong>(title = &quot;&quot;, cmd = &quot;&quot;, env = {}, retry_indivigually = true) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


677
678
679</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 677</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_rake_command'>build_rake_command</span><span class='lparen'>(</span><span class='id identifier rubyid_title'>title</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_cmd'>cmd</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_retry_indivigually'>retry_indivigually</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='lbrace'>{</span><span class='symbol'>:command</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_wrap_test_command'>wrap_test_command</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:options</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:retry_indivigually</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_retry_indivigually'>retry_indivigually</span><span class='comma'>,</span> <span class='symbol'>:timeout</span> <span class='op'>=&gt;</span> <span class='cvar'>@@SSH_TIMEOUT</span><span class='comma'>,</span> <span class='symbol'>:env</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_env'>env</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_title'>title</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="devenv_base_branch_wildcard-instance_method">
  
    - (<tt>Object</tt>) <strong>devenv_base_branch_wildcard</strong>(branch) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


478
479
480
481
482
483
484
485
486</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 478</span>

<span class='kw'>def</span> <span class='id identifier rubyid_devenv_base_branch_wildcard'>devenv_base_branch_wildcard</span><span class='lparen'>(</span><span class='id identifier rubyid_branch'>branch</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_wildcard'>wildcard</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_branch'>branch</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>master</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_wildcard'>wildcard</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>DEVENV_NAME</span><span class='embexpr_end'>}</span><span class='tstring_content'>-base_*</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_wildcard'>wildcard</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>DEVENV_NAME</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_branch'>branch</span><span class='embexpr_end'>}</span><span class='tstring_content'>-base_*</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_wildcard'>wildcard</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="devenv_branch_wildcard-instance_method">
  
    - (<tt>Object</tt>) <strong>devenv_branch_wildcard</strong>(branch) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


468
469
470
471
472
473
474
475
476</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 468</span>

<span class='kw'>def</span> <span class='id identifier rubyid_devenv_branch_wildcard'>devenv_branch_wildcard</span><span class='lparen'>(</span><span class='id identifier rubyid_branch'>branch</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_wildcard'>wildcard</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_branch'>branch</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>master</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_wildcard'>wildcard</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>DEVENV_NAME</span><span class='embexpr_end'>}</span><span class='tstring_content'>_*</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_wildcard'>wildcard</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>DEVENV_NAME</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_branch'>branch</span><span class='embexpr_end'>}</span><span class='tstring_content'>_*</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_wildcard'>wildcard</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_host_by_name_or_tag-instance_method">
  
    - (<tt>Object</tt>) <strong>get_host_by_name_or_tag</strong>(name, options = nil, user = &quot;root&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the hostname from a tag lookup or assume it&#39;s SSH accessible
directly Only look for a tag if the â€“tag option is specified</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30
31
32
33
34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_host_by_name_or_tag'>get_host_by_name_or_tag</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_tag?'>tag?</span>
  
  <span class='id identifier rubyid_instance'>instance</span> <span class='op'>=</span> <span class='id identifier rubyid_find_instance'>find_instance</span><span class='lparen'>(</span><span class='id identifier rubyid_connect'>connect</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_region'>region</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_dns_name'>dns_name</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to find instance with tag: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_ignore_packages-instance_method">
  
    - (<tt>Object</tt>) <strong>get_ignore_packages</strong>(include_unmodified = false) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 255</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_ignore_packages'>get_ignore_packages</span><span class='lparen'>(</span><span class='id identifier rubyid_include_unmodified'>include_unmodified</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_packages_str'>packages_str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>IGNORE_PACKAGES</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_package_name'>package_name</span><span class='op'>|</span>
    <span class='id identifier rubyid_packages_str'>packages_str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_package_name'>package_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_include_unmodified?'>include_unmodified?</span>
    <span class='id identifier rubyid_build_dirs'>build_dirs</span> <span class='op'>=</span> <span class='id identifier rubyid_get_build_dirs'>get_build_dirs</span>

    <span class='id identifier rubyid_all_packages'>all_packages</span> <span class='op'>=</span> <span class='id identifier rubyid_get_packages'>get_packages</span>
    <span class='id identifier rubyid_build_dirs'>build_dirs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_build_info'>build_info</span><span class='op'>|</span>
      <span class='id identifier rubyid_package_name'>package_name</span> <span class='op'>=</span> <span class='id identifier rubyid_build_info'>build_info</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_all_packages'>all_packages</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_package_name'>package_name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_all_packages'>all_packages</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_package_name'>package_name</span><span class='op'>|</span>
      <span class='id identifier rubyid_packages_str'>packages_str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_package_name'>package_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_packages_str'>packages_str</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_required_packages-instance_method">
  
    - (<tt>Object</tt>) <strong>get_required_packages</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 220</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_required_packages'>get_required_packages</span>
  <span class='id identifier rubyid_required_packages_str'>required_packages_str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='id identifier rubyid_get_sorted_package_names'>get_sorted_package_names</span>
  <span class='id identifier rubyid_ignore_packages'>ignore_packages</span> <span class='op'>=</span> <span class='id identifier rubyid_get_ignore_packages'>get_ignore_packages</span>

  <span class='const'>SIBLING_REPOS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_dirs'>repo_dirs</span><span class='op'>|</span>
    <span class='id identifier rubyid_repo_dirs'>repo_dirs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='op'>|</span>
      <span class='id identifier rubyid_exists'>exists</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_inside'>inside</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_spec_file_list'>spec_file_list</span> <span class='op'>=</span> <span class='backtick'>`</span><span class='tstring_content'>find -name *.spec</span><span class='tstring_end'>`</span></span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_spec_file_list'>spec_file_list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec_file'>spec_file</span><span class='op'>|</span>
          <span class='id identifier rubyid_package'>package</span> <span class='op'>=</span> <span class='const'>Package</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_spec_file'>spec_file</span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_spec_file'>spec_file</span><span class='rparen'>)</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_package_name'>package_name</span> <span class='op'>=</span> <span class='id identifier rubyid_package'>package</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
          <span class='kw'>unless</span> <span class='id identifier rubyid_ignore_packages'>ignore_packages</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_package'>package</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_required_packages'>required_packages</span> <span class='op'>=</span> <span class='id identifier rubyid_package'>package</span><span class='period'>.</span><span class='id identifier rubyid_build_requires'>build_requires</span> <span class='op'>+</span> <span class='id identifier rubyid_package'>package</span><span class='period'>.</span><span class='id identifier rubyid_requires'>requires</span>
            <span class='id identifier rubyid_required_packages'>required_packages</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_r_package'>r_package</span><span class='op'>|</span>
              <span class='id identifier rubyid_required_packages_str'>required_packages_str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> \\\&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_r_package'>r_package</span><span class='period'>.</span><span class='id identifier rubyid_yum_name_with_version'>yum_name_with_version</span><span class='embexpr_end'>}</span><span class='tstring_content'>\\\&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_packages'>packages</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_r_package'>r_package</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span> <span class='kw'>if</span> <span class='id identifier rubyid_exists'>exists</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_required_packages_str'>required_packages_str</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_sorted_package_names-instance_method">
  
    - (<tt>Object</tt>) <strong>get_sorted_package_names</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248
249
250
251
252
253</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 246</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_sorted_package_names'>get_sorted_package_names</span>
  <span class='id identifier rubyid_packages'>packages</span> <span class='op'>=</span> <span class='id identifier rubyid_get_packages'>get_packages</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_packages_str'>packages_str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_packages'>packages</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_package_name'>package_name</span><span class='op'>|</span>
    <span class='id identifier rubyid_packages_str'>packages_str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_package_name'>package_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_packages_str'>packages_str</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init_repos-instance_method">
  
    - (<tt>Object</tt>) <strong>init_repos</strong>(hostname, replace = true, repo = nil, remote_repo_parent_dir = &quot;/root&quot;, ssh_user = &quot;root&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208
209
210
211
212
213
214
215
216
217
218</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 206</span>

<span class='kw'>def</span> <span class='id identifier rubyid_init_repos'>init_repos</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_replace'>replace</span><span class='op'>=</span><span class='kw'>true</span><span class='comma'>,</span> <span class='id identifier rubyid_repo'>repo</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/root</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_git_clone_commands'>git_clone_commands</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>

  <span class='const'>SIBLING_REPOS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_dirs'>repo_dirs</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_repo'>repo</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_repo'>repo</span> <span class='op'>==</span> <span class='id identifier rubyid_repo_name'>repo_name</span>
      <span class='id identifier rubyid_repo_git_url'>repo_git_url</span> <span class='op'>=</span> <span class='const'>SIBLING_REPOS_GIT_URL</span><span class='lbracket'>[</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_git_clone_commands'>git_clone_commands</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>if [ ! -d </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>-bare ]; then\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_replace'>replace</span>
      <span class='id identifier rubyid_git_clone_commands'>git_clone_commands</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rm -rf </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>; git clone --bare </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_git_url'>repo_git_url</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>-bare;\n</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_git_clone_commands'>git_clone_commands</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fi\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_replace'>replace</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_ssh'>ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_git_clone_commands'>git_clone_commands</span><span class='comma'>,</span> <span class='int'>240</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mcollective_logs-instance_method">
  
    - (<tt>Object</tt>) <strong>mcollective_logs</strong>(hostname) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


313
314
315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 313</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mcollective_logs'>mcollective_logs</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Keep all mcollective logs on remote instance: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hostname'>hostname</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_ssh'>ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>echo keeplogs=9999 &gt;&gt; /etc/mcollective/server.cfg</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>240</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ssh'>ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/sbin/service mcollective restart</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>240</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_and_exit-instance_method">
  
    - (<tt>Object</tt>) <strong>print_and_exit</strong>(ret, out) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


496
497
498
499
500
501
502</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 496</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_and_exit'>print_and_exit</span><span class='lparen'>(</span><span class='id identifier rubyid_ret'>ret</span><span class='comma'>,</span> <span class='id identifier rubyid_out'>out</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_ret'>ret</span> <span class='op'>!=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Exiting with error code </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ret'>ret</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Output: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_out'>out</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_exit'>exit</span> <span class='id identifier rubyid_ret'>ret</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_highlighted_output-instance_method">
  
    - (<tt>Object</tt>) <strong>print_highlighted_output</strong>(title, out) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


488
489
490
491
492
493
494</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 488</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_highlighted_output'>print_highlighted_output</span><span class='lparen'>(</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='id identifier rubyid_out'>out</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_puts'>puts</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>------------------ Begin </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_title'>title</span><span class='embexpr_end'>}</span><span class='tstring_content'> ------------------------</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_out'>out</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>------------------- End </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_title'>title</span><span class='embexpr_end'>}</span><span class='tstring_content'> -------------------------</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_puts'>puts</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reboot-instance_method">
  
    - (<tt>Object</tt>) <strong>reboot</strong>(instance) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


420
421
422
423
424</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 420</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reboot'>reboot</span><span class='lparen'>(</span><span class='id identifier rubyid_instance'>instance</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rebooting instance to apply new kernel...</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_reboot'>reboot</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Done</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="repo_clone_commands-instance_method">
  
    - (<tt>Object</tt>) <strong>repo_clone_commands</strong>(hostname) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201
202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 198</span>

<span class='kw'>def</span> <span class='id identifier rubyid_repo_clone_commands'>repo_clone_commands</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_clone_commands'>clone_commands</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='const'>SIBLING_REPOS</span><span class='period'>.</span><span class='id identifier rubyid_each_key'>each_key</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='op'>|</span>
    <span class='id identifier rubyid_clone_commands'>clone_commands</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>git clone </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>-bare </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>; </span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_clone_commands'>clone_commands</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="repo_path-instance_method">
  
    - (<tt>Object</tt>) <strong>repo_path</strong>(dir = &#39;&#39;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394
395
396</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 394</span>

<span class='kw'>def</span> <span class='id identifier rubyid_repo_path'>repo_path</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dir'>dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_temp_commit-instance_method">
  
    - (<tt>Object</tt>) <strong>reset_temp_commit</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


302
303
304
305
306
307
308
309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 302</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_temp_commit'>reset_temp_commit</span>
  <span class='kw'>if</span> <span class='ivar'>@temp_commit</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Undoing temporary commit...</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>while</span> <span class='id identifier rubyid_undo'>undo</span> <span class='op'>=</span> <span class='ivar'>@temp_commit</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
      <span class='backtick'>`</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_undo'>undo</span><span class='embexpr_end'>}</span><span class='tstring_end'>`</span></span>
    <span class='kw'>end</span>
    <span class='ivar'>@temp_commit</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Done.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_test_dir-instance_method">
  
    - (<tt>Object</tt>) <strong>reset_test_dir</strong>(hostname, backup = false, ssh_user = &quot;root&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 426</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_test_dir'>reset_test_dir</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_backup'>backup</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ssh'>ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>
cat&lt;&lt;EOF &gt; /tmp/reset_test_dir.sh
if [ -d /tmp/rhc ]
then
if </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_backup'>backup</span><span class='embexpr_end'>}</span><span class='tstring_content'>
then
    if \\\$(ls /tmp/rhc/run_* &gt; /dev/null 2&gt;&amp;1)
    then
        rm -rf /tmp/rhc_previous_runs
        mkdir -p /tmp/rhc_previous_runs
        mv /tmp/rhc/run_* /tmp/rhc_previous_runs
    fi
    if \\\$(ls /tmp/rhc/* &gt; /dev/null 2&gt;&amp;1)
    then
        for i in {1..100}
        do
            if ! [ -d /tmp/rhc_previous_runs/run_$i ]
            then
                mkdir -p /tmp/rhc_previous_runs/run_$i
                mv /tmp/rhc/* /tmp/rhc_previous_runs/run_$i
                break
            fi
        done
    fi
    if \\\$(ls /tmp/rhc_previous_runs/run_* &gt; /dev/null 2&gt;&amp;1)
    then
        mv /tmp/rhc_previous_runs/run_* /tmp/rhc/
        rm -rf /tmp/rhc_previous_runs
    fi
else
    rm -rf /tmp/rhc
fi
fi
mkdir -p /tmp/rhc/junit
EOF
chmod +x /tmp/reset_test_dir.sh
</span><span class='tstring_end'>}</span></span><span class='comma'>,</span> <span class='int'>120</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ssh'>ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sudo bash -c &#39;/tmp/reset_test_dir.sh&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='comma'>,</span> <span class='int'>120</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ssh'>ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sudo bash -c &#39;rm -rf /var/www/openshift/broker/tmp/cache/*&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='comma'>,</span> <span class='int'>120</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run_ssh-instance_method">
  
    - (<tt>Object</tt>) <strong>run_ssh</strong>(hostname, title, cmd, timeout = @@SSH_TIMEOUT, ssh_user = &quot;root&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 398</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run_ssh'>run_ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='op'>=</span><span class='cvar'>@@SSH_TIMEOUT</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_code'>code</span> <span class='op'>=</span> <span class='id identifier rubyid_ssh'>ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='heredoc_beg'>&lt;&lt;-eos</span>
<span class='tstring_content'>

      -----------------------------------------------------------
                  Begin Output From </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_title'>title</span><span class='embexpr_end'>}</span><span class='tstring_content'> Tests
      -----------------------------------------------------------

# </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cmd'>cmd</span><span class='embexpr_end'>}</span><span class='tstring_content'>

</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_output'>output</span><span class='embexpr_end'>}</span><span class='tstring_content'>

      -----------------------------------------------------------
                   End Output From </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_title'>title</span><span class='embexpr_end'>}</span><span class='tstring_content'> Tests
      -----------------------------------------------------------


</span><span class='heredoc_end'>  eos
</span>  <span class='kw'>return</span> <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_code'>code</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run_tests-instance_method">
  
    - (<tt>Object</tt>) <strong>run_tests</strong>(test_queues, hostname, ssh_user) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 520</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run_tests'>run_tests</span><span class='lparen'>(</span><span class='id identifier rubyid_test_queues'>test_queues</span><span class='comma'>,</span> <span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_threads'>threads</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_failures'>failures</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_test_queues'>test_queues</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tqueue'>tqueue</span><span class='op'>|</span>
    <span class='id identifier rubyid_threads'>threads</span> <span class='op'>&lt;&lt;</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_test_queue'>test_queue</span> <span class='op'>=</span> <span class='id identifier rubyid_tqueue'>tqueue</span>
      <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
      <span class='id identifier rubyid_test_queue'>test_queue</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_test'>test</span><span class='op'>|</span>
        <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_exit_code'>exit_code</span> <span class='op'>=</span> <span class='id identifier rubyid_run_ssh'>run_ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_test'>test</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_test'>test</span><span class='lbracket'>[</span><span class='symbol'>:command</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_test'>test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_test'>test</span><span class='lbracket'>[</span><span class='symbol'>:output</span><span class='rbracket'>]</span>  <span class='op'>=</span> <span class='id identifier rubyid_output'>output</span>
        <span class='id identifier rubyid_test'>test</span><span class='lbracket'>[</span><span class='symbol'>:exit_code</span><span class='rbracket'>]</span>  <span class='op'>=</span> <span class='id identifier rubyid_exit_code'>exit_code</span>
        <span class='id identifier rubyid_test'>test</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_exit_code'>exit_code</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id identifier rubyid_test'>test</span><span class='lbracket'>[</span><span class='symbol'>:completed</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>

        <span class='id identifier rubyid_still_running_tests'>still_running_tests</span> <span class='op'>=</span> <span class='id identifier rubyid_test_queues'>test_queues</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_q'>q</span><span class='op'>|</span>
          <span class='id identifier rubyid_q'>q</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_t'>t</span><span class='lbracket'>[</span><span class='symbol'>:completed</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
        <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_still_running_tests'>still_running_tests</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
          <span class='id identifier rubyid_mins'>mins</span><span class='comma'>,</span> <span class='id identifier rubyid_secs'>secs</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='op'>-</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span><span class='period'>.</span><span class='id identifier rubyid_divmod'>divmod</span><span class='lparen'>(</span><span class='int'>60</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Still Running Tests (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mins'>mins</span><span class='embexpr_end'>}</span><span class='tstring_content'>m </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_secs'>secs</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>s):</span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_still_running_tests'>still_running_tests</span><span class='period'>.</span><span class='id identifier rubyid_each_index'>each_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_q_idx'>q_idx</span><span class='op'>|</span>
            <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t Queue </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_q_idx'>q_idx</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_still_running_tests'>still_running_tests</span><span class='lbracket'>[</span><span class='id identifier rubyid_q_idx'>q_idx</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t\t</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_t'>t</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>end</span>
          <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\n\n</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_threads'>threads</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_failures'>failures</span> <span class='op'>=</span> <span class='id identifier rubyid_test_queues'>test_queues</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_q'>q</span><span class='op'>|</span> <span class='id identifier rubyid_q'>q</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_t'>t</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>false</span> <span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_failures'>failures</span><span class='period'>.</span><span class='id identifier rubyid_flatten!'>flatten!</span>
  <span class='id identifier rubyid_retry_queue'>retry_queue</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_failures'>failures</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_idle_all_gears'>idle_all_gears</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failures\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_failures'>failures</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\n\n</span><span class='tstring_end'>&quot;</span></span>

    <span class='comment'>#process failures
</span>    <span class='id identifier rubyid_failures'>failures</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_failed_test'>failed_test</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='symbol'>:cucumber_rerun_file</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_retry_queue'>retry_queue</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_build_cucumber_command'>build_cucumber_command</span><span class='lparen'>(</span><span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:env</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                              <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:cucumber_rerun_file</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                              <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:test_dir</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*.feature</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                              <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:require_gemfile_dir</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                              <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:other_outputs</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:output</span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>cucumber openshift-test\/tests\/.*\.feature:\d+</span><span class='regexp_end'>/</span></span>
        <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_lines'>lines</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>cucumber openshift-test\/tests\/(.*\.feature):(\d+)</span><span class='regexp_end'>/</span></span>
            <span class='id identifier rubyid_test'>test</span> <span class='op'>=</span> <span class='backref'>$1</span>
            <span class='id identifier rubyid_scenario'>scenario</span> <span class='op'>=</span> <span class='backref'>$2</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:retry_indivigually</span><span class='rbracket'>]</span>
              <span class='id identifier rubyid_retry_queue'>retry_queue</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_build_cucumber_command'>build_cucumber_command</span><span class='lparen'>(</span><span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:env</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                    <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:cucumber_rerun_file</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                    <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:test_dir</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_test'>test</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_scenario'>scenario</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>else</span>
              <span class='id identifier rubyid_retry_queue'>retry_queue</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_build_cucumber_command'>build_cucumber_command</span><span class='lparen'>(</span><span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:env</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                    <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:cucumber_rerun_file</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                    <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:test_dir</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_test'>test</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:retry_indivigually</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:output</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failure:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:output</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rake_test_loader</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_found_test'>found_test</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:output</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_lines'>lines</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(test_\w+)\((\w+Test)\) \[\/.*\/(test\/.*_test\.rb):(\d+)\]:</span><span class='regexp_end'>/</span></span>
            <span class='id identifier rubyid_found_test'>found_test</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='id identifier rubyid_test_name'>test_name</span> <span class='op'>=</span> <span class='backref'>$1</span>
            <span class='id identifier rubyid_class_name'>class_name</span> <span class='op'>=</span> <span class='backref'>$2</span>
            <span class='id identifier rubyid_file_name'>file_name</span> <span class='op'>=</span> <span class='backref'>$3</span>

            <span class='comment'># determine if the first part of the command is a directory change
</span>            <span class='comment'># if so, include that in the retry command
</span>            <span class='id identifier rubyid_chdir_command'>chdir_command</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_cmd'>cmd</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(cd .+?; )</span><span class='regexp_end'>/</span></span>
              <span class='id identifier rubyid_chdir_command'>chdir_command</span> <span class='op'>=</span> <span class='backref'>$1</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_retry_queue'>retry_queue</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_build_rake_command'>build_rake_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_class_name'>class_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_test_name'>test_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_chdir_command'>chdir_command</span><span class='embexpr_end'>}</span><span class='tstring_content'> ruby -Ilib:test </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_name'>file_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> -n </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_test_name'>test_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_retry_queue'>retry_queue</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
            <span class='symbol'>:command</span>  <span class='op'>=&gt;</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:command</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:options</span>  <span class='op'>=&gt;</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:title</span>    <span class='op'>=&gt;</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span>
        <span class='rbrace'>}</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_retry_queue'>retry_queue</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
            <span class='symbol'>:command</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:command</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:options</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='comma'>,</span>
            <span class='symbol'>:title</span>   <span class='op'>=&gt;</span> <span class='id identifier rubyid_failed_test'>failed_test</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span>
        <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_retry_queue'>retry_queue</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run_tests_with_retry-instance_method">
  
    - (<tt>Object</tt>) <strong>run_tests_with_retry</strong>(test_queues, hostname, ssh_user = &quot;root&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


504
505
506
507
508
509
510
511
512
513
514
515
516
517
518</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 504</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run_tests_with_retry'>run_tests_with_retry</span><span class='lparen'>(</span><span class='id identifier rubyid_test_queues'>test_queues</span><span class='comma'>,</span> <span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_test_run_success'>test_run_success</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>3</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_retry_cnt'>retry_cnt</span><span class='op'>|</span>
    <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Test run #</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_retry_cnt'>retry_cnt</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\n\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_failure_queue'>failure_queue</span> <span class='op'>=</span> <span class='id identifier rubyid_run_tests'>run_tests</span><span class='lparen'>(</span><span class='id identifier rubyid_test_queues'>test_queues</span><span class='comma'>,</span> <span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_failure_queue'>failure_queue</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_test_run_success'>test_run_success</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='kw'>break</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_reset_test_dir'>reset_test_dir</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_test_queues'>test_queues</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_failure_queue'>failure_queue</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span> <span class='kw'>unless</span> <span class='id identifier rubyid_test_run_success'>test_run_success</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="scp_remote_tests-instance_method">
  
    - (<tt>Object</tt>) <strong>scp_remote_tests</strong>(hostname, repo_parent_dir = &quot;/root&quot;, user = &quot;root&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123
124
125</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 121</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scp_remote_tests'>scp_remote_tests</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_parent_dir'>repo_parent_dir</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/root</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_init_repos'>init_repos</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_parent_dir'>repo_parent_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sync_repos'>sync_repos</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_parent_dir'>repo_parent_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_update_remote_tests'>update_remote_tests</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_parent_dir'>repo_parent_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sync_available_sibling_repos-instance_method">
  
    - (<tt>Object</tt>) <strong>sync_available_sibling_repos</strong>(hostname, remote_repo_parent_dir = &quot;/root&quot;, ssh_user = &quot;root&quot;) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>clones origin-server/rhc over to remote; returns command to run remotely
for cloning to standard working dirs, plus the names of those working dirs</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 182</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sync_available_sibling_repos'>sync_available_sibling_repos</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/root</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_working_dirs'>working_dirs</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_clone_commands'>clone_commands</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='const'>SIBLING_REPOS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_dirs'>repo_dirs</span><span class='op'>|</span>
    <span class='id identifier rubyid_repo_dirs'>repo_dirs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='op'>|</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_sync_sibling_repo'>sync_sibling_repo</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_working_dirs'>working_dirs</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_clone_commands'>clone_commands</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>git clone </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>-bare </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>; </span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>break</span> <span class='comment'># just need the first repo found
</span>      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_clone_commands'>clone_commands</span><span class='comma'>,</span> <span class='id identifier rubyid_working_dirs'>working_dirs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sync_repo-instance_method">
  
    - (<tt>Object</tt>) <strong>sync_repo</strong>(repo_name, hostname, remote_repo_parent_dir = &quot;/root&quot;, ssh_user = &quot;root&quot;, verbose = false) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sync_repo'>sync_repo</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/root</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_temp_commit'>temp_commit</span>

    <span class='comment'># Get the current branch
</span>    <span class='id identifier rubyid_branch'>branch</span> <span class='op'>=</span> <span class='id identifier rubyid_get_branch'>get_branch</span>

    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Synchronizing local changes from branch </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_branch'>branch</span><span class='embexpr_end'>}</span><span class='tstring_content'> for repo </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> from </span><span class='embexpr_beg'>#{</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_pwd'>pwd</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_init_repos'>init_repos</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_exitcode'>exitcode</span> <span class='op'>=</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;-&quot;SHELL&quot;</span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='rparen'>)</span>
<span class='tstring_content'>      #######
      # Start shell code
      export GIT_SSH=</span><span class='embexpr_beg'>#{</span><span class='const'>GIT_SSH_PATH</span><span class='embexpr_end'>}</span><span class='tstring_content'>
      </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_branch'>branch</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>origin/master</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>git push -q </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hostname'>hostname</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>-bare master:master --tags --force; </span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>
      git push -q </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hostname'>hostname</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>-bare </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_branch'>branch</span><span class='embexpr_end'>}</span><span class='tstring_content'>:master --tags --force

      #######
      # End shell code
</span><span class='heredoc_end'>      SHELL
</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Done</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_reset_temp_commit'>reset_temp_commit</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sync_repos-instance_method">
  
    - (<tt>Object</tt>) <strong>sync_repos</strong>(hostname, remote_repo_parent_dir = &quot;/root&quot;, sshuser = &quot;root&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129
130
131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sync_repos'>sync_repos</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/root</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_sshuser'>sshuser</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>SIBLING_REPOS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_dirs'>repo_dirs</span><span class='op'>|</span>
    <span class='id identifier rubyid_repo_dirs'>repo_dirs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='op'>|</span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_sync_sibling_repo'>sync_sibling_repo</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_sshuser'>sshuser</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sync_sibling_repo-instance_method">
  
    - (<tt>Object</tt>) <strong>sync_sibling_repo</strong>(repo_name, repo_dir, hostname, remote_repo_parent_dir = &quot;/root&quot;, ssh_user = &quot;root&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sync_sibling_repo'>sync_sibling_repo</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/root</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_exists'>exists</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_inside'>inside</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_sync_repo'>sync_repo</span><span class='lparen'>(</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_remote_repo_parent_dir'>remote_repo_parent_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_ssh_user'>ssh_user</span><span class='rparen'>)</span>
  <span class='kw'>end</span> <span class='kw'>if</span> <span class='id identifier rubyid_exists'>exists</span>
  <span class='id identifier rubyid_exists'>exists</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="temp_commit-instance_method">
  
    - (<tt>Object</tt>) <strong>temp_commit</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 278</span>

<span class='kw'>def</span> <span class='id identifier rubyid_temp_commit'>temp_commit</span>
  <span class='comment'># Warn on uncommitted changes
</span>  <span class='backtick'>`</span><span class='tstring_content'>git diff-index --quiet HEAD</span><span class='tstring_end'>`</span></span>

  <span class='kw'>if</span> <span class='gvar'>$?</span> <span class='op'>!=</span> <span class='int'>0</span>
    <span class='comment'># Perform a temporary commit
</span>    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Creating temporary commit to build</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>begin</span>
      <span class='backtick'>`</span><span class='tstring_content'>git commit -m &quot;Temporary commit #1 - index changes&quot;</span><span class='tstring_end'>`</span></span>
    <span class='kw'>ensure</span>
      <span class='lparen'>(</span><span class='ivar'>@temp_commit</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>git reset --soft HEAD^</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='gvar'>$?</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='kw'>end</span>

    <span class='kw'>begin</span>
      <span class='backtick'>`</span><span class='tstring_content'>git commit -a -m &quot;Temporary commit #2 - non-index changes&quot;</span><span class='tstring_end'>`</span></span>
    <span class='kw'>ensure</span>
      <span class='lparen'>(</span><span class='ivar'>@temp_commit</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>git reset --mixed HEAD^</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='gvar'>$?</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_puts'>puts</span> <span class='ivar'>@temp_commit</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No-op</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Done</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_api_file-instance_method">
  
    - (<tt>Object</tt>) <strong>update_api_file</strong>(instance) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 319</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_api_file'>update_api_file</span><span class='lparen'>(</span><span class='id identifier rubyid_instance'>instance</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_public_ip'>public_ip</span> <span class='op'>=</span> <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_dns_name'>dns_name</span>
  <span class='id identifier rubyid_external_config'>external_config</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~/.openshift/console.conf</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_config_file'>config_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_external_config'>external_config</span><span class='rparen'>)</span>

  <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_mkdir'>mkdir</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~/.openshift</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>

  <span class='kw'>if</span> <span class='kw'>not</span> <span class='const'>FileTest</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_config_file'>config_file</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>File &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_external_config'>external_config</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; does not exist, creating...</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>touch </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_external_config'>external_config</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_config_file'>config_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;-END</span>
<span class='tstring_content'>BROKER_URL=https://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_public_ip'>public_ip</span><span class='embexpr_end'>}</span><span class='tstring_content'>/broker/rest
DOMAIN_SUFFIX=dev.rhcloud.com
# Uncomment the next line to set a proxy URL for the broker
# BROKER_PROXY_URL=
</span><span class='heredoc_end'>      END
</span>      <span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>else</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Updating ~/.openshift/console.conf with public ip = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_public_ip'>public_ip</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='const'>IO</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_config_file'>config_file</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r[</span><span class='tstring_content'>^BROKER_URL=\s*https://[^/]+/broker/rest$</span><span class='regexp_end'>]m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BROKER_URL=https://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_public_ip'>public_ip</span><span class='embexpr_end'>}</span><span class='tstring_content'>/broker/rest</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_config_file'>config_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_express_server-instance_method">
  
    - (<tt>Object</tt>) <strong>update_express_server</strong>(instance) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


388
389
390
391
392</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 388</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_express_server'>update_express_server</span><span class='lparen'>(</span><span class='id identifier rubyid_instance'>instance</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_public_ip'>public_ip</span> <span class='op'>=</span> <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_dns_name'>dns_name</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Updating ~/.openshift/express.conf libra_server entry with public ip = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_public_ip'>public_ip</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='backtick'>`</span><span class='tstring_content'>sed -i -e &#39;s,^libra_server.*,libra_server=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_public_ip'>public_ip</span><span class='embexpr_end'>}</span><span class='tstring_content'>,&#39; ~/.openshift/express.conf</span><span class='tstring_end'>`</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_remote_tests-instance_method">
  
    - (<tt>Object</tt>) <strong>update_remote_tests</strong>(hostname, branch = nil, repo_parent_dir = &quot;/root&quot;, user = &quot;root&quot;) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_remote_tests'>update_remote_tests</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_branch'>branch</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_parent_dir'>repo_parent_dir</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/root</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Updating remote tests...</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_git_archive_commands'>git_archive_commands</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='const'>SIBLING_REPOS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_dirs'>repo_dirs</span><span class='op'>|</span>
    <span class='id identifier rubyid_repo_dir'>repo_dir</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_parent_dir'>repo_parent_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>-bare</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_git_archive_commands'>git_archive_commands</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pushd </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_dir'>repo_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'> &gt; /dev/null; git archive --prefix openshift-test/</span><span class='embexpr_beg'>#{</span><span class='op'>::</span><span class='const'>OPENSHIFT_ARCHIVE_DIR_MAP</span><span class='lbracket'>[</span><span class='id identifier rubyid_repo_name'>repo_name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> --format=tar </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_branch'>branch</span> <span class='op'>?</span> <span class='id identifier rubyid_branch'>branch</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> | (cd </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_parent_dir'>repo_parent_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'> &amp;&amp; tar --warning=no-timestamp -xf -); popd &gt; /dev/null; </span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_exit_code'>exit_code</span> <span class='op'>=</span> <span class='id identifier rubyid_ssh'>ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>
set -e;
sudo bash -c \&quot;rm -rf </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_repo_parent_dir'>repo_parent_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/openshift-test\&quot;
</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_git_archive_commands'>git_archive_commands</span><span class='embexpr_end'>}</span><span class='tstring_content'>
sudo bash -c \&quot;mkdir -p /tmp/rhc/junit\&quot;
</span><span class='tstring_end'>}</span></span><span class='comma'>,</span> <span class='int'>60</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_exit_code'>exit_code</span> <span class='op'>!=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_exit'>exit</span> <span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_update_cucumber_tests'>update_cucumber_tests</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_repo_parent_dir'>repo_parent_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Done</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_ssh_config_verifier-instance_method">
  
    - (<tt>Object</tt>) <strong>update_ssh_config_verifier</strong>(instance) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 346</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_ssh_config_verifier'>update_ssh_config_verifier</span><span class='lparen'>(</span><span class='id identifier rubyid_instance'>instance</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_public_ip'>public_ip</span> <span class='op'>=</span> <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_dns_name'>dns_name</span>
  <span class='id identifier rubyid_ssh_config'>ssh_config</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~/.ssh/config</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_pem_file'>pem_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~/.ssh/libra.pem</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_pem_file'>pem_file</span><span class='rparen'>)</span>
    <span class='comment'># copy it from local repo
</span>    <span class='id identifier rubyid_cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cp misc/libra.pem </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pem_file'>pem_file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_cmd'>cmd</span>
    <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd'>cmd</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>chmod 600 </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pem_file'>pem_file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_config_file'>config_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_ssh_config'>ssh_config</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_config_template'>config_template</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;END</span>
<span class='tstring_content'>Host verifier
  HostName 10.1.1.1
  User      root
  IdentityFile ~/.ssh/libra.pem
</span><span class='heredoc_end'>END
</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='const'>FileTest</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_config_file'>config_file</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>File &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ssh_config'>ssh_config</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; does not exists, creating...</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>touch </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ssh_config'>ssh_config</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>chmod 600 </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ssh_config'>ssh_config</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd'>cmd</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_file_mode'>file_mode</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_config_file'>config_file</span><span class='comma'>,</span> <span class='id identifier rubyid_file_mode'>file_mode</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_config_template'>config_template</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>grep -n &#39;Host verifier&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_config_file'>config_file</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_file_mode'>file_mode</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_config_file'>config_file</span><span class='comma'>,</span> <span class='id identifier rubyid_file_mode'>file_mode</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_config_template'>config_template</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='id identifier rubyid_line_num'>line_num</span> <span class='op'>=</span> <span class='backtick'>`</span><span class='tstring_content'>grep -n &#39;Host verifier&#39; ~/.ssh/config</span><span class='tstring_end'>`</span></span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Updating ~/.ssh/config verifier entry with public ip = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_public_ip'>public_ip</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>4</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='backtick'>`</span><span class='tstring_content'>sed -i -e &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line_num'>line_num</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'>s,HostName.*,HostName </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_public_ip'>public_ip</span><span class='embexpr_end'>}</span><span class='tstring_content'>,&#39; ~/.ssh/config</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_test_bundle-instance_method">
  
    - (<tt>Object</tt>) <strong>update_test_bundle</strong>(hostname, user, *dirs) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_test_bundle'>update_test_bundle</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_dirs'>dirs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_dirs'>dirs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dir'>dir</span><span class='op'>|</span>
    <span class='id identifier rubyid_cmd'>cmd</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cd ~/openshift-test/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dir'>dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>; rm Gemfile.lock; bundle install --local; touch Gemfile.lock;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_ssh'>ssh</span><span class='lparen'>(</span><span class='id identifier rubyid_hostname'>hostname</span><span class='comma'>,</span> <span class='id identifier rubyid_cmd'>cmd</span><span class='comma'>,</span> <span class='int'>60</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wrap_test_command-instance_method">
  
    - (<tt>Object</tt>) <strong>wrap_test_command</strong>(command, env = {}) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-dev-tools/build/lib/openshift/builder_helper.rb', line 681</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wrap_test_command'>wrap_test_command</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_env_str'>env_str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_env'>env</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
      <span class='id identifier rubyid_env_str'>env_str</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>export </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'>v</span><span class='embexpr_end'>}</span><span class='tstring_content'>; </span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='const'>BASE_OS</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fedora</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SKIP_RUNCON</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sudo bash -c \&quot;export REGISTER_USER=1 ; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env_str'>env_str</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_command'>command</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sudo bash -c \&quot;runcon -t openshift_initrc_t bash -c \\\&quot;export REGISTER_USER=1 ; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env_str'>env_str</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_command'>command</span><span class='embexpr_end'>}</span><span class='tstring_content'>\\\&quot;\&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span><span class='lparen'>(</span><span class='const'>BASE_OS</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rhel</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>or</span> <span class='const'>BASE_OS</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>centos</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sudo bash -c \&quot;/usr/bin/scl enable ruby193 \\\&quot;export LANG=en_US.UTF-8 ; export REGISTER_USER=1; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env_str'>env_str</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_command'>command</span><span class='embexpr_end'>}</span><span class='tstring_content'>\\\&quot;\&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Tue Aug 20 22:06:55 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-2.0.0).
</div>

  </body>
</html>