<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Asciidoctor 0.1.4" name="generator">
<meta content="OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;" name="author">
<title>OpenShift PEP 011: OpenShift Containerization</title>
<style>@import url(http://openshift.redhat.com/app/assets/overpass.css);
@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/*
Origin theme source file

To build it:
- clone the asciidoctor-stylesheet-factory repo
- copy this theme file to the sass folder inside the repo
- copy the settings file to the sass/settings file inside the repo
- cd to the cloned repo
- bundle install
- compass compile
- compiled stylesheet is in the stylesheets/ directory
*/
/* Generated by Font Squirrel (http://www.fontsquirrel.com) on July 24, 2013 */
@font-face { font-family: 'source_code_pro'; src: url("fonts/sourcecodepro-regular-webfont.eot"); src: url("fonts/sourcecodepro-regular-webfont.eot?#iefix") format("embedded-opentype"), url("fonts/sourcecodepro-regular-webfont.woff") format("woff"), url("fonts/sourcecodepro-regular-webfont.ttf") format("truetype"), url("sourcecodepro-regular-webfont.svg#source_code_proregular") format("svg"); font-weight: normal; font-style: normal; }

/*
Settings and overrides for the Origin theme
*/
/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title, .tableblock > caption { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #006699; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #005580; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Overpass, sans-serif; font-weight: bold; font-style: normal; color: #222222; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #7f0a0c; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

/*
.clearfix,
.floatend { zoom: 1; &:before, &:after { content: " "; display: table; } &:after { clear: both; }
}
*/
code { font-size: inherit; padding: 0; white-space: nowrap; background-color: inherit; border: 0 solid #dddddd; -webkit-border-radius: 0; border-radius: 0; text-shadow: none; }

kbd.keyseq { color: #555555; }

kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: #222222; font-weight: bold; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 1.25em; }
#toc > ul, #toc > ol { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a, #toc ol.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1, #toc ol.sectlevel0 ol.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul, #toc ol { list-style-type: none; }

#toctitle { color: #6f6f6f; }

@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul, #toc.toc2 > ol { font-size: .95em; }
  #toc.toc2 ul ul, #toc.toc2 ol ol { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1, #toc.toc2 ol.sectlevel0 ol.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > .paragraph:last-child > p { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; line-height: 1.6; }
.sidebarblock > .content > .paragraph:last-child p { margin-bottom: 0; }

pre { color: black; font-family: source_code_pro, monospace, serif; overflow-x: auto; line-height: 1.4; }

.verseblock { margin-bottom: 1.25em; }

.literalblock, .listingblock { margin-bottom: 1.25em; }
.literalblock > .content > pre, .listingblock > .content > pre { background: #eeeeee; color: black; font-family: source_code_pro, monospace, serif; border-width: 0; padding: 0.8em 0.8em 0.6em 0.8em; word-wrap: break-word; line-height: 1.4; }
.literalblock > .content > pre.nowrap, .listingblock > .content > pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content > pre > code, .listingblock > .content > pre > code { font-size: 1em; white-space: inherit; color: black; font-family: source_code_pro, monospace, serif; padding: 0; background: none; font-weight: normal; border: none; }
@media only screen { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 1em; } }

.listingblock:hover .xml:before { content: "xml"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .html:before { content: "html"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .ruby:before { content: "ruby"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .asciidoc:before { content: "asciidoc"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .java:before { content: "java"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .javascript:before { content: "javascript"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .css:before { content: "css"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .scss:before { content: "scss"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: 0.8125em; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 0; border-radius: 0; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.halign-top, td.tableblock.halign-top { vertical-align: top; }

th.tableblock.halign-bottom, td.tableblock.halign-bottom { vertical-align: bottom; }

th.tableblock.halign-middle, td.tableblock.halign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist { list-style-type: none; margin-left: 0.625em; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

td.hdlist1 { vertical-align: top; padding-right: .8em; font-weight: bold; }

.qanda > ol > li > p:first-child { color: #005580; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: none; box-shadow: none; }

.imageblock { margin-bottom: 1.25em; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding: 0.75em 0.375em; margin-bottom: 1.25em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: none; cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #006699; color: #004c73; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

nav.global { background: #222; width: 100%; height: 4em; }
nav.global ul { list-style-type: none; margin: 0; }
nav.global li { display: inline-block; }
nav.global a { display: block; padding: .5em 1em; font-family: Overpass; font-size: 1.1em; color: white; }
nav.global a:hover { color: #ef2e32; }
nav.global a img { margin-top: .25em; height: 2.75em; }

#header > h1 { border: none; }

#toc { background: #eee; border-right: none; }
#toc.toc2 { box-shadow: 1px 0 1px rgba(0, 0, 0, 0.3); }

code { font-family: source_code_pro; }

.admonitionblock td.icon .icon-tip:before { color: #cc6; text-shadow: none; }

#footer { background-image: url("images/panda.png"); background-position: right bottom; background-repeat: no-repeat; }

/* Alignment Styles */
.halign-left { text-align: left }
.halign-center { text-align: center }
.halign-right { text-align: right }

.valign-top { vertical-align: top }
.valign-middle { vertical-align: middle }
.valign-bottom { vertical-align: bottom }</style>
<link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body class="article toc2">
<nav class="global">
<ul>
<li>
<a href="http://openshift.github.io">
<img alt="OpenShift Origin" src="images/logo.png">
</a>
</li>
<li>
<a href="index.html">Documentation Home</a>
</li>
</ul>
</nav>
<div id="header">
<h1>OpenShift PEP 011: OpenShift Containerization</h1>
<span id="author">OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;</span>
<br>
<div class="toc2" id="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#abstract">Abstract</a></li>
<li><a href="#motivation-background">Motivation (Background)</a></li>
<li><a href="#goals">Goals</a></li>
<li><a href="#solution">Solution</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#architecture">Architecture</a></li>
<li><a href="#container-density">Container Density</a></li>
<li><a href="#filesystem">Filesystem</a></li>
<li><a href="#network">Network</a></li>
<li><a href="#user-ssh-access-to-the-container">User SSH access to the container</a></li>
<li><a href="#memory-and-cpu-limits">Memory and CPU limits</a></li>
<li><a href="#filesystem-limits">Filesystem limits</a></li>
<li><a href="#shared-filesystem">Shared Filesystem</a></li>
<li><a href="#idler">Idler</a></li>
<li><a href="#design">Design</a></li>
<li><a href="#miscellaneous-changes">Miscellaneous Changes</a></li>
</ul>
</li>
<li><a href="#open-issues">Open Issues</a></li>
<li><a href="#near-term-requirements-for-other-packages">Near-term Requirements for Other Packages</a></li>
<li><a href="#future-work">Future Work</a></li>
<li><a href="#appendix-a-use-cases-for-goals">Appendix A: Use Cases for Goals</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#terminology">Terminology</a></li>
<li><a href="#high-container-density">1 High Container Density</a></li>
<li><a href="#low-resource-overhead">2 Low Resource Overhead</a></li>
<li><a href="#attach-to-container">3 Attach to Container</a></li>
<li><a href="#ability-to-bind-to-localhost">4 Ability to Bind to localhost</a></li>
<li><a href="#security">5 Security</a></li>
<li><a href="#memory-control">6 Memory Control</a></li>
<li><a href="#contained-root-commands">7 Contained Root Commands</a></li>
<li><a href="#routing-to-containerized-gears">8 Routing to Containerized Gears</a></li>
<li><a href="#patching">9 Patching</a></li>
<li><a href="#virsh-compatibility">10 virsh Compatibility</a></li>
<li><a href="#portability">11 Portability</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>PEP: 011<br>
Title: OpenShift Containerization<br>
Status: draft<br>
Author: Krishna Raman <a href="mailto:kraman@redhat.com">kraman@redhat.com</a>, Tobias Kunze <a href="mailto:tkunze@redhat.com">tkunze@redhat.com</a><br>
Arch Priority: high<br>
Complexity: 100 Affected Components: runtime, broker<br>
Affected Teams: Runtime (0-5), UI (0-5), Broker (0-5), Enterprise (0-5)<br>
User Impact: none<br>
Epic:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="abstract"><a class="anchor" href="#abstract"></a>Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The current design of OpenShift containers uses SELinux, CGroups, Pam namespaces, quota to provide isolation. Recent improvements in the Linux kernel provide additional features like namespacing which can be leveraged to improve containerization and provide additional security. The <a href="openshift-pep-010-docker-cartridges.md">Docker cartridges PEP</a> introduces the Docker container management tool, draws on work from the libvirt-sandbox project, and depends on a number of important kernel containerization concepts in order to enable efficient, secure, isolated containers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="motivation-background"><a class="anchor" href="#motivation-background"></a>Motivation (Background)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The kernel has added a few new namespaces which provide additional isolation for gears:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1. PID namespace: Provides each gear with its own set of PIDs starting at 1 so the are unable to see processes from other gears.
2. Network namespace: Provides each gear with its own 127.x.x.x IP address space and allowes adding custom network devices.
3. IPC namespace: Isolates the queues, semaphors etc. used by a gear from other gears
4. Mount namespace: Allows for file system mounting that is only visible to the gear.
5. UTS namespace: Allows the gear to have its own hostname</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note</strong> There are also user and memory namespaces but those are not enabled in Fedora by default.</p>
</div>
<div class="paragraph">
<p>The LibVirt-Sandbox project[<a href="http://libvirt.org/git/?p=libvirt-sandbox.git">http://libvirt.org/git/?p=libvirt-sandbox.git</a>] has packaged up these namespaces and provided a convenient way of setting up isolated containers. These containers can also be easily managed through the libvirt API. At the same time, <a href="www.docker.io">Docker</a>, currently based on the LXC tooling, has introduced an ecosystem and management model around LXC that also introduces a filesystem namespace for isolating container dependencies.</p>
</div>
<div class="paragraph">
<p>It is desirable to introduce Docker, LibVirt, and Kernel namespace based containerization into OpenShift. For hosters, containerization helps make the economics work by allowing for a higher degree of overcommit. For anyone else running OpenShift, containerization massively simplifies setup and operations by making virtualization optional. The use of Docker takes the final step in allowing the containers running on OpenShift to isolate and version the dependency chains that user software depends on.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="goals"><a class="anchor" href="#goals"></a>Goals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following is a list of goals, in descending order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Achieve a very high <strong>density</strong> of containers. In the order of 1,000 or more active small gears per EC2 m2.4xlarge host, plus approx. 10,000 idle containers.</p>
</li>
<li>
<p>Minimal additional resource <strong>overhead</strong> as compared to current OpenShift isolation</p>
</li>
<li>
<p>Allow host root to <strong>attach</strong> to the container and run commands inside it, both as container root and container user</p>
</li>
<li>
<p>Gears must be able to bind to <strong>0.0.0.0</strong> in a predictable fashion</p>
</li>
<li>
<p>Allow for gears to be moved between hosts with minimal reconfiguration.</p>
</li>
<li>
<p><strong>Security</strong></p>
</li>
<li>
<p><strong>Memory usage</strong> must be controllable in both user and kernel land (separate goal because the respective cgroups controller is not available)</p>
</li>
<li>
<p>Applications should be able to run <strong>contained root commands</strong></p>
</li>
<li>
<p>Users must to be able to <strong>connect</strong> to their containerized gears</p>
</li>
<li>
<p>Support <strong>patching</strong> of container packages</p>
</li>
<li>
<p>Some form of <strong>virsh compatibility</strong> for ecosystem reasons</p>
</li>
<li>
<p><strong>Portability</strong> at least between RHT distros and Debian</p>
</li>
<li>
<p>Prepare for shared filesystem access within the gear.</p>
</li>
<li>
<p>Leverage SystemdD capabilities like socket-activation where possible.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solution"><a class="anchor" href="#solution"></a>Solution</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="architecture"><a class="anchor" href="#architecture"></a>Architecture</h3>
<div class="paragraph">
<p>The proposed solution is based on the Docker plus libvirtd integration, running in Fedora and RHEL 6.5+. Libvirtd builds on top of cgroups and kernel namespaces to provide the container technology. SELinux is managed through Docker.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> a Fedora 19 kernel is required for underlying <code>lxc-attach</code> support. However, even Fedora 19 does not include the memory cgroups controller (see goal 6 above) and user kernel namespace support.</p>
</div>
<div class="paragraph">
<p>A wrapper around <code>lxc-attach</code>, <code>virt-login-shell</code> is available as a LibVirt patch and is being reviewed for merge.</p>
</div>
<div class="paragraph">
<p>Each container runs a gear and is bootstrapped by a small <code>oo-gear-init</code> process, which puts itself to sleep as soon as the container is up and waits for SIGCHILD signals.</p>
</div>
</div>
<div class="sect2">
<h3 id="container-density"><a class="anchor" href="#container-density"></a>Container Density</h3>
<div class="paragraph">
<p>With the current container model, each container does not have any extra processes running in it, however the LibVirt model requires an init process to be running to keep the namespace and container alive. In order to maximize density, this init process will need to have a very minimal footprint.</p>
</div>
<div class="paragraph">
<p><strong>Proposal:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>1. Use a init process instead of SystemD based services.

2. The init program will respond to SIGCHILD events in order to clean up processes.

3. The init process will have a very small memory footprint.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="filesystem"><a class="anchor" href="#filesystem"></a>Filesystem</h3>
<div class="paragraph">
<p>Root is mounted <code>ro</code> in a container and the gear dir <code>/var/lib/openshift/gear/&lt;uuid&gt;</code> is bind mounted <code>rw`on `/var/lib/openshift/gear</code>. As a result, anything that the gear needs to access needs to be outside the <code>/var/lib/openshift/gear</code> directory. <code>/tmp</code> and <code>/var/tmp</code> are tmpfs mounts.</p>
</div>
<div class="paragraph">
<p><strong>Proposal:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>1. `&lt;PREFIX&gt;/gear/&lt;uuid&gt;` bind mounted on `&lt;PREFIX&gt;/gear` (singular)

2. `&lt;PREFIX&gt;/gear/.httpd.d` and similar hidden due to bind mount

3. `&lt;PREFIX&gt;/cartridge` (singular, to match gear) visible since not hidden by bind mount

4. All of `&lt;PREFIX&gt;` can remain one mount

5. `&lt;PREFIX&gt;` can be `/openshift` for simplicity

6. Use non-file based config for sssd to hide /etc/passwd,shadow,group files from gear</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="network"><a class="anchor" href="#network"></a>Network</h3>
<div class="paragraph">
<p>The biggest change on the network side is related to switching from localhost gear addresses to routable addresses. If we use a routable address, port_proxy could be dropped and replaced with iptables.</p>
</div>
<div class="paragraph">
<p>Currently the broker assign a UID to a gear and the 127.x.x.* ip range and external proxy ports is based on this UID. This makes moving gears between hosts difficult as it requires reconfiguring cartridges (not just connections) if a gear is moved.</p>
</div>
<div class="paragraph">
<p><strong>Proposal:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>1. Each LibVirt container will be assigned a 172.x.x.x NAT'd address based on its UID

2. Within the container the conatiner will have 127.*.*.* network space and cartridges will bind to these addresses.

3. IPTables will be used to port-forward the 127.x.x.x address to the container external 172.x.x.x address.

4. IPTables/FirewallD will be used to port-forward the 172.x.x.x conatiner address to an node external IP.

5. When gears are moved, their internal 127.*.*.* IP space will not change. The 172.x.x.x address and the externally
   proxied ports will change. Connection hooks will be re-executed to reconnect services.</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Update:</strong> recent Fedora/RHEL kernel changes [mmcgrath: kernel version is unclear] allow localhost to be routed, so the localhost option would be available today.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> This still ties the network IP to the UID of the gear but since cartridges do not listen on this address, it will not be affected by any changes.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The actual network ip range of the internal network will need to be configurable as some on-prem environments may already be using one of more the private address spaces.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: Even if 127.x.x.x IPs are not routable, F19 allows for creation of a dummy interface inside the container and assigning it a link-local (169.254.x.x) address. This allows the use of same DNAT iptables rules.</p>
</div>
</div>
<div class="sect2">
<h3 id="user-ssh-access-to-the-container"><a class="anchor" href="#user-ssh-access-to-the-container"></a>User SSH access to the container</h3>
<div class="paragraph">
<p>Current container model uses standard *nix users and does not require any additional support for SSH. With LibVirt, SSH access to the gear will require the container to be started on demand.</p>
</div>
<div class="paragraph">
<p><strong>Proposal:</strong></p>
</div>
<div class="paragraph">
<p>A wrapper around <code>lxc-attach</code>, <code>virt-login-shell</code> is available as a LibVirt patch and is being reviewed for merge. <code>virt-login-shell</code> is a SUID program which will start the LibVirt container and switch the current process into the container namespace.</p>
</div>
</div>
<div class="sect2">
<h3 id="memory-and-cpu-limits"><a class="anchor" href="#memory-and-cpu-limits"></a>Memory and CPU limits</h3>
<div class="paragraph">
<p>The current container model directly modified cgroups to monitor and control memory and CPU limits. We need an equivalent with LibVirt.</p>
</div>
<div class="paragraph">
<p><strong>Proposal:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>1. The current resource module will be made pluggable.

2. A new plugin will be created which will use LibVirt APIs to query CPU usage and set CPU and Memory limits</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="filesystem-limits"><a class="anchor" href="#filesystem-limits"></a>Filesystem limits</h3>
<div class="paragraph">
<p>The current container model uses quotas to limit filesystem usage. With LibVirt containers, this is more complex as the container directory structure does not match up with the host, and thus the container is unable to read the quota DB.</p>
</div>
<div class="paragraph">
<p><strong>Proposal:</strong></p>
</div>
<div class="paragraph">
<p>Still under investigation.</p>
</div>
</div>
<div class="sect2">
<h3 id="shared-filesystem"><a class="anchor" href="#shared-filesystem"></a>Shared Filesystem</h3>
<div class="paragraph">
<p>In the current container model, each gear is assigned a SELinux MCS label based on its UID. This means that files cannot be shared between gears even if they are part of the same application.</p>
</div>
<div class="paragraph">
<p><strong>Proposal:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>1. All gears that are part of the same application will be assigned a common GID by the broker.

2. MCS labels will be based on GID, rather than UID.</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> We expect SELinux enabled NFS shares to be available in a few months in the Fedora kernel.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> A filesystem capable of providing high throughput cluster-wide storage still needs to be investigated.</p>
</div>
</div>
<div class="sect2">
<h3 id="idler"><a class="anchor" href="#idler"></a>Idler</h3>
<div class="paragraph">
<p>In the current container model, un-idling an application is a complex and multi step process. SystemD socket-activation might provide a solution however, it requires cartridges to understand socket activation and use pre-created sockets which may not be possible.</p>
</div>
<div class="paragraph">
<p><strong>Proposal:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>1. When container is idle, update iptables/firewalld and apache to point to a socket assigned to SystemD.

2. When there is a connection attempt on that socket, SystemD will activate the container.

3. Once container is actve, update iptables/firewalld rules to point to the correct sockets on the container.</pre>
</div>
</div>
<div class="paragraph">
<p>This will result in the first TCP SYN packet being lost, but the when a connection retry will attempted, it will reach the correct service. It also does not require the cartridge process to know about SystemdD socket activation.</p>
</div>
<div class="paragraph">
<p><em>Alternative Proposal:</em></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Introduce an idle-aware proxy in the network chain for public HTTP/TCP sockets on applications</p>
</li>
<li>
<p>When there is a connection attempt on the proxy, notify OpenShift to start at least one gear for the underlying application</p>
</li>
<li>
<p>Block until OpenShift or the gear begins to respond (either alternative has limitations) and then allow traffic to continue</p>
</li>
<li>
<p>Shed traffic (503) if too many connections are waiting on a start, and timeout / mark the backend down</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The alternative proposal is less generic, but is less dependent on changes in the lower tiers. It is most suitable for incoming edge traffic, but not easily used for inter-gear communication.</p>
</div>
</div>
<div class="sect2">
<h3 id="design"><a class="anchor" href="#design"></a>Design</h3>
<div class="paragraph">
<p>Containerization on Docker will be introduced by adding a new type of OpenShift node to the system - one that listens on MCollective for a new message schema from the existing V2 work. This node would be a host for Docker based containers only, and have different runtime code to account for the proposed changes.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Needs further elaboration</p>
</div>
</div>
<div class="sect2">
<h3 id="miscellaneous-changes"><a class="anchor" href="#miscellaneous-changes"></a>Miscellaneous Changes</h3>
<div class="paragraph">
<p><strong>Note:</strong> Needs further elaboration</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Existing architecture relies on uid=gid for all gears. If the node machine had a gid that is allocated to some other user, then the sync between uid/gid breaks and causes gear creation failures. See <a href="https://bugzilla.redhat.com/show_bug.cgi?id=967146">bug# 967146</a>.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> We don’t need to pre-label IP addresses anymore once IP namespacing is available, so we shouldn’t be limited in how many UIDs and GIDs we can give out.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Since the pam folks didn’t like namespace switching, ssh logins have been changed from relying on pam to a new setuid script performing the necessary routing.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="open-issues"><a class="anchor" href="#open-issues"></a>Open Issues</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Disk quotas don’t work because processes inside a container can’t see the host-wide quota db.</p>
</li>
<li>
<p>Gear move needs to be flushed out as UIDs may change and require connection hooks to be re-run.</p>
</li>
<li>
<p>The memory cgroups controller is not in Fedora. As a result, a container&#8217;s memory usage can not be fully controlled. As of kernel 3.8.2, the memory cgroups controller appears to be still WIP. Dan Berrange says it should be available in F19, but at least Tobias hasn&#8217;t been able to get it turned on. /Documentation/cgroups/memory.txt claims it to be only a matter of enabling CONFIG_CGROUP_MEM_RES_CTLR and CONFIG_CGROUP_MEM_RES_CTLR_SWAP. From a Fedora perspective, Justin Forbes says that both MEMCG and MEMCG_SWAP are enabled in Fedora now, but that it is missing HUGETLB. Issue with HUGETLB is that it doesn&#8217;t support page reclaim, i.e. containers would have to set page limits per application statically before launch and if apps would attempt to use more, they&#8217;d simply get a bus error.</p>
</li>
<li>
<p>Kernel user namespaces are not yet in any released kernel, albeit there are patches that can be applied to newest kernels beyond the current stable 3.8.2. Dan Walsh suggest to hold off on user namespaces and thinks they are highly experimental. Justin also pointed out that they are incompatible with xfs. The solution is to fix xfs, but I&#8217;m not aware of any work in that area. As a result, though, Fedora will not enable it until xfs is fixed.</p>
</li>
<li>
<p>Security in general is an issue. Containers must be isolated from root escalation, from visibilty to other containers, and from network exposure.</p>
</li>
<li>
<p>The security of Docker container level packages needs to be thoroughly evaluated. Docker allows filesystem CoW consistency via thinp, but package installation still requires root level escalation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="near-term-requirements-for-other-packages"><a class="anchor" href="#near-term-requirements-for-other-packages"></a>Near-term Requirements for Other Packages</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>DEPRECATED</strong>: libvirt-sandbox</p>
<div class="ulist">
<ul>
<li>
<p>/tmp should be bind-mounted instead of being a tmpfs so the git work OpenShift performs within /tmp doesn’t end up squeezing RAM.</p>
</li>
<li>
<p>We need a good way to hide /etc/passwd and friends until user namespaces are supported kernel-side.</p>
</li>
<li>
<p>/proc/meminfo has an SELinux issue (bad label); Dan Walsh is looking into it.</p>
</li>
<li>
<p>virt-login-shell and sandbox execute commands need to push the process they spawn into the same cgroup as the container.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="future-work"><a class="anchor" href="#future-work"></a>Future Work</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Key functionality the container infrastructure should support in the future include gear/application idling and live migration.</p>
</div>
<div class="paragraph">
<p>Future customer requirements may include</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Exposing an interface to iptables</p>
</li>
<li>
<p>Adding a shared filesystem</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-a-use-cases-for-goals"><a class="anchor" href="#appendix-a-use-cases-for-goals"></a>Appendix A: Use Cases for Goals</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="terminology"><a class="anchor" href="#terminology"></a>Terminology</h3>
<div class="paragraph">
<p>The following terminology is used below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"<strong>User</strong>" := user of an OpenShift application</p>
</li>
<li>
<p>"<strong>Customer</strong>" := OpenShift application developer</p>
</li>
<li>
<p>"<strong>Cartridge Developer</strong>"</p>
</li>
<li>
<p>"<strong>Developer</strong>" := member of OpenShift development team or development community</p>
</li>
<li>
<p>"<strong>Operator</strong>" := member of OpenShift ops team</p>
</li>
<li>
<p>"<strong>Owner</strong>" := OpenShift installation owner</p>
</li>
<li>
<p>"<strong>Application</strong>" := OpenShift application</p>
</li>
<li>
<p>"<strong>Cartridge</strong>" := OpenShift cartridge</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="high-container-density"><a class="anchor" href="#high-container-density"></a>1 High Container Density</h3>
<div class="paragraph">
<p>Achieve a <strong>density</strong> of 1,000 or more active containers per host, plus approx. 10,000 idle containers.</p>
</div>
<div class="paragraph">
<p><strong>Use Case 1.1</strong></p>
</div>
<div class="paragraph">
<p>As an operator</p>
</div>
<div class="paragraph">
<p>I can pack enough containers on a host</p>
</div>
<div class="paragraph">
<p>So that I make a nice profit</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given an hourly cost <em>C</em> for a node <em>N</em></p>
</div>
<div class="paragraph">
<p>And a price <em>p</em> per container</p>
</div>
<div class="paragraph">
<p>When I pack <em>n</em> containers on <em>N</em></p>
</div>
<div class="paragraph">
<p>Then <em>n</em> * <em>p</em> is <em>mucho mas</em> than <em>C</em></p>
</div>
<div class="paragraph">
<p><strong>Use Case 1.2</strong></p>
</div>
<div class="paragraph">
<p>As an operator</p>
</div>
<div class="paragraph">
<p>I can pack 10x more idle than active containers on a host</p>
</div>
<div class="paragraph">
<p>So that I make even more profit</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given <em>x</em> active containers on a node</p>
</div>
<div class="paragraph">
<p>When I add 10 * <em>x</em> idle containers</p>
</div>
<div class="paragraph">
<p>Then the node still runs fine</p>
</div>
</div>
<div class="sect2">
<h3 id="low-resource-overhead"><a class="anchor" href="#low-resource-overhead"></a>2 Low Resource Overhead</h3>
<div class="paragraph">
<p>Low additional resource <strong>overhead</strong> compared to current isolation.</p>
</div>
<div class="paragraph">
<p><strong>Use Case 2.1</strong></p>
</div>
<div class="paragraph">
<p>As an operator</p>
</div>
<div class="paragraph">
<p>I can run roughly the same amount of containerized gears on a node than previously</p>
</div>
<div class="paragraph">
<p>So that I can migrate to the container model without having to adjust capacity</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given <em>n</em> gears on a uncontainerized node</p>
</div>
<div class="paragraph">
<p>When I move them to a containerized node of the same size</p>
</div>
<div class="paragraph">
<p>Then they run just the same as before</p>
</div>
</div>
<div class="sect2">
<h3 id="attach-to-container"><a class="anchor" href="#attach-to-container"></a>3 Attach to Container</h3>
<div class="paragraph">
<p>Allow host root to <strong>attach</strong> to the container and run commands inside it, both as container root and container user.</p>
</div>
<div class="paragraph">
<p><strong>Use Case 3.1</strong></p>
</div>
<div class="paragraph">
<p>As a developer</p>
</div>
<div class="paragraph">
<p>I can write OpenShift code</p>
</div>
<div class="paragraph">
<p>That can execute commands in a container under the container’s uid</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given a container</p>
</div>
<div class="paragraph">
<p>When my code calls <code>run_in_container_context(cmd)</code></p>
</div>
<div class="paragraph">
<p>Then `cmd`executes in the container and under the container’s uid</p>
</div>
<div class="paragraph">
<p><strong>Use Case 3.2 (nice-to-have)</strong></p>
</div>
<div class="paragraph">
<p>As a developer</p>
</div>
<div class="paragraph">
<p>I can write OpenShift code</p>
</div>
<div class="paragraph">
<p>That can execute commands in a container as the container’s root user</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given a container</p>
</div>
<div class="paragraph">
<p>When my code calls <code>run_in_container_root_context(cmd)</code></p>
</div>
<div class="paragraph">
<p>Then `cmd`executes in the container and as the container’s root user</p>
</div>
</div>
<div class="sect2">
<h3 id="ability-to-bind-to-localhost"><a class="anchor" href="#ability-to-bind-to-localhost"></a>4 Ability to Bind to localhost</h3>
<div class="paragraph">
<p>Gears must be able to bind to <strong>localhost.</strong></p>
</div>
<div class="paragraph">
<p><strong>Use Case 4.1</strong></p>
</div>
<div class="paragraph">
<p>As a cartridge developer</p>
</div>
<div class="paragraph">
<p>I can bind to localhost as necessary</p>
</div>
<div class="paragraph">
<p>So that I can write cartridges for software that requires this</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given a cartridge that binds to localhost</p>
</div>
<div class="paragraph">
<p>When I deploy and start it</p>
</div>
<div class="paragraph">
<p>Then t listens on localhost</p>
</div>
</div>
<div class="sect2">
<h3 id="security"><a class="anchor" href="#security"></a>5 Security</h3>
<div class="paragraph">
<p>The containerization needs to be <strong>secure</strong> in all relevant senses of the word.</p>
</div>
<div class="paragraph">
<p><strong>Use Case 5.1</strong></p>
</div>
<div class="paragraph">
<p>As a customer</p>
</div>
<div class="paragraph">
<p>I want my application to be securely hosted</p>
</div>
<div class="paragraph">
<p>So that I can sleep at night</p>
</div>
<div class="paragraph">
<p><strong>Test 1</strong></p>
</div>
<div class="paragraph">
<p>Given a malicious application</p>
</div>
<div class="paragraph">
<p>When I try to access other applications’ processes</p>
</div>
<div class="paragraph">
<p>Then my access is blocked</p>
</div>
<div class="paragraph">
<p><strong>Test 2</strong></p>
</div>
<div class="paragraph">
<p>Given a malicious application</p>
</div>
<div class="paragraph">
<p>When I try and consume all the CPU on the machine</p>
</div>
<div class="paragraph">
<p>Then I am limited to my allocation</p>
</div>
<div class="paragraph">
<p><strong>Test 3</strong></p>
</div>
<div class="paragraph">
<p>Given a malicious application</p>
</div>
<div class="paragraph">
<p>When I try and consume all the memory on the machine</p>
</div>
<div class="paragraph">
<p>Then I am limited to my allocation</p>
</div>
<div class="paragraph">
<p><strong>Test 4</strong></p>
</div>
<div class="paragraph">
<p>Given a malicious application</p>
</div>
<div class="paragraph">
<p>When I try a fork bomb</p>
</div>
<div class="paragraph">
<p>Then I am limited to a fixed process count</p>
</div>
<div class="paragraph">
<p><strong>Use Case 5.2</strong></p>
</div>
<div class="paragraph">
<p>As a user</p>
</div>
<div class="paragraph">
<p>I want the application to be secure</p>
</div>
<div class="paragraph">
<p>So that I can trust it with my data</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given a known vulnerability</p>
</div>
<div class="paragraph">
<p>When I try to exploit it</p>
</div>
<div class="paragraph">
<p>Then the SELinux policies limit my ability to exploit it</p>
</div>
<div class="paragraph">
<p><strong>Use Case 5.3</strong></p>
</div>
<div class="paragraph">
<p>As an operator</p>
</div>
<div class="paragraph">
<p>I want OpenShift to be secure</p>
</div>
<div class="paragraph">
<p>So that rogue apps can’t compromise my installation or other customers</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given an infected cartridge</p>
</div>
<div class="paragraph">
<p>When it tries to install itself outside of the container</p>
</div>
<div class="paragraph">
<p>Then the installation fails and is logged</p>
</div>
</div>
<div class="sect2">
<h3 id="memory-control"><a class="anchor" href="#memory-control"></a>6 Memory Control</h3>
<div class="paragraph">
<p><strong>Memory usage</strong> must be controllable in both user and kernel land (separate goal because the respective cgroups controller is not available).</p>
</div>
<div class="paragraph">
<p><strong>Use Case 6.1</strong></p>
</div>
<div class="paragraph">
<p>As a customer</p>
</div>
<div class="paragraph">
<p>I can not craft code that allocates arbitrary memory in kernel space</p>
</div>
<div class="paragraph">
<p>So that I can’t DoS the node</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given an application</p>
</div>
<div class="paragraph">
<p>When I attempt to start a fork bomb in a hook</p>
</div>
<div class="paragraph">
<p>Then it fails as soon as task_structs exceed my allotted kernel memory</p>
</div>
</div>
<div class="sect2">
<h3 id="contained-root-commands"><a class="anchor" href="#contained-root-commands"></a>7 Contained Root Commands</h3>
<div class="paragraph">
<p>Applications should be able to run <strong>contained root commands</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> this need not be comprehensive—running as root within a container and making root changes to the container filesystem may be enough.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> this can be rephrased as: running as root within a container but not getting system or unrestricted SELinux labels.</p>
</div>
<div class="paragraph">
<p><strong>Use Case 7.1</strong></p>
</div>
<div class="paragraph">
<p>As a customer</p>
</div>
<div class="paragraph">
<p>I can become root</p>
</div>
<div class="paragraph">
<p>So that I can bind to ports &lt; 1024</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given an application</p>
</div>
<div class="paragraph">
<p>When I run a sudo command in a hook</p>
</div>
<div class="paragraph">
<p>Then that command succeeds</p>
</div>
<div class="paragraph">
<p><strong>Use Case 7.2</strong></p>
</div>
<div class="paragraph">
<p>As a customer</p>
</div>
<div class="paragraph">
<p>I can become root</p>
</div>
<div class="paragraph">
<p>So that I can read my system logs</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given an application</p>
</div>
<div class="paragraph">
<p>When I ssh into my gear</p>
</div>
<div class="paragraph">
<p>Then I can sudo to read my (container) system logs</p>
</div>
</div>
<div class="sect2">
<h3 id="routing-to-containerized-gears"><a class="anchor" href="#routing-to-containerized-gears"></a>8 Routing to Containerized Gears</h3>
<div class="paragraph">
<p>Users and customers must to be able to <strong>connect</strong> to their containerized gears.</p>
</div>
<div class="paragraph">
<p><strong>Use Case 8.1</strong></p>
</div>
<div class="paragraph">
<p>As a user</p>
</div>
<div class="paragraph">
<p>I can reach an application</p>
</div>
<div class="paragraph">
<p>So that I can reach an application</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given an application</p>
</div>
<div class="paragraph">
<p>When I go to its root URL</p>
</div>
<div class="paragraph">
<p>Then I see the application</p>
</div>
<div class="paragraph">
<p><strong>Use Case 8.2</strong></p>
</div>
<div class="paragraph">
<p>As a customer</p>
</div>
<div class="paragraph">
<p>I can supply iptable-like rules</p>
</div>
<div class="paragraph">
<p>So that I can control network access to my application</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given a single-gear application</p>
</div>
<div class="paragraph">
<p>When I supply a rule to block IP address <em>A</em> and redeploy the application</p>
</div>
<div class="paragraph">
<p>Then traffic from <em>A</em> to it is blocked</p>
</div>
</div>
<div class="sect2">
<h3 id="patching"><a class="anchor" href="#patching"></a>9 Patching</h3>
<div class="paragraph">
<p>Support <strong>patching</strong> of container packages.</p>
</div>
<div class="paragraph">
<p><strong>Use Case 9.1</strong></p>
</div>
<div class="paragraph">
<p>As a customer</p>
</div>
<div class="paragraph">
<p>I can install a debug version of a system library</p>
</div>
<div class="paragraph">
<p>So that I can see why my application bombs</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given an application</p>
</div>
<div class="paragraph">
<p>When I install a debug library</p>
</div>
<div class="paragraph">
<p>Then I see debug output in my logs</p>
</div>
<div class="paragraph">
<p><strong>Use Case 9.2</strong></p>
</div>
<div class="paragraph">
<p>As a customer</p>
</div>
<div class="paragraph">
<p>I can downgrade an upgraded system library</p>
</div>
<div class="paragraph">
<p>So that my application continues to run with the library it was certified against</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given an application</p>
</div>
<div class="paragraph">
<p>When I install an older version of a system library</p>
</div>
<div class="paragraph">
<p>Then it runs with that older version</p>
</div>
<div class="paragraph">
<p><strong>Use Case 9.3</strong></p>
</div>
<div class="paragraph">
<p>As a cartridge developer</p>
</div>
<div class="paragraph">
<p>I can bundle my cartridge with newer versions of system libraries as necessary</p>
</div>
<div class="paragraph">
<p>So that the software in my cartridge runs</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given a cartridge software that requires a newer version of a system library</p>
</div>
<div class="paragraph">
<p>When I bundle that version with my cartridge</p>
</div>
<div class="paragraph">
<p>Then the cartridge runs</p>
</div>
</div>
<div class="sect2">
<h3 id="virsh-compatibility"><a class="anchor" href="#virsh-compatibility"></a>10 virsh Compatibility</h3>
<div class="paragraph">
<p>Some form of <strong>virsh compatibility</strong> for ecosystem reasons.</p>
</div>
</div>
<div class="sect2">
<h3 id="portability"><a class="anchor" href="#portability"></a>11 Portability</h3>
<div class="paragraph">
<p><strong>Portability</strong> at least between RHT distros and Debian.</p>
</div>
<div class="paragraph">
<p><strong>Use Case 11.1</strong></p>
</div>
<div class="paragraph">
<p>As an operator</p>
</div>
<div class="paragraph">
<p>I can install OpenShift on both RHEL and Ubuntu</p>
</div>
<div class="paragraph">
<p>So that I can offer customers a choice</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>Given a RHEL and Ubuntu image</p>
</div>
<div class="paragraph">
<p>When I install OpenShift on both</p>
</div>
<div class="paragraph">
<p>Then I can run binary-dependent applications on their respective distro</p>
</div>
<div class="paragraph">
<p>And binary-independent applications on both</p>
</div>
</div>
</div>
</div></div>
<div id="footer">
<div id="footer-text">
<br>
Last updated 2014-02-18 10:21:13 EST
</div>
<!-- Google Analytics -->
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40375612-1']);
  _gaq.push(['_setDomainName', 'openshift.github.io']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  
  $(document).ready(function() {
    _gaq.push(function() {
      $('a:not([href^="http"])').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Internal Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
      $('a[href^="http"]').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Outbound Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
    });
  });
</script>
<!-- Google Code for Remarketing -->
<script>
  var google_conversion_id = 1007064360;
  var google_conversion_label = "7jfmCMC5ugQQqKqa4AM";
  var google_custom_params = window.google_tag_params;
  var google_remarketing_only = true;
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script>
<noscript>
<div style="display: inline;">
<img alt="" height="1" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1007064360/?value=0&amp;label=7jfmCMC5ugQQqKqa4AM&amp;guid=ON&amp;script=0" style="border-style: none;" width="1">
</div>
</noscript>
</div>
</body>
</html>