<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: OpenShift::Runtime::ApplicationContainer
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../OpenShift.html" title="OpenShift (module)">OpenShift</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Runtime.html" title="OpenShift::Runtime (module)">Runtime</a></span></span>
     &raquo; 
    <span class="title">ApplicationContainer</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: OpenShift::Runtime::ApplicationContainer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OpenShift::Runtime::ApplicationContainer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2">ActiveModel::Observing, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions (module)">OpenShift::Runtime::ApplicationContainerExt::CartridgeActions</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html" title="OpenShift::Runtime::ApplicationContainerExt::Environment (module)">OpenShift::Runtime::ApplicationContainerExt::Environment</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Setup.html" title="OpenShift::Runtime::ApplicationContainerExt::Setup (module)">OpenShift::Runtime::ApplicationContainerExt::Setup</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Snapshots.html" title="OpenShift::Runtime::ApplicationContainerExt::Snapshots (module)">OpenShift::Runtime::ApplicationContainerExt::Snapshots</a></span>, <span class='object_link'><a href="ManagedFiles.html" title="OpenShift::Runtime::ManagedFiles (module)">ManagedFiles</a></span>, <span class='object_link'><a href="NodeLogger.html" title="OpenShift::Runtime::NodeLogger (module)">NodeLogger</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h2 id="label-Application+Container">Application Container<span><a href="#label-Application+Container">&para;</a> <a href="#documentation">&uarr;</a></span></h2>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="GEAR_TO_GEAR_SSH-constant" class="">GEAR_TO_GEAR_SSH =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/usr/bin/ssh -q -o &#39;BatchMode=yes&#39; -o &#39;StrictHostKeyChecking=no&#39; -i $OPENSHIFT_APP_SSH_KEY </span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="DEFAULT_SKEL_DIR-constant" class="">DEFAULT_SKEL_DIR =
          
        </dt>
        <dd><pre class="code"><span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Config</span><span class='op'>::</span><span class='const'>CONF_DIR</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>skel</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></pre></dd>
      
    </dl>
  



  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="ApplicationContainerExt/Environment.html" title="OpenShift::Runtime::ApplicationContainerExt::Environment (module)">OpenShift::Runtime::ApplicationContainerExt::Environment</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationContainerExt/Environment.html#RESERVED_VARIABLE_NAMES-constant" title="OpenShift::Runtime::ApplicationContainerExt::Environment::RESERVED_VARIABLE_NAMES (constant)">OpenShift::Runtime::ApplicationContainerExt::Environment::RESERVED_VARIABLE_NAMES</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#USER_VARIABLE_MAX_COUNT-constant" title="OpenShift::Runtime::ApplicationContainerExt::Environment::USER_VARIABLE_MAX_COUNT (constant)">OpenShift::Runtime::ApplicationContainerExt::Environment::USER_VARIABLE_MAX_COUNT</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#USER_VARIABLE_NAME_MAX_SIZE-constant" title="OpenShift::Runtime::ApplicationContainerExt::Environment::USER_VARIABLE_NAME_MAX_SIZE (constant)">OpenShift::Runtime::ApplicationContainerExt::Environment::USER_VARIABLE_NAME_MAX_SIZE</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#USER_VARIABLE_VALUE_MAX_SIZE-constant" title="OpenShift::Runtime::ApplicationContainerExt::Environment::USER_VARIABLE_VALUE_MAX_SIZE (constant)">OpenShift::Runtime::ApplicationContainerExt::Environment::USER_VARIABLE_VALUE_MAX_SIZE</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="ManagedFiles.html" title="OpenShift::Runtime::ManagedFiles (module)">ManagedFiles</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ManagedFiles.html#FILENAME_BLACKLIST-constant" title="OpenShift::Runtime::ManagedFiles::FILENAME_BLACKLIST (constant)">ManagedFiles::FILENAME_BLACKLIST</a></span>, <span class='object_link'><a href="ManagedFiles.html#IMMUTABLE_FILES-constant" title="OpenShift::Runtime::ManagedFiles::IMMUTABLE_FILES (constant)">ManagedFiles::IMMUTABLE_FILES</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="NodeLogger.html" title="OpenShift::Runtime::NodeLogger (module)">NodeLogger</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="NodeLogger.html#DEFAULT_LOGGER_CLASS-constant" title="OpenShift::Runtime::NodeLogger::DEFAULT_LOGGER_CLASS (constant)">NodeLogger::DEFAULT_LOGGER_CLASS</a></span></p>


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#application_name-instance_method" title="#application_name (instance method)">- (Object) <strong>application_name</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute application_name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#application_uuid-instance_method" title="#application_uuid (instance method)">- (Object) <strong>application_uuid</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute application_uuid.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_dir-instance_method" title="#base_dir (instance method)">- (Object) <strong>base_dir</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute base_dir.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cartridge_model-instance_method" title="#cartridge_model (instance method)">- (Object) <strong>cartridge_model</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute cartridge_model.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#container_dir-instance_method" title="#container_dir (instance method)">- (Object) <strong>container_dir</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute container_dir.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#container_name-instance_method" title="#container_name (instance method)">- (Object) <strong>container_name</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute container_name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#container_plugin-instance_method" title="#container_plugin (instance method)">- (Object) <strong>container_plugin</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute container_plugin.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#gecos-instance_method" title="#gecos (instance method)">- (Object) <strong>gecos</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute gecos.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#gid-instance_method" title="#gid (instance method)">- (Object) <strong>gid</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute gid.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#hourglass-instance_method" title="#hourglass (instance method)">- (Object) <strong>hourglass</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute hourglass.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#namespace-instance_method" title="#namespace (instance method)">- (Object) <strong>namespace</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute namespace.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#quota_blocks-instance_method" title="#quota_blocks (instance method)">- (Object) <strong>quota_blocks</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute quota_blocks.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#quota_files-instance_method" title="#quota_files (instance method)">- (Object) <strong>quota_files</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute quota_files.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#skel_dir-instance_method" title="#skel_dir (instance method)">- (Object) <strong>skel_dir</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute skel_dir.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#state-instance_method" title="#state (instance method)">- (Object) <strong>state</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute state.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#supplementary_groups-instance_method" title="#supplementary_groups (instance method)">- (Object) <strong>supplementary_groups</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute supplementary_groups.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#uid-instance_method" title="#uid (instance method)">- (Object) <strong>uid</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute uid.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#uuid-instance_method" title="#uuid (instance method)">- (Object) <strong>uuid</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute uuid.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all-class_method" title="all (class method)">+ (Object) <strong>all</strong>(hourglass = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Return an enumerator which provides an ApplicationContainer object
for every OpenShift gear in the system.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exists%3F-class_method" title="exists? (class method)">+ (Boolean) <strong>exists?</strong>(container_uuid) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_uuid-class_method" title="from_uuid (class method)">+ (Object) <strong>from_uuid</strong>(container_uuid, hourglass = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Return a ApplicationContainer object loaded from the gear_uuid on
the system.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#passwd_for-class_method" title="passwd_for (class method)">+ (Object) <strong>passwd_for</strong>(container_uuid) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-instance_method" title="#create (instance method)">- (Object) <strong>create</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>create gear.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">- (Object) <strong>destroy</strong>(skip_hooks = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Destroy gear.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disk_usage_exceeds%3F-instance_method" title="#disk_usage_exceeds? (instance method)">- (Boolean) <strong>disk_usage_exceeds?</strong>(max_percent) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <code>true</code> if the user&#39;s disk block usage meets or
exceeds <code>max_percent</code> of the configured block limit, otherwise
<code>false</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#force_stop-instance_method" title="#force_stop (instance method)">- (Object) <strong>force_stop</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Sets the app state to “stopped” and causes an immediate forced
termination of all gear processes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gear_level_tidy_git-instance_method" title="#gear_level_tidy_git (instance method)">- (Object) <strong>gear_level_tidy_git</strong>(gear_repo_dir) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gear_level_tidy_tmp-instance_method" title="#gear_level_tidy_tmp (instance method)">- (Object) <strong>gear_level_tidy_tmp</strong>(gear_tmp_dir) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_cartridge-instance_method" title="#get_cartridge (instance method)">- (Object) <strong>get_cartridge</strong>(cart_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_gear_groups-instance_method" title="#get_gear_groups (instance method)">- (Object) <strong>get_gear_groups</strong>(gear_env) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the gear groups for the application this gear is part of.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_ip_addr-instance_method" title="#get_ip_addr (instance method)">- (Object) <strong>get_ip_addr</strong>(host_id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_secondary_gear_groups-instance_method" title="#get_secondary_gear_groups (instance method)">- (Object) <strong>get_secondary_gear_groups</strong>(groups) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Given a list of gear groups, return the secondary gear groups.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#idle_gear-instance_method" title="#idle_gear (instance method)">- (Object) <strong>idle_gear</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Idles the gear if there is no stop lock and state is not already
<code>STOPPED</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (ApplicationContainer) <strong>initialize</strong>(application_uuid, container_uuid, user_uid = nil, application_name = nil, container_name = nil, namespace = nil, quota_blocks = nil, quota_files = nil, hourglass = nil) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of ApplicationContainer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kill_procs-instance_method" title="#kill_procs (instance method)">- (Object) <strong>kill_procs</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Kill processes belonging to this app container.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_proxy_mappings-instance_method" title="#list_proxy_mappings (instance method)">- (Object) <strong>list_proxy_mappings</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (Object) <strong>name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#report_build_analytics-instance_method" title="#report_build_analytics (instance method)">- (Object) <strong>report_build_analytics</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Send a fire-and-forget request to the broker to report build analytics.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_permission-instance_method" title="#reset_permission (instance method)">- (Object) <strong>reset_permission</strong>(paths) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_permission_R-instance_method" title="#reset_permission_R (instance method)">- (Object) <strong>reset_permission_R</strong>(paths) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_in_container_context-instance_method" title="#run_in_container_context (instance method)">- (Object) <strong>run_in_container_context</strong>(command, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>run_in_container_context(command, [, options]) -&gt; [stdout, stderr, exit
status].</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_ro_permission-instance_method" title="#set_ro_permission (instance method)">- (Object) <strong>set_ro_permission</strong>(paths) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_ro_permission_R-instance_method" title="#set_ro_permission_R (instance method)">- (Object) <strong>set_ro_permission_R</strong>(paths) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_rw_permission-instance_method" title="#set_rw_permission (instance method)">- (Object) <strong>set_rw_permission</strong>(paths) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_rw_permission_R-instance_method" title="#set_rw_permission_R (instance method)">- (Object) <strong>set_rw_permission_R</strong>(paths) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_gear-instance_method" title="#start_gear (instance method)">- (Object) <strong>start_gear</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the application state to <code>STARTED</code> and starts the gear.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_gear-instance_method" title="#stop_gear (instance method)">- (Object) <strong>stop_gear</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the application state to <code>STOPPED</code> and stops the gear.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_lock%3F-instance_method" title="#stop_lock? (instance method)">- (Boolean) <strong>stop_lock?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stopped_status_attr-instance_method" title="#stopped_status_attr (instance method)">- (Object) <strong>stopped_status_attr</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tidy-instance_method" title="#tidy (instance method)">- (Object) <strong>tidy</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: Cleans up the gear, providing any installed cartridges with the
opportunity to perform their own cleanup operations via the tidy hook.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tidy_action-instance_method" title="#tidy_action (instance method)">- (Object) <strong>tidy_action</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Executes a block, trapping ShellExecutionExceptions and treating them as
warnings.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unidle_gear-instance_method" title="#unidle_gear (instance method)">- (Object) <strong>unidle_gear</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unidles the gear.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions (module)">OpenShift::Runtime::ApplicationContainerExt::CartridgeActions</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#build-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#build (method)">#build</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#configure-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#configure (method)">#configure</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#connector_execute-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#connector_execute (method)">#connector_execute</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#create_public_endpoint-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#create_public_endpoint (method)">#create_public_endpoint</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#create_public_endpoints-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#create_public_endpoints (method)">#create_public_endpoints</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#deconfigure-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#deconfigure (method)">#deconfigure</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#delete_public_endpoints-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#delete_public_endpoints (method)">#delete_public_endpoints</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#deploy-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#deploy (method)">#deploy</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#deploy_httpd_proxy-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#deploy_httpd_proxy (method)">#deploy_httpd_proxy</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#post_configure-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#post_configure (method)">#post_configure</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#post_receive-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#post_receive (method)">#post_receive</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#pre_receive-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#pre_receive (method)">#pre_receive</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#reload-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#reload (method)">#reload</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#remote_deploy-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#remote_deploy (method)">#remote_deploy</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#remove_httpd_proxy-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#remove_httpd_proxy (method)">#remove_httpd_proxy</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#restart-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#restart (method)">#restart</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#restart_httpd_proxy-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#restart_httpd_proxy (method)">#restart_httpd_proxy</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#start-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#start (method)">#start</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#status-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#status (method)">#status</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#stop-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#stop (method)">#stop</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#threaddump-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#threaddump (method)">#threaddump</a></span>, <span class='object_link'><a href="ApplicationContainerExt/CartridgeActions.html#unsubscribe-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::CartridgeActions#unsubscribe (method)">#unsubscribe</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ApplicationContainerExt/Snapshots.html" title="OpenShift::Runtime::ApplicationContainerExt::Snapshots (module)">OpenShift::Runtime::ApplicationContainerExt::Snapshots</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationContainerExt/Snapshots.html#extract_restore_archive-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Snapshots#extract_restore_archive (method)">#extract_restore_archive</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Snapshots.html#handle_scalable_restore-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Snapshots#handle_scalable_restore (method)">#handle_scalable_restore</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Snapshots.html#handle_scalable_snapshot-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Snapshots#handle_scalable_snapshot (method)">#handle_scalable_snapshot</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Snapshots.html#prepare_for_restore-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Snapshots#prepare_for_restore (method)">#prepare_for_restore</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Snapshots.html#restore-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Snapshots#restore (method)">#restore</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Snapshots.html#snapshot-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Snapshots#snapshot (method)">#snapshot</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Snapshots.html#write_snapshot_archive-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Snapshots#write_snapshot_archive (method)">#write_snapshot_archive</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ApplicationContainerExt/Setup.html" title="OpenShift::Runtime::ApplicationContainerExt::Setup (module)">OpenShift::Runtime::ApplicationContainerExt::Setup</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationContainerExt/Setup.html#generate_ssh_key-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Setup#generate_ssh_key (method)">#generate_ssh_key</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Setup.html#initialize_homedir-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Setup#initialize_homedir (method)">#initialize_homedir</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Setup.html#next_uid-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Setup#next_uid (method)">#next_uid</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ApplicationContainerExt/Environment.html" title="OpenShift::Runtime::ApplicationContainerExt::Environment (module)">OpenShift::Runtime::ApplicationContainerExt::Environment</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationContainerExt/Environment.html#add_broker_auth-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#add_broker_auth (method)">#add_broker_auth</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#add_env_var-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#add_env_var (method)">#add_env_var</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#add_ssh_key-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#add_ssh_key (method)">#add_ssh_key</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#get_ssh_key_cmd_entry-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#get_ssh_key_cmd_entry (method)">#get_ssh_key_cmd_entry</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#modify_ssh_keys-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#modify_ssh_keys (method)">#modify_ssh_keys</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#remove_broker_auth-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#remove_broker_auth (method)">#remove_broker_auth</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#remove_env_var-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#remove_env_var (method)">#remove_env_var</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#remove_ssh_key-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#remove_ssh_key (method)">#remove_ssh_key</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#replace_ssh_keys-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#replace_ssh_keys (method)">#replace_ssh_keys</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#user_var_add-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#user_var_add (method)">#user_var_add</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#user_var_list-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#user_var_list (method)">#user_var_list</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#user_var_push-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#user_var_push (method)">#user_var_push</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#user_var_remove-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#user_var_remove (method)">#user_var_remove</a></span>, <span class='object_link'><a href="ApplicationContainerExt/Environment.html#validate_ssh_keys-instance_method" title="OpenShift::Runtime::ApplicationContainerExt::Environment#validate_ssh_keys (method)">#validate_ssh_keys</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ManagedFiles.html" title="OpenShift::Runtime::ManagedFiles (module)">ManagedFiles</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ManagedFiles.html#locked_files-instance_method" title="OpenShift::Runtime::ManagedFiles#locked_files (method)">#locked_files</a></span>, <span class='object_link'><a href="ManagedFiles.html#managed_files-instance_method" title="OpenShift::Runtime::ManagedFiles#managed_files (method)">#managed_files</a></span>, <span class='object_link'><a href="ManagedFiles.html#processed_templates-instance_method" title="OpenShift::Runtime::ManagedFiles#processed_templates (method)">#processed_templates</a></span>, <span class='object_link'><a href="ManagedFiles.html#restore_transforms-instance_method" title="OpenShift::Runtime::ManagedFiles#restore_transforms (method)">#restore_transforms</a></span>, <span class='object_link'><a href="ManagedFiles.html#setup_rewritten-instance_method" title="OpenShift::Runtime::ManagedFiles#setup_rewritten (method)">#setup_rewritten</a></span>, <span class='object_link'><a href="ManagedFiles.html#snapshot_exclusions-instance_method" title="OpenShift::Runtime::ManagedFiles#snapshot_exclusions (method)">#snapshot_exclusions</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="NodeLogger.html" title="OpenShift::Runtime::NodeLogger (module)">NodeLogger</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="NodeLogger.html#context-class_method" title="OpenShift::Runtime::NodeLogger.context (method)">context</a></span>, <span class='object_link'><a href="NodeLogger.html#create_logger-class_method" title="OpenShift::Runtime::NodeLogger.create_logger (method)">create_logger</a></span>, <span class='object_link'><a href="NodeLogger.html#disable-class_method" title="OpenShift::Runtime::NodeLogger.disable (method)">disable</a></span>, <span class='object_link'><a href="NodeLogger.html#load_config-class_method" title="OpenShift::Runtime::NodeLogger.load_config (method)">load_config</a></span>, <span class='object_link'><a href="NodeLogger.html#logger-class_method" title="OpenShift::Runtime::NodeLogger.logger (method)">logger</a></span>, <span class='object_link'><a href="NodeLogger.html#logger-instance_method" title="OpenShift::Runtime::NodeLogger#logger (method)">#logger</a></span>, <span class='object_link'><a href="NodeLogger.html#set_logger-class_method" title="OpenShift::Runtime::NodeLogger.set_logger (method)">set_logger</a></span>, <span class='object_link'><a href="NodeLogger.html#stderr-class_method" title="OpenShift::Runtime::NodeLogger.stderr (method)">stderr</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="OpenShift::Runtime::ApplicationContainer (class)">ApplicationContainer</a></span></tt>) <strong>initialize</strong>(application_uuid, container_uuid, user_uid = nil, application_name = nil, container_name = nil, namespace = nil, quota_blocks = nil, quota_files = nil, hourglass = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A new instance of ApplicationContainer</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_application_uuid'>application_uuid</span><span class='comma'>,</span> <span class='id identifier rubyid_container_uuid'>container_uuid</span><span class='comma'>,</span> <span class='id identifier rubyid_user_uid'>user_uid</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_application_name'>application_name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_container_name'>container_name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_quota_blocks'>quota_blocks</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_quota_files'>quota_files</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_hourglass'>hourglass</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span>           <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Config</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@uuid</span>             <span class='op'>=</span> <span class='id identifier rubyid_container_uuid'>container_uuid</span>
  <span class='ivar'>@application_uuid</span> <span class='op'>=</span> <span class='id identifier rubyid_application_uuid'>application_uuid</span>
  <span class='ivar'>@container_name</span>   <span class='op'>=</span> <span class='id identifier rubyid_container_name'>container_name</span>
  <span class='ivar'>@application_name</span> <span class='op'>=</span> <span class='id identifier rubyid_application_name'>application_name</span>
  <span class='ivar'>@namespace</span>        <span class='op'>=</span> <span class='id identifier rubyid_namespace'>namespace</span>
  <span class='ivar'>@quota_blocks</span>     <span class='op'>=</span> <span class='id identifier rubyid_quota_blocks'>quota_blocks</span>
  <span class='ivar'>@quota_files</span>      <span class='op'>=</span> <span class='id identifier rubyid_quota_files'>quota_files</span>
  <span class='ivar'>@uid</span>              <span class='op'>=</span> <span class='id identifier rubyid_user_uid'>user_uid</span>
  <span class='ivar'>@gid</span>              <span class='op'>=</span> <span class='id identifier rubyid_user_uid'>user_uid</span>
  <span class='ivar'>@base_dir</span>         <span class='op'>=</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GEAR_BASE_DIR</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@skel_dir</span>         <span class='op'>=</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GEAR_SKEL_DIR</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='const'>DEFAULT_SKEL_DIR</span>
  <span class='ivar'>@supplementary_groups</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GEAR_SUPPLEMENTARY_GROUPS</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@hourglass</span>        <span class='op'>=</span> <span class='id identifier rubyid_hourglass'>hourglass</span> <span class='op'>||</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>Hourglass</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>3600</span><span class='rparen'>)</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_user_info'>user_info</span>         <span class='op'>=</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getpwnam'>getpwnam</span><span class='lparen'>(</span><span class='ivar'>@uuid</span><span class='rparen'>)</span>
    <span class='ivar'>@uid</span>              <span class='op'>=</span> <span class='id identifier rubyid_user_info'>user_info</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span>
    <span class='ivar'>@gid</span>              <span class='op'>=</span> <span class='id identifier rubyid_user_info'>user_info</span><span class='period'>.</span><span class='id identifier rubyid_gid'>gid</span>
    <span class='ivar'>@gecos</span>            <span class='op'>=</span> <span class='id identifier rubyid_user_info'>user_info</span><span class='period'>.</span><span class='id identifier rubyid_gecos'>gecos</span>
    <span class='ivar'>@container_dir</span>    <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user_info'>user_info</span><span class='period'>.</span><span class='id identifier rubyid_dir'>dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@container_plugin</span> <span class='op'>=</span> <span class='const'>Containerization</span><span class='op'>::</span><span class='const'>Plugin</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>ArgumentError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='ivar'>@uid</span>              <span class='op'>=</span> <span class='id identifier rubyid_user_uid'>user_uid</span>
    <span class='ivar'>@gid</span>              <span class='op'>=</span> <span class='id identifier rubyid_user_uid'>user_uid</span> 
    <span class='ivar'>@gecos</span>            <span class='op'>=</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GEAR_GECOS</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OO application container</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@container_dir</span>    <span class='op'>=</span> <span class='const'>Containerization</span><span class='op'>::</span><span class='const'>Plugin</span><span class='period'>.</span><span class='id identifier rubyid_container_dir'>container_dir</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='ivar'>@container_plugin</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='ivar'>@state</span>           <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>ApplicationState</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='ivar'>@cartridge_model</span> <span class='op'>=</span> <span class='const'>V2CartridgeModel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@config</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='ivar'>@state</span><span class='comma'>,</span> <span class='ivar'>@hourglass</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="application_name-instance_method">
  
    - (<tt>Object</tt>) <strong>application_name</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute application_name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_application_name'>application_name</span>
  <span class='ivar'>@application_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="application_uuid-instance_method">
  
    - (<tt>Object</tt>) <strong>application_uuid</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute application_uuid</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_application_uuid'>application_uuid</span>
  <span class='ivar'>@application_uuid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="base_dir-instance_method">
  
    - (<tt>Object</tt>) <strong>base_dir</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute base_dir</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_base_dir'>base_dir</span>
  <span class='ivar'>@base_dir</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="cartridge_model-instance_method">
  
    - (<tt>Object</tt>) <strong>cartridge_model</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute cartridge_model</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cartridge_model'>cartridge_model</span>
  <span class='ivar'>@cartridge_model</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="container_dir-instance_method">
  
    - (<tt>Object</tt>) <strong>container_dir</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute container_dir</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_container_dir'>container_dir</span>
  <span class='ivar'>@container_dir</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="container_name-instance_method">
  
    - (<tt>Object</tt>) <strong>container_name</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute container_name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_container_name'>container_name</span>
  <span class='ivar'>@container_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="container_plugin-instance_method">
  
    - (<tt>Object</tt>) <strong>container_plugin</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute container_plugin</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_container_plugin'>container_plugin</span>
  <span class='ivar'>@container_plugin</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="gecos-instance_method">
  
    - (<tt>Object</tt>) <strong>gecos</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute gecos</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gecos'>gecos</span>
  <span class='ivar'>@gecos</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="gid=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="gid-instance_method">
  
    - (<tt>Object</tt>) <strong>gid</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute gid</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gid'>gid</span>
  <span class='ivar'>@gid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="hourglass-instance_method">
  
    - (<tt>Object</tt>) <strong>hourglass</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute hourglass</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hourglass'>hourglass</span>
  <span class='ivar'>@hourglass</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="namespace-instance_method">
  
    - (<tt>Object</tt>) <strong>namespace</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute namespace</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_namespace'>namespace</span>
  <span class='ivar'>@namespace</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="quota_blocks-instance_method">
  
    - (<tt>Object</tt>) <strong>quota_blocks</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute quota_blocks</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_quota_blocks'>quota_blocks</span>
  <span class='ivar'>@quota_blocks</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="quota_files-instance_method">
  
    - (<tt>Object</tt>) <strong>quota_files</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute quota_files</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_quota_files'>quota_files</span>
  <span class='ivar'>@quota_files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="skel_dir-instance_method">
  
    - (<tt>Object</tt>) <strong>skel_dir</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute skel_dir</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_skel_dir'>skel_dir</span>
  <span class='ivar'>@skel_dir</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="state-instance_method">
  
    - (<tt>Object</tt>) <strong>state</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute state</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_state'>state</span>
  <span class='ivar'>@state</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="supplementary_groups-instance_method">
  
    - (<tt>Object</tt>) <strong>supplementary_groups</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute supplementary_groups</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_supplementary_groups'>supplementary_groups</span>
  <span class='ivar'>@supplementary_groups</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="uid=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="uid-instance_method">
  
    - (<tt>Object</tt>) <strong>uid</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute uid</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uid'>uid</span>
  <span class='ivar'>@uid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="uuid-instance_method">
  
    - (<tt>Object</tt>) <strong>uuid</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute uuid</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uuid'>uuid</span>
  <span class='ivar'>@uuid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="all-class_method">
  
    + (<tt>Object</tt>) <strong>all</strong>(hourglass = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Return an enumerator which provides an ApplicationContainer object
for every OpenShift gear in the system.</p>

<p>Caveat: the quota information will not be populated.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 566</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='lparen'>(</span><span class='id identifier rubyid_hourglass'>hourglass</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'>Enumerator</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_yielder'>yielder</span><span class='op'>|</span>
    <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Config</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_gecos'>gecos</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GEAR_GECOS</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OO application container</span><span class='tstring_end'>&quot;</span></span>

    <span class='comment'># Some duplication with from_uuid; it may be expensive to keep re-parsing passwd.
</span>    <span class='comment'># Etc is not reentrent.  Capture the password table in one shot.
</span>    <span class='id identifier rubyid_pwents'>pwents</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_passwd'>passwd</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pwent'>pwent</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_gecos'>gecos</span> <span class='op'>==</span> <span class='id identifier rubyid_gecos'>gecos</span>
        <span class='id identifier rubyid_pwents'>pwents</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_clone'>clone</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_pwents'>pwents</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pwent'>pwent</span><span class='op'>|</span>
      <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>Environ</span><span class='period'>.</span><span class='id identifier rubyid_for_gear'>for_gear</span><span class='lparen'>(</span><span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OPENSHIFT_GEAR_DNS</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OPENSHIFT_GEAR_DNS</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\..*$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^.*\-</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='kw'>begin</span>
        <span class='id identifier rubyid_a'>a</span><span class='op'>=</span><span class='const'>ApplicationContainer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OPENSHIFT_APP_UUID</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OPENSHIFT_APP_NAME</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                                   <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OPENSHIFT_GEAR_NAME</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_hourglass'>hourglass</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='const'>NodeLogger</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed to instantiate ApplicationContainer for uid </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'>/uuid </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OPENSHIFT_APP_UUID</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='const'>NodeLogger</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Backtrace: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_yielder'>yielder</span><span class='period'>.</span><span class='id identifier rubyid_yield'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exists?-class_method">
  
    + (<tt>Boolean</tt>) <strong>exists?</strong>(container_uuid) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 151</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_container_uuid'>container_uuid</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_passwd_for'>passwd_for</span><span class='lparen'>(</span><span class='id identifier rubyid_container_uuid'>container_uuid</span><span class='rparen'>)</span> <span class='kw'>rescue</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="from_uuid-class_method">
  
    + (<tt>Object</tt>) <strong>from_uuid</strong>(container_uuid, hourglass = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Return a ApplicationContainer object loaded from the gear_uuid on
the system</p>

<p>Caveat: the quota information will not be populated.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129
130
131
132
133
134
135
136
137
138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 127</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_from_uuid'>from_uuid</span><span class='lparen'>(</span><span class='id identifier rubyid_container_uuid'>container_uuid</span><span class='comma'>,</span> <span class='id identifier rubyid_hourglass'>hourglass</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_pwent'>pwent</span> <span class='op'>=</span> <span class='id identifier rubyid_passwd_for'>passwd_for</span><span class='lparen'>(</span><span class='id identifier rubyid_container_uuid'>container_uuid</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>Environ</span><span class='period'>.</span><span class='id identifier rubyid_for_gear'>for_gear</span><span class='lparen'>(</span><span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OPENSHIFT_GEAR_DNS</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OPENSHIFT_GEAR_DNS</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\..*$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^.*\-</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='const'>ApplicationContainer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OPENSHIFT_APP_UUID</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_container_uuid'>container_uuid</span><span class='comma'>,</span> <span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OPENSHIFT_APP_NAME</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                           <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OPENSHIFT_GEAR_NAME</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_hourglass'>hourglass</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="passwd_for-class_method">
  
    + (<tt>Object</tt>) <strong>passwd_for</strong>(container_uuid) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146
147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 143</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_passwd_for'>passwd_for</span><span class='lparen'>(</span><span class='id identifier rubyid_container_uuid'>container_uuid</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Config</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_gecos'>gecos</span>  <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GEAR_GECOS</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OO application container</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_pwent'>pwent</span>  <span class='op'>=</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getpwnam'>getpwnam</span><span class='lparen'>(</span><span class='id identifier rubyid_container_uuid'>container_uuid</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Not an OpenShift gear: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_container_uuid'>container_uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_gecos'>gecos</span> <span class='op'>!=</span> <span class='id identifier rubyid_gecos'>gecos</span>
  <span class='id identifier rubyid_pwent'>pwent</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create-instance_method">
  
    - (<tt>Object</tt>) <strong>create</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>create gear</p>
<ul><li>
<p>model/unix_user.rb</p>
</li></ul>

<p>context: root</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create'>create</span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_notify_observers'>notify_observers</span><span class='lparen'>(</span><span class='symbol'>:before_container_create</span><span class='rparen'>)</span>
  <span class='comment'># lock to prevent race condition between create and delete of gear
</span>  <span class='id identifier rubyid_uuid_lock_file'>uuid_lock_file</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/var/lock/oo-create.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_uuid_lock_file'>uuid_lock_file</span><span class='comma'>,</span> <span class='const'>File</span><span class='op'>::</span><span class='const'>RDWR</span><span class='op'>|</span><span class='const'>File</span><span class='op'>::</span><span class='const'>CREAT</span><span class='op'>|</span><span class='const'>File</span><span class='op'>::</span><span class='const'>TRUNC</span><span class='comma'>,</span> <span class='int'>0600</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span> <span class='id identifier rubyid_uuid_lock'>uuid_lock</span> <span class='op'>|</span>
    <span class='id identifier rubyid_uuid_lock'>uuid_lock</span><span class='period'>.</span><span class='id identifier rubyid_fcntl'>fcntl</span><span class='lparen'>(</span><span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>F_SETFD</span><span class='comma'>,</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>FD_CLOEXEC</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_uuid_lock'>uuid_lock</span><span class='period'>.</span><span class='id identifier rubyid_flock'>flock</span><span class='lparen'>(</span><span class='const'>File</span><span class='op'>::</span><span class='const'>LOCK_EX</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_resource'>resource</span> <span class='op'>=</span> <span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Node</span><span class='period'>.</span><span class='id identifier rubyid_resource_limits'>resource_limits</span>
    <span class='id identifier rubyid_no_overcommit_active'>no_overcommit_active</span> <span class='op'>=</span> <span class='id identifier rubyid_resource'>resource</span><span class='period'>.</span><span class='id identifier rubyid_get_bool'>get_bool</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no_overcommit_active</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_overcommit_lock_file'>overcommit_lock_file</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/var/lock/oo-create.overcommit</span><span class='tstring_end'>&quot;</span></span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_overcommit_lock_file'>overcommit_lock_file</span><span class='comma'>,</span> <span class='const'>File</span><span class='op'>::</span><span class='const'>RDWR</span><span class='op'>|</span><span class='const'>File</span><span class='op'>::</span><span class='const'>CREAT</span><span class='op'>|</span><span class='const'>File</span><span class='op'>::</span><span class='const'>TRUNC</span><span class='comma'>,</span> <span class='int'>0o0600</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span> <span class='id identifier rubyid_overcommit_lock'>overcommit_lock</span> <span class='op'>|</span>
      <span class='id identifier rubyid_overcommit_lock'>overcommit_lock</span><span class='period'>.</span><span class='id identifier rubyid_fcntl'>fcntl</span><span class='lparen'>(</span><span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>F_SETFD</span><span class='comma'>,</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>FD_CLOEXEC</span><span class='rparen'>)</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_no_overcommit_active'>no_overcommit_active</span>
        <span class='id identifier rubyid_overcommit_lock'>overcommit_lock</span><span class='period'>.</span><span class='id identifier rubyid_flock'>flock</span><span class='lparen'>(</span><span class='const'>File</span><span class='op'>::</span><span class='const'>LOCK_EX</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_nu'>nu</span> <span class='op'>=</span> <span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Node</span><span class='period'>.</span><span class='id identifier rubyid_node_utilization'>node_utilization</span>
        <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_nu'>nu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gears_active_usage_pct</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&gt;=</span> <span class='int'>100</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_raise'>raise</span> <span class='const'>GearCreationException</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ERROR: Node capacity exceeded, unable to create container </span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='ivar'>@container_plugin</span> <span class='op'>=</span> <span class='const'>Containerization</span><span class='op'>::</span><span class='const'>Plugin</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
      <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span>

      <span class='id identifier rubyid_overcommit_lock'>overcommit_lock</span><span class='period'>.</span><span class='id identifier rubyid_flock'>flock</span><span class='lparen'>(</span><span class='const'>File</span><span class='op'>::</span><span class='const'>LOCK_UN</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_no_overcommit_active'>no_overcommit_active</span>

      <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='id identifier rubyid_generate_ssh_key'>generate_ssh_key</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CREATE_APP_SYMLINKS</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>==</span> <span class='int'>1</span>
      <span class='id identifier rubyid_unobfuscated'>unobfuscated</span> <span class='op'>=</span> <span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='ivar'>@container_dir</span><span class='rparen'>)</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@container_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='ivar'>@namespace</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='kw'>not</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span> <span class='id identifier rubyid_unobfuscated'>unobfuscated</span>
        <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_ln_s'>ln_s</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='ivar'>@container_dir</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_unobfuscated'>unobfuscated</span><span class='comma'>,</span> <span class='symbol'>:force</span><span class='op'>=&gt;</span><span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_uuid_lock'>uuid_lock</span><span class='period'>.</span><span class='id identifier rubyid_flock'>flock</span><span class='lparen'>(</span><span class='const'>File</span><span class='op'>::</span><span class='const'>LOCK_UN</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_notify_observers'>notify_observers</span><span class='lparen'>(</span><span class='symbol'>:after_container_create</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_output'>output</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy-instance_method">
  
    - (<tt>Object</tt>) <strong>destroy</strong>(skip_hooks = false) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Destroy gear</p>
<ul><li>
<p>model/unix_user.rb</p>
</li></ul>

<p>context: root</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>skip_hooks</span>
      
      
        <span class='type'></span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>should destroy call the gear&#39;s hooks before destroying the gear</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 217</span>

<span class='kw'>def</span> <span class='id identifier rubyid_destroy'>destroy</span><span class='lparen'>(</span><span class='id identifier rubyid_skip_hooks'>skip_hooks</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_notify_observers'>notify_observers</span><span class='lparen'>(</span><span class='symbol'>:before_container_destroy</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='ivar'>@uid</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='lparen'>(</span><span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span><span class='lparen'>(</span><span class='ivar'>@container_dir</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='comment'># gear seems to have been deleted already... suppress any error
</span>    <span class='comment'># TODO : remove remaining stuff if it exists, e.g. .httpd/#{uuid}* etc
</span>    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_notify_endpoint_delete'>notify_endpoint_delete</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_errout'>errout</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_retcode'>retcode</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>

  <span class='comment'># Don&#39;t try to delete a gear that is being scaled-up|created|deleted
</span>  <span class='id identifier rubyid_uuid_lock_file'>uuid_lock_file</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/var/lock/oo-create.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_uuid_lock_file'>uuid_lock_file</span><span class='comma'>,</span> <span class='const'>File</span><span class='op'>::</span><span class='const'>RDWR</span><span class='op'>|</span><span class='const'>File</span><span class='op'>::</span><span class='const'>CREAT</span><span class='op'>|</span><span class='const'>File</span><span class='op'>::</span><span class='const'>TRUNC</span><span class='comma'>,</span> <span class='int'>0600</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span> <span class='id identifier rubyid_lock'>lock</span> <span class='op'>|</span>
    <span class='id identifier rubyid_lock'>lock</span><span class='period'>.</span><span class='id identifier rubyid_fcntl'>fcntl</span><span class='lparen'>(</span><span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>F_SETFD</span><span class='comma'>,</span> <span class='const'>Fcntl</span><span class='op'>::</span><span class='const'>FD_CLOEXEC</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_lock'>lock</span><span class='period'>.</span><span class='id identifier rubyid_flock'>flock</span><span class='lparen'>(</span><span class='const'>File</span><span class='op'>::</span><span class='const'>LOCK_EX</span><span class='rparen'>)</span>

    <span class='ivar'>@cartridge_model</span><span class='period'>.</span><span class='id identifier rubyid_each_cartridge'>each_cartridge</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cart'>cart</span><span class='op'>|</span>
      <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>Environ</span><span class='op'>::</span><span class='id identifier rubyid_for_gear'>for_gear</span><span class='lparen'>(</span><span class='ivar'>@container_dir</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_cart'>cart</span><span class='period'>.</span><span class='id identifier rubyid_public_endpoints'>public_endpoints</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_endpoint'>endpoint</span><span class='op'>|</span>
        <span class='id identifier rubyid_notify_endpoint_delete'>notify_endpoint_delete</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOTIFY_ENDPOINT_DELETE: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_endpoint'>endpoint</span><span class='period'>.</span><span class='id identifier rubyid_public_port_name'>public_port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PUBLIC_IP</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='id identifier rubyid_endpoint'>endpoint</span><span class='period'>.</span><span class='id identifier rubyid_public_port_name'>public_port_name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='comment'># possible mismatch across cart model versions
</span>    <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_errout'>errout</span><span class='comma'>,</span> <span class='id identifier rubyid_retcode'>retcode</span> <span class='op'>=</span> <span class='ivar'>@cartridge_model</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span><span class='lparen'>(</span><span class='id identifier rubyid_skip_hooks'>skip_hooks</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>UserDeletionException</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ERROR: unable to delete user account </span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@uuid</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span>

    <span class='kw'>if</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CREATE_APP_SYMLINKS</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>==</span> <span class='int'>1</span>
      <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_foreach'>foreach</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='ivar'>@container_dir</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dent'>dent</span><span class='op'>|</span>
        <span class='id identifier rubyid_unobfuscate'>unobfuscate</span> <span class='op'>=</span> <span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='ivar'>@container_dir</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_dent'>dent</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_symlink?'>symlink?</span><span class='lparen'>(</span><span class='id identifier rubyid_unobfuscate'>unobfuscate</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
            <span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_readlink'>readlink</span><span class='lparen'>(</span><span class='id identifier rubyid_unobfuscate'>unobfuscate</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='ivar'>@container_dir</span><span class='rparen'>)</span><span class='rparen'>)</span>
          <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_unlink'>unlink</span><span class='lparen'>(</span><span class='id identifier rubyid_unobfuscate'>unobfuscate</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_lock'>lock</span><span class='period'>.</span><span class='id identifier rubyid_flock'>flock</span><span class='lparen'>(</span><span class='const'>File</span><span class='op'>::</span><span class='const'>LOCK_UN</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='id identifier rubyid_notify_endpoint_delete'>notify_endpoint_delete</span>

  <span class='id identifier rubyid_notify_observers'>notify_observers</span><span class='lparen'>(</span><span class='symbol'>:after_container_destroy</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_errout'>errout</span><span class='comma'>,</span> <span class='id identifier rubyid_retcode'>retcode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disk_usage_exceeds?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>disk_usage_exceeds?</strong>(max_percent) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns <code>true</code> if the user&#39;s disk block usage meets or
exceeds <code>max_percent</code> of the configured block limit, otherwise
<code>false</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


604
605
606
607
608
609
610
611
612</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 604</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disk_usage_exceeds?'>disk_usage_exceeds?</span><span class='lparen'>(</span><span class='id identifier rubyid_max_percent'>max_percent</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Percent must be between 1-100 (inclusive)</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>100</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_max_percent'>max_percent</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_quota'>quota</span> <span class='op'>=</span> <span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Node</span><span class='period'>.</span><span class='id identifier rubyid_get_quota'>get_quota</span><span class='lparen'>(</span><span class='ivar'>@uuid</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_used_percent'>used_percent</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_quota'>quota</span><span class='lbracket'>[</span><span class='symbol'>:blocks_used</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_quota'>quota</span><span class='lbracket'>[</span><span class='symbol'>:blocks_limit</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='float'>100.00</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_used_percent'>used_percent</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_max_percent'>max_percent</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="force_stop-instance_method">
  
    - (<tt>Object</tt>) <strong>force_stop</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Sets the app state to “stopped” and causes an immediate forced
termination of all gear processes.</p>

<p>TODO: exception handling</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_force_stop'>force_stop</span>
  <span class='ivar'>@state</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>State</span><span class='op'>::</span><span class='const'>STOPPED</span>
  <span class='ivar'>@cartridge_model</span><span class='period'>.</span><span class='id identifier rubyid_create_stop_lock'>create_stop_lock</span>
  <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gear_level_tidy_git-instance_method">
  
    - (<tt>Object</tt>) <strong>gear_level_tidy_git</strong>(gear_repo_dir) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


415
416
417
418
419
420
421
422
423
424
425
426
427</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 415</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gear_level_tidy_git'>gear_level_tidy_git</span><span class='lparen'>(</span><span class='id identifier rubyid_gear_repo_dir'>gear_repo_dir</span><span class='rparen'>)</span>
  <span class='comment'># Git pruning
</span>  <span class='id identifier rubyid_tidy_action'>tidy_action</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_run_in_container_context'>run_in_container_context</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>git prune</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>chdir:</span> <span class='id identifier rubyid_gear_repo_dir'>gear_repo_dir</span><span class='comma'>,</span> <span class='label'>expected_exitstatus:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>timeout:</span> <span class='ivar'>@hourglass</span><span class='period'>.</span><span class='id identifier rubyid_remaining'>remaining</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pruned git directory at </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gear_repo_dir'>gear_repo_dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Git GC
</span>  <span class='id identifier rubyid_tidy_action'>tidy_action</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_run_in_container_context'>run_in_container_context</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>git gc --aggressive</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>chdir:</span> <span class='id identifier rubyid_gear_repo_dir'>gear_repo_dir</span><span class='comma'>,</span> <span class='label'>expected_exitstatus:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>timeout:</span> <span class='ivar'>@hourglass</span><span class='period'>.</span><span class='id identifier rubyid_remaining'>remaining</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Executed git gc for repo </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gear_repo_dir'>gear_repo_dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gear_level_tidy_tmp-instance_method">
  
    - (<tt>Object</tt>) <strong>gear_level_tidy_tmp</strong>(gear_tmp_dir) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


407
408
409
410
411
412
413</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 407</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gear_level_tidy_tmp'>gear_level_tidy_tmp</span><span class='lparen'>(</span><span class='id identifier rubyid_gear_tmp_dir'>gear_tmp_dir</span><span class='rparen'>)</span>
  <span class='comment'># Temp dir cleanup
</span>  <span class='id identifier rubyid_tidy_action'>tidy_action</span> <span class='kw'>do</span>
    <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_rm_rf'>rm_rf</span><span class='lparen'>(</span><span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_gear_tmp_dir'>gear_tmp_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cleaned gear temp dir at </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_gear_tmp_dir'>gear_tmp_dir</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_cartridge-instance_method">
  
    - (<tt>Object</tt>) <strong>get_cartridge</strong>(cart_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


511
512
513</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 511</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_cartridge'>get_cartridge</span><span class='lparen'>(</span><span class='id identifier rubyid_cart_name'>cart_name</span><span class='rparen'>)</span>
  <span class='ivar'>@cartridge_model</span><span class='period'>.</span><span class='id identifier rubyid_get_cartridge'>get_cartridge</span><span class='lparen'>(</span><span class='id identifier rubyid_cart_name'>cart_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_gear_groups-instance_method">
  
    - (<tt>Object</tt>) <strong>get_gear_groups</strong>(gear_env) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the gear groups for the application this gear is part of.</p>

<p>Returns the parsed JSON for the response.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 447</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_gear_groups'>get_gear_groups</span><span class='lparen'>(</span><span class='id identifier rubyid_gear_env'>gear_env</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_broker_addr'>broker_addr</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BROKER_HOST</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_domain'>domain</span> <span class='op'>=</span> <span class='id identifier rubyid_gear_env'>gear_env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OPENSHIFT_NAMESPACE</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_app_name'>app_name</span> <span class='op'>=</span> <span class='id identifier rubyid_gear_env'>gear_env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OPENSHIFT_APP_NAME</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_broker_addr'>broker_addr</span><span class='embexpr_end'>}</span><span class='tstring_content'>/broker/rest/domains/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_domain'>domain</span><span class='embexpr_end'>}</span><span class='tstring_content'>/applications/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_app_name'>app_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/gear_groups.json</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>broker_auth_key</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEAR_BASE_DIR</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_uuid'>uuid</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.auth</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>token</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>broker_auth_iv</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GEAR_BASE_DIR</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_uuid'>uuid</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.auth</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>iv</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_request'>request</span> <span class='op'>=</span> <span class='const'>RestClient</span><span class='op'>::</span><span class='const'>Request</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:method</span> <span class='op'>=&gt;</span> <span class='symbol'>:get</span><span class='comma'>,</span>
                                    <span class='symbol'>:url</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_url'>url</span><span class='comma'>,</span>
                                    <span class='symbol'>:timeout</span> <span class='op'>=&gt;</span> <span class='int'>120</span><span class='comma'>,</span>
                                    <span class='symbol'>:headers</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:accept</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json;version=1.0</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:user_agent</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OpenShift</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                                    <span class='symbol'>:payload</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='int'>300</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_response'>response</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span>
    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>end</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_gear_groups'>gear_groups</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span>
    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_gear_groups'>gear_groups</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_ip_addr-instance_method">
  
    - (<tt>Object</tt>) <strong>get_ip_addr</strong>(host_id) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 159</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_ip_addr'>get_ip_addr</span><span class='lparen'>(</span><span class='id identifier rubyid_host_id'>host_id</span><span class='rparen'>)</span>
  <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_get_ip_addr'>get_ip_addr</span><span class='lparen'>(</span><span class='id identifier rubyid_host_id'>host_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_secondary_gear_groups-instance_method">
  
    - (<tt>Object</tt>) <strong>get_secondary_gear_groups</strong>(groups) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Given a list of gear groups, return the secondary gear groups</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


485
486
487
488
489
490
491
492
493
494
495
496
497
498
499</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 485</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_secondary_gear_groups'>get_secondary_gear_groups</span><span class='lparen'>(</span><span class='id identifier rubyid_groups'>groups</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_secondary_groups'>secondary_groups</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_group'>group</span><span class='op'>|</span>
    <span class='id identifier rubyid_group'>group</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cartridges</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cartridge'>cartridge</span><span class='op'>|</span>
      <span class='id identifier rubyid_cartridge'>cartridge</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tags</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tag'>tag</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_tag'>tag</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>database</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_secondary_groups'>secondary_groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_cartridge'>cartridge</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_group'>group</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_secondary_groups'>secondary_groups</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="idle_gear-instance_method">
  
    - (<tt>Object</tt>) <strong>idle_gear</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Idles the gear if there is no stop lock and state is not already
<code>STOPPED</code>.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


355
356
357
358
359
360
361
362
363
364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 355</span>

<span class='kw'>def</span> <span class='id identifier rubyid_idle_gear'>idle_gear</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_stop_lock?'>stop_lock?</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>!=</span> <span class='const'>State</span><span class='op'>::</span><span class='const'>STOPPED</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_frontend'>frontend</span> <span class='op'>=</span> <span class='const'>FrontendHttpServer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_frontend'>frontend</span><span class='period'>.</span><span class='id identifier rubyid_idle'>idle</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='id identifier rubyid_stop_gear'>stop_gear</span>
    <span class='kw'>ensure</span>
      <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>State</span><span class='op'>::</span><span class='const'>IDLE</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_output'>output</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kill_procs-instance_method">
  
    - (<tt>Object</tt>) <strong>kill_procs</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Kill processes belonging to this app container.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_kill_procs'>kill_procs</span>
  <span class='comment'># Give it a good try to delete all processes.
</span>  <span class='comment'># This abuse is necessary to release locks on polyinstantiated
</span>  <span class='comment'>#    directories by pam_namespace.
</span>  <span class='id identifier rubyid_out'>out</span> <span class='op'>=</span> <span class='id identifier rubyid_err'>err</span> <span class='op'>=</span> <span class='id identifier rubyid_rc'>rc</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='int'>10</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='id identifier rubyid_oo_spawn'>oo_spawn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>/usr/bin/pkill -9 -u </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_end'>}</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_out'>out</span><span class='comma'>,</span><span class='id identifier rubyid_err'>err</span><span class='comma'>,</span><span class='id identifier rubyid_rc'>rc</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='id identifier rubyid_oo_spawn'>oo_spawn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>/usr/bin/pgrep -u </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_end'>}</span></span><span class='rparen'>)</span>
    <span class='kw'>break</span> <span class='kw'>unless</span> <span class='int'>0</span> <span class='op'>==</span> <span class='id identifier rubyid_rc'>rc</span>

    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ERROR: attempt </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'>/10 there are running \&quot;killed\&quot; processes for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rc'>rc</span><span class='embexpr_end'>}</span><span class='tstring_content'>): stdout: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_out'>out</span><span class='embexpr_end'>}</span><span class='tstring_content'> stderr: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_err'>err</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.5</span>
  <span class='kw'>end</span>

  <span class='comment'># looks backwards but 0 implies processes still existed
</span>  <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>==</span> <span class='id identifier rubyid_rc'>rc</span>
    <span class='id identifier rubyid_out'>out</span><span class='comma'>,</span><span class='id identifier rubyid_err'>err</span><span class='comma'>,</span><span class='id identifier rubyid_rc'>rc</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='id identifier rubyid_oo_spawn'>oo_spawn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ps -u </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'> -o state,pid,ppid,cmd</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ERROR: failed to kill all processes for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rc'>rc</span><span class='embexpr_end'>}</span><span class='tstring_content'>): stdout: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_out'>out</span><span class='embexpr_end'>}</span><span class='tstring_content'> stderr: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_err'>err</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="list_proxy_mappings-instance_method">
  
    - (<tt>Object</tt>) <strong>list_proxy_mappings</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


556
557
558</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 556</span>

<span class='kw'>def</span> <span class='id identifier rubyid_list_proxy_mappings'>list_proxy_mappings</span>
  <span class='ivar'>@cartridge_model</span><span class='period'>.</span><span class='id identifier rubyid_list_proxy_mappings'>list_proxy_mappings</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    - (<tt>Object</tt>) <strong>name</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 155</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@container_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="report_build_analytics-instance_method">
  
    - (<tt>Object</tt>) <strong>report_build_analytics</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Send a fire-and-forget request to the broker to report build analytics.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 522</span>

<span class='kw'>def</span> <span class='id identifier rubyid_report_build_analytics'>report_build_analytics</span>
  <span class='id identifier rubyid_broker_addr'>broker_addr</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BROKER_HOST</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_url'>url</span>         <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_broker_addr'>broker_addr</span><span class='embexpr_end'>}</span><span class='tstring_content'>/broker/analytics</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>json_data</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>app_uuid</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='ivar'>@application_uuid</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>action</span><span class='tstring_end'>&quot;</span></span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>push</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_request'>request</span> <span class='op'>=</span> <span class='const'>RestClient</span><span class='op'>::</span><span class='const'>Request</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:method</span> <span class='op'>=&gt;</span> <span class='symbol'>:post</span><span class='comma'>,</span>
                                    <span class='symbol'>:url</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_url'>url</span><span class='comma'>,</span>
                                    <span class='symbol'>:timeout</span> <span class='op'>=&gt;</span> <span class='int'>30</span><span class='comma'>,</span>
                                    <span class='symbol'>:open_timeout</span> <span class='op'>=&gt;</span> <span class='int'>30</span><span class='comma'>,</span>
                                    <span class='symbol'>:headers</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:user_agent</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OpenShift</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                                    <span class='symbol'>:payload</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_payload'>payload</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_pid'>pid</span> <span class='op'>=</span> <span class='id identifier rubyid_fork'>fork</span> <span class='kw'>do</span>
    <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_daemon'>daemon</span>
    <span class='kw'>begin</span>
      <span class='const'>Timeout</span><span class='op'>::</span><span class='id identifier rubyid_timeout'>timeout</span><span class='lparen'>(</span><span class='int'>60</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span>
      <span class='comment'># ignore it
</span>    <span class='kw'>end</span>

    <span class='id identifier rubyid_exit!'>exit!</span>
  <span class='kw'>end</span>

  <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_detach'>detach</span><span class='lparen'>(</span><span class='id identifier rubyid_pid'>pid</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_permission-instance_method">
  
    - (<tt>Object</tt>) <strong>reset_permission</strong>(paths) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


645
646
647</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 645</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_permission'>reset_permission</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
  <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_reset_permission'>reset_permission</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_permission_R-instance_method">
  
    - (<tt>Object</tt>) <strong>reset_permission_R</strong>(paths) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


649
650
651</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 649</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_permission_R'>reset_permission_R</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
  <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_reset_permission_R'>reset_permission_R</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run_in_container_context-instance_method">
  
    - (<tt>Object</tt>) <strong>run_in_container_context</strong>(command, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>run_in_container_context(command, [, options]) -&gt; [stdout, stderr, exit
status]</p>

<p>Executes specified command and return its stdout, stderr and exit status.
Or, raise exceptions if certain conditions are not met. The command is as
container user in a SELinux context using runuser/runcon. The environment
variables are cleared and mys be specified by :env.</p>

<p>command: command line string which is passed to the standard shell</p>

<p>options: hash</p>

<pre class="ruby">:<span class="ruby-identifier">env</span><span class="ruby-operator">:</span> <span class="ruby-identifier">hash</span>
  <span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">val</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">set</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">environment</span> <span class="ruby-identifier">variable</span>
  <span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">unset</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">environment</span> <span class="ruby-identifier">variable</span>
:<span class="ruby-identifier">chdir</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">path</span>             <span class="ruby-operator">:</span> <span class="ruby-identifier">set</span> <span class="ruby-identifier">current</span> <span class="ruby-identifier">directory</span> <span class="ruby-keyword">when</span> <span class="ruby-identifier">running</span> <span class="ruby-identifier">command</span>
:<span class="ruby-identifier">expected_exitstatus</span>       <span class="ruby-operator">:</span> <span class="ruby-constant">An</span> <span class="ruby-constant">Integer</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">for</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">expected</span> <span class="ruby-keyword">return</span> <span class="ruby-identifier">code</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">command</span>
                           <span class="ruby-operator">:</span> <span class="ruby-constant">If</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">set</span> <span class="ruby-identifier">spawn</span>() <span class="ruby-identifier">returns</span> <span class="ruby-identifier">exitstatus</span> <span class="ruby-identifier">from</span> <span class="ruby-identifier">command</span> <span class="ruby-identifier">otherwise</span>
                           <span class="ruby-operator">:</span> <span class="ruby-identifier">raise</span> <span class="ruby-identifier">an</span> <span class="ruby-identifier">error</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">exitstatus</span> <span class="ruby-identifier">is</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">expected_exitstatus</span>
:<span class="ruby-identifier">timeout</span>                   <span class="ruby-operator">:</span> <span class="ruby-constant">Maximum</span> <span class="ruby-identifier">number</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">seconds</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">wait</span> <span class="ruby-keyword">for</span> <span class="ruby-identifier">command</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">finish</span>. <span class="ruby-identifier">default</span><span class="ruby-operator">:</span> <span class="ruby-value">3600</span>
                           <span class="ruby-operator">:</span> <span class="ruby-identifier">stdin</span> <span class="ruby-keyword">for</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">command</span> <span class="ruby-identifier">is</span> <span class="ruby-regexp">/dev/</span><span class="ruby-identifier">ull</span>
:<span class="ruby-identifier">out</span>                       <span class="ruby-operator">:</span> <span class="ruby-constant">If</span> <span class="ruby-identifier">specified</span>, <span class="ruby-constant">STDOUT</span> <span class="ruby-identifier">from</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">child</span> <span class="ruby-identifier">process</span> <span class="ruby-identifier">will</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">redirected</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">the</span>
                             <span class="ruby-identifier">provided</span> <span class="ruby-operator">+</span><span class="ruby-constant">IO</span><span class="ruby-operator">+</span> <span class="ruby-identifier">object</span>.
:<span class="ruby-identifier">err</span>                       <span class="ruby-operator">:</span> <span class="ruby-constant">If</span> <span class="ruby-identifier">specified</span>, <span class="ruby-constant">STDERR</span> <span class="ruby-identifier">from</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">child</span> <span class="ruby-identifier">process</span> <span class="ruby-identifier">will</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">redirected</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">the</span>
                             <span class="ruby-identifier">provided</span> <span class="ruby-operator">+</span><span class="ruby-constant">IO</span><span class="ruby-operator">+</span> <span class="ruby-identifier">object</span>.
</pre>

<p>NOTE: If the <code>out</code> or <code>err</code> options are specified,
the corresponding return value from <code>run_in_container_context</code>
will be the incoming/provided <code>IO</code> objects instead of the
buffered <code>String</code> output. It&#39;s the responsibility of the
caller to correctly handle the resulting data type.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


641
642
643</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 641</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run_in_container_context'>run_in_container_context</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_run_in_container_context'>run_in_container_context</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_ro_permission-instance_method">
  
    - (<tt>Object</tt>) <strong>set_ro_permission</strong>(paths) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


657
658
659</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 657</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_ro_permission'>set_ro_permission</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
  <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_set_ro_permission'>set_ro_permission</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_ro_permission_R-instance_method">
  
    - (<tt>Object</tt>) <strong>set_ro_permission_R</strong>(paths) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


653
654
655</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 653</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_ro_permission_R'>set_ro_permission_R</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
  <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_set_ro_permission_R'>set_ro_permission_R</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_rw_permission-instance_method">
  
    - (<tt>Object</tt>) <strong>set_rw_permission</strong>(paths) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


665
666
667</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 665</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_rw_permission'>set_rw_permission</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
  <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_set_rw_permission'>set_rw_permission</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_rw_permission_R-instance_method">
  
    - (<tt>Object</tt>) <strong>set_rw_permission_R</strong>(paths) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


661
662
663</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 661</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_rw_permission_R'>set_rw_permission_R</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
  <span class='ivar'>@container_plugin</span><span class='period'>.</span><span class='id identifier rubyid_set_rw_permission_R'>set_rw_permission_R</span><span class='lparen'>(</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_gear-instance_method">
  
    - (<tt>Object</tt>) <strong>start_gear</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the application state to <code>STARTED</code> and starts the gear.
Gear state implementation is model specific, but <code>options</code> is
provided to the implementation.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


390
391
392</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 390</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_gear'>start_gear</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@cartridge_model</span><span class='period'>.</span><span class='id identifier rubyid_start_gear'>start_gear</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop_gear-instance_method">
  
    - (<tt>Object</tt>) <strong>stop_gear</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the application state to <code>STOPPED</code> and stops the gear. Gear
stop implementation is model specific, but <code>options</code> is provided
to the implementation.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


397
398
399
400
401
402
403
404
405</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 397</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stop_gear'>stop_gear</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='ivar'>@cartridge_model</span><span class='period'>.</span><span class='id identifier rubyid_stop_gear'>stop_gear</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_chomp!'>chomp!</span>
    <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_stopped_status_attr'>stopped_status_attr</span>
  <span class='id identifier rubyid_buffer'>buffer</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop_lock?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>stop_lock?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


515
516
517</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 515</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stop_lock?'>stop_lock?</span>
  <span class='ivar'>@cartridge_model</span><span class='period'>.</span><span class='id identifier rubyid_stop_lock?'>stop_lock?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stopped_status_attr-instance_method">
  
    - (<tt>Object</tt>) <strong>stopped_status_attr</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


501
502
503
504
505
506
507
508
509</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 501</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stopped_status_attr'>stopped_status_attr</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='const'>State</span><span class='op'>::</span><span class='const'>STOPPED</span> <span class='op'>||</span> <span class='id identifier rubyid_stop_lock?'>stop_lock?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ATTR: status=ALREADY_STOPPED\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='const'>State</span><span class='op'>::</span><span class='const'>IDLE</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ATTR: status=ALREADY_IDLED\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tidy-instance_method">
  
    - (<tt>Object</tt>) <strong>tidy</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: Cleans up the gear, providing any installed cartridges with the
opportunity to perform their own cleanup operations via the tidy hook.</p>

<p>The generic gear-level cleanup flow is:</p>
<ul><li>
<p>Stop the gear</p>
</li><li>
<p>Gear temp dir cleanup</p>
</li><li>
<p>Cartridge tidy hook executions</p>
</li><li>
<p>Git cleanup</p>
</li><li>
<p>Start the gear</p>
</li></ul>

<p>Raises an Exception if an internal error occurs, and ignores failed
cartridge tidy hook executions.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 317</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tidy'>tidy</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Starting tidy on gear </span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_env'>env</span>      <span class='op'>=</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>Environ</span><span class='op'>::</span><span class='id identifier rubyid_for_gear'>for_gear</span><span class='lparen'>(</span><span class='ivar'>@container_dir</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_gear_dir'>gear_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OPENSHIFT_HOMEDIR</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_app_name'>app_name</span> <span class='op'>=</span> <span class='id identifier rubyid_env'>env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OPENSHIFT_APP_NAME</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Missing required env var OPENSHIFT_HOMEDIR</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_gear_dir'>gear_dir</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Missing required env var OPENSHIFT_APP_NAME</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_app_name'>app_name</span>

  <span class='id identifier rubyid_gear_repo_dir'>gear_repo_dir</span> <span class='op'>=</span> <span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_gear_dir'>gear_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>git</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_app_name'>app_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.git</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_gear_tmp_dir'>gear_tmp_dir</span>  <span class='op'>=</span> <span class='const'>PathUtils</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_gear_dir'>gear_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.tmp</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_stop_gear'>stop_gear</span><span class='lparen'>(</span><span class='label'>user_initiated:</span> <span class='kw'>false</span><span class='rparen'>)</span>

  <span class='comment'># Perform the gear- and cart- level tidy actions.  At this point, the gear has
</span>  <span class='comment'># been stopped; we&#39;ll attempt to start the gear no matter what tidy operations fail.
</span>  <span class='kw'>begin</span>
    <span class='comment'># clear out the tmp dir
</span>    <span class='id identifier rubyid_gear_level_tidy_tmp'>gear_level_tidy_tmp</span><span class='lparen'>(</span><span class='id identifier rubyid_gear_tmp_dir'>gear_tmp_dir</span><span class='rparen'>)</span>

    <span class='comment'># Delegate to cartridge model to perform cart-level tidy operations for all installed carts.
</span>    <span class='ivar'>@cartridge_model</span><span class='period'>.</span><span class='id identifier rubyid_tidy'>tidy</span>

    <span class='comment'># git gc - do this last to maximize room  for git to write changes
</span>    <span class='id identifier rubyid_gear_level_tidy_git'>gear_level_tidy_git</span><span class='lparen'>(</span><span class='id identifier rubyid_gear_repo_dir'>gear_repo_dir</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>An unknown exception occured during tidy for gear </span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_start_gear'>start_gear</span><span class='lparen'>(</span><span class='label'>user_initiated:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Completed tidy for gear </span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tidy_action-instance_method">
  
    - (<tt>Object</tt>) <strong>tidy_action</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Executes a block, trapping ShellExecutionExceptions and treating them as
warnings. Any other exceptions are unexpected and will bubble out.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


431
432
433
434
435
436
437
438
439
440
441</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 431</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tidy_action'>tidy_action</span>
  <span class='kw'>begin</span>
    <span class='kw'>yield</span>
  <span class='kw'>rescue</span> <span class='op'>::</span><span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>ShellExecutionException</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>%Q{</span><span class='tstring_content'>
      Tidy operation failed on gear </span><span class='embexpr_beg'>#{</span><span class='ivar'>@uuid</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_content'>
      --- stdout ---\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_stdout'>stdout</span><span class='embexpr_end'>}</span><span class='tstring_content'>
      --- stderr ---\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_stderr'>stderr</span><span class='embexpr_end'>}</span><span class='tstring_content'>
                </span><span class='tstring_end'>}</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unidle_gear-instance_method">
  
    - (<tt>Object</tt>) <strong>unidle_gear</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Unidles the gear.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


371
372
373
374
375
376
377
378
379
380
381
382
383
384
385</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/fedora/origin-server/node/lib/openshift-origin-node/model/application_container.rb', line 371</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unidle_gear'>unidle_gear</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>OpenShift</span><span class='op'>::</span><span class='const'>Runtime</span><span class='op'>::</span><span class='const'>Utils</span><span class='op'>::</span><span class='const'>Cgroups</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@uuid</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_boost'>boost</span> <span class='kw'>do</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_stop_lock?'>stop_lock?</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='const'>State</span><span class='op'>::</span><span class='const'>IDLE</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>State</span><span class='op'>::</span><span class='const'>STARTED</span>
    <span class='id identifier rubyid_output'>output</span>      <span class='op'>=</span> <span class='id identifier rubyid_start_gear'>start_gear</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_frontend'>frontend</span> <span class='op'>=</span> <span class='const'>FrontendHttpServer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_frontend'>frontend</span><span class='period'>.</span><span class='id identifier rubyid_idle?'>idle?</span>
    <span class='id identifier rubyid_frontend'>frontend</span><span class='period'>.</span><span class='id identifier rubyid_unidle'>unidle</span>
  <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_output'>output</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Sep  5 22:06:48 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-2.0.0).
</div>

  </body>
</html>