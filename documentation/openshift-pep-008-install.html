<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Asciidoctor 0.1.4" name="generator">
<meta content="OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;" name="author">
<title>OpenShift PEP 008: OpenShift Installation Tool</title>
<style>@import url(http://openshift.redhat.com/app/assets/overpass.css);
@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/*
Origin theme source file

To build it:
- clone the asciidoctor-stylesheet-factory repo
- copy this theme file to the sass folder inside the repo
- copy the settings file to the sass/settings file inside the repo
- cd to the cloned repo
- bundle install
- compass compile
- compiled stylesheet is in the stylesheets/ directory
*/
/* Generated by Font Squirrel (http://www.fontsquirrel.com) on July 24, 2013 */
@font-face { font-family: 'source_code_pro'; src: url("fonts/sourcecodepro-regular-webfont.eot"); src: url("fonts/sourcecodepro-regular-webfont.eot?#iefix") format("embedded-opentype"), url("fonts/sourcecodepro-regular-webfont.woff") format("woff"), url("fonts/sourcecodepro-regular-webfont.ttf") format("truetype"), url("sourcecodepro-regular-webfont.svg#source_code_proregular") format("svg"); font-weight: normal; font-style: normal; }

/*
Settings and overrides for the Origin theme
*/
/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title, .tableblock > caption { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #006699; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #005580; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Overpass, sans-serif; font-weight: bold; font-style: normal; color: #222222; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #7f0a0c; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

/*
.clearfix,
.floatend { zoom: 1; &:before, &:after { content: " "; display: table; } &:after { clear: both; }
}
*/
code { font-size: inherit; padding: 0; white-space: nowrap; background-color: inherit; border: 0 solid #dddddd; -webkit-border-radius: 0; border-radius: 0; text-shadow: none; }

kbd.keyseq { color: #555555; }

kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: #222222; font-weight: bold; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 1.25em; }
#toc > ul, #toc > ol { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a, #toc ol.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1, #toc ol.sectlevel0 ol.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul, #toc ol { list-style-type: none; }

#toctitle { color: #6f6f6f; }

@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul, #toc.toc2 > ol { font-size: .95em; }
  #toc.toc2 ul ul, #toc.toc2 ol ol { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1, #toc.toc2 ol.sectlevel0 ol.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > .paragraph:last-child > p { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; line-height: 1.6; }
.sidebarblock > .content > .paragraph:last-child p { margin-bottom: 0; }

pre { color: black; font-family: source_code_pro, monospace, serif; overflow-x: auto; line-height: 1.4; }

.verseblock { margin-bottom: 1.25em; }

.literalblock, .listingblock { margin-bottom: 1.25em; }
.literalblock > .content > pre, .listingblock > .content > pre { background: #eeeeee; color: black; font-family: source_code_pro, monospace, serif; border-width: 0; padding: 0.8em 0.8em 0.6em 0.8em; word-wrap: break-word; line-height: 1.4; }
.literalblock > .content > pre.nowrap, .listingblock > .content > pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content > pre > code, .listingblock > .content > pre > code { font-size: 1em; white-space: inherit; color: black; font-family: source_code_pro, monospace, serif; padding: 0; background: none; font-weight: normal; border: none; }
@media only screen { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 1em; } }

.listingblock:hover .xml:before { content: "xml"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .html:before { content: "html"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .ruby:before { content: "ruby"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .asciidoc:before { content: "asciidoc"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .java:before { content: "java"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .javascript:before { content: "javascript"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .css:before { content: "css"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .scss:before { content: "scss"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: 0.8125em; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 0; border-radius: 0; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.halign-top, td.tableblock.halign-top { vertical-align: top; }

th.tableblock.halign-bottom, td.tableblock.halign-bottom { vertical-align: bottom; }

th.tableblock.halign-middle, td.tableblock.halign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist { list-style-type: none; margin-left: 0.625em; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

td.hdlist1 { vertical-align: top; padding-right: .8em; font-weight: bold; }

.qanda > ol > li > p:first-child { color: #005580; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: none; box-shadow: none; }

.imageblock { margin-bottom: 1.25em; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding: 0.75em 0.375em; margin-bottom: 1.25em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: none; cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #006699; color: #004c73; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

nav.global { background: #222; width: 100%; height: 4em; }
nav.global ul { list-style-type: none; margin: 0; }
nav.global li { display: inline-block; }
nav.global a { display: block; padding: .5em 1em; font-family: Overpass; font-size: 1.1em; color: white; }
nav.global a:hover { color: #ef2e32; }
nav.global a img { margin-top: .25em; height: 2.75em; }

#header > h1 { border: none; }

#toc { background: #eee; border-right: none; }
#toc.toc2 { box-shadow: 1px 0 1px rgba(0, 0, 0, 0.3); }

code { font-family: source_code_pro; }

.admonitionblock td.icon .icon-tip:before { color: #cc6; text-shadow: none; }

#footer { background-image: url("images/panda.png"); background-position: right bottom; background-repeat: no-repeat; }

/* Alignment Styles */
.halign-left { text-align: left }
.halign-center { text-align: center }
.halign-right { text-align: right }

.valign-top { vertical-align: top }
.valign-middle { vertical-align: middle }
.valign-bottom { vertical-align: bottom }</style>
<link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body class="article toc2">
<nav class="global">
<ul>
<li>
<a href="http://openshift.github.io">
<img alt="OpenShift Origin" src="images/logo.png">
</a>
</li>
<li>
<a href="index.html">Documentation Home</a>
</li>
</ul>
</nav>
<div id="header">
<h1>OpenShift PEP 008: OpenShift Installation Tool</h1>
<span id="author">OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;</span>
<br>
<div class="toc2" id="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#abstract">Abstract</a></li>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#specification">Specification</a></li>
<li><a href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a href="#rationale">Rationale</a></li>
</ul>
</div>
</div>
<div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>PEP: 008<br>
Title: OpenShift Installation Tool<br>
Status: accepted<br>
Author: N. Harrison Ripps <a href="mailto:hripps@redhat.com">hripps@redhat.com</a><br>
Arch Priority: High<br>
Complexity: 40<br>
Affected Components: admin_tools<br>
Affected Teams: UI (1), Origin (1)<br>
User Impact: High<br>
Epic: <a href="https://trello.com/c/H01J2eo4/30-origin-v3-installation-wizard-design">Origin v3 Installation Wizard</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="abstract"><a class="anchor" href="#abstract"></a>Abstract</h3>
<div class="paragraph">
<p>This document describes an improved installation system for OpenShift. The proposed system will use a CLI-based installer and <a href="#installer-workflows">Workflow</a> model to deploy OpenShift onto one or more hosts. As an example of this, one Workflow will target the the VM that is currently used to deliver an all-in-one OpenShift Origin instance. This Workflow will enable the Origin VM to selectively serve one role (Broker, Node, or Message Queue Server) in a multi-instance deployment.</p>
</div>
</div>
<div class="sect2">
<h3 id="motivation"><a class="anchor" href="#motivation"></a>Motivation</h3>
<div class="paragraph">
<p>This PEP is the continuation of an effort that began with a <a href="https://www.openshift.com/blogs/help-us-fix-the-openshift-origin-unboxing-experience">call to the OpenShift Origin Community</a> to help improve the system&#8217;s installation process. Around one hundred community members <a href="https://www.openshift.com/blogs/survey-results-the-openshift-origin-unboxing-experience">participated in a survey</a> to help us understand what their most important use cases were, and which installation tools would be most valuable to them. Based on the survey results, it seems clear that users need more general deployment capabilities beyond the all-in-one virtual machine where OpenShift Origin is showcased.</p>
</div>
<div class="paragraph">
<p>After an initial peer review, this PEP has been revised to clarify the standalone nature of this installer. Through the instrumentation of Workflows and Tasks, the first release of the installer will include support for the most popular install methods from the Origin survey. However, the installer is designed to be extensible enough to support other scenarios.</p>
</div>
</div>
<div class="sect2">
<h3 id="specification"><a class="anchor" href="#specification"></a>Specification</h3>
<div class="paragraph">
<p>In broad terms, the design proposal for this installation tool is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The installer will consist of a text-based wizard that guides a user to:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define their OpenShift configuration</p>
</li>
<li>
<p>Select an installation Workflow</p>
</li>
<li>
<p>Execute the workflow</p>
</li>
</ol>
</div>
</li>
<li>
<p>The initial Workflows provided with the installer will include:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#workflow-use-an-origin-vm-in-a-distributed-deployment">Origin VM Role assignment</a> - Specific to the Origin VM, the VM takes on one Role in a multi-VM Origin deployment (Broker, Node or Message Queue Server)</p>
</li>
<li>
<p><a href="#workflow-install-a-role-on-a-remote-system">Remote system Role assignment</a> - the installer connects to a <a href="#target-system-requirements">compatible host</a> via SSH and configures it for a given Role.</p>
</li>
<li>
<p><a href="#workflow-install-a-role-on-the-local-system">Local system Role assignment</a> - the installer configures the local host for a given Role.</p>
</li>
<li>
<p><a href="#workflow-download-puppet-templates">Puppet script templates</a> - Users can also copy the puppet scripts from the VM to modify and run on their own.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Roles referenced here are defined in <a href="#simplified-deployment-roles">Simplified Deployment Roles</a>.</p>
</div>
<div class="sect3">
<h4 id="the-text-based-installer"><a class="anchor" href="#the-text-based-installer"></a>The Text-Based Installer</h4>
<div class="paragraph">
<p>The Origin VM completes its boot-up procedure by invoking <a href="https://github.com/openshift/puppet-openshift_origin/blob/master/templates/custom_shell/oo-login">oo-login#login()</a>. This is the method that presents the user with some summary information about the running system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpenShift Installer
----------------

OpenShift console: https://broker.openshift.local/console
Console login:     admin
Console password:  admin

IP address: X.X.X.X
SSH user:   openshift
Password:   openshift

Press any key for root console</pre>
</div>
</div>
<div class="paragraph">
<p>This utility will be replaced with a general-purpose package that can provide the additional user interaction that is described in this document. The expanded utility will be called <code>oo-install</code> and will function both within the context of the Origin VM and in a standalone capacity for use with other OpenShift distros.</p>
</div>
<div class="paragraph">
<p>The new installer will begin with an intro screen that summarizes the user&#8217;s options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpenShift Installer
----------------

Welcome to OpenShift.

This VM is currently running a complete OpenShift installation.
You can connect to it by pointing your browser to:

https://broker.openshift.local/console

To do more with this VM, select from the following options:

&lt;1&gt; Use this VM in a multi-instance deployment
&lt;2&gt; Install OpenShift on another system
&lt;3&gt; Download Puppet templates
&lt;4&gt; See login information for this Origin VM
&lt;5&gt; Exit the installer</pre>
</div>
</div>
<div class="paragraph">
<p>The portion of text starting with "This VM is currently running&#8230;" and ending with "&#8230;select from the following options:" will be read directly from a startup message file that can be modified for use in different contexts (standalone installer vs. packaged with Origin VM).</p>
</div>
<div class="paragraph">
<p>The options presented to the user will come from the Workflows that register themselves with the installer at startup. This is described in greater detail in the <a href="#installer-workflows">Installer Workflows</a> section.</p>
</div>
<div class="sect4">
<h5 id="recording-the-system-configuration"><a class="anchor" href="#recording-the-system-configuration"></a>Recording the System Configuration</h5>
<div class="paragraph">
<p>When invoked, the oo-install utility will look for a configuration file at <code>~/.openshift/oo-install-cfg.yml</code>. Users can manually specify a config file location by passing an argument to oo-install. As users work with the utility, general information about the Origin system and specific information about the configuration choices the user is making will be recorded here. The Origin VM will be shipped with a default configuration file that describes the all-in-one Origin system running on the VM itself.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>NOTE</strong>:<br>
The installer will also keep a logfile at <code>~/.openshift/oo-install-cfg.log</code>. This will be overwritten every time the installer is invoked.</p>
</div>
<hr>
<div class="paragraph">
<p>Default Configuration</p>
</div>
<div class="paragraph">
<p>The default configuration file for the OpenShift VM will look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>---
Name: OpenShift Installer Configuration
Vendor: OpenShift Origin Community
Description: This is the configuration file for the OpenShift Installer.
Version: 0.0.1
Deployment:
  Hosts:
    - host: broker.mydomain.com
      roles:
      - broker
      - mqserver
      - dbserver
      ssh_host: broker
      user: root
    - host: node1.mydomain.com
      roles:
      - node
      ssh_host: node1
      user: root
  DNS:
    app_domain: example.com
Subscription:
  type: none</pre>
</div>
</div>
<div class="paragraph">
<p>The configuration file will always contain a Deployment section. This section is intended to store the complete OpenShift deployment in a way that can be used by any Workflow. The file will also start with a default Subscription section with type <em>none</em> (more on this below, see <a href="#subscriptions">Subscriptions</a>. When a user begins working with a given Workflow, the answers to any Workflow-specific questions will be stored in the Workflows section in a subgroup that is keyed to <a href="#installer-workflows">Installer Workflow</a> IDs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Workflows:
  &lt;Workflow ID 1&gt;:
    &lt;Question ID 1&gt;: Answer value 1
    &lt;Question ID 2&gt;: Answer value 2
  ...
  &lt;Workflow ID N&gt;:
    &lt;Question ID N&gt;: Answer value N</pre>
</div>
</div>
<hr>
<div class="paragraph">
<p><strong>Limitations</strong>:<br>
For the first iteration of the installer, multiple hosts will only be supported for the Node role.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="installer-workflows"><a class="anchor" href="#installer-workflows"></a>Installer Workflows</h5>
<div class="paragraph">
<p>Each installation option presented by the installer will come from a different <code>Installer::Workflow</code> object defined in the installer codebase. The function of each Workflow is to do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provide an installation option on the text-based installer main page</p>
</li>
<li>
<p>Post questions to the user that are relevant to the Workflow and validate the answers to those questions</p>
</li>
<li>
<p>Summarize the user&#8217;s responses</p>
</li>
<li>
<p>Trigger an automated installation based on the user&#8217;s responses</p>
</li>
<li>
<p>Report on the outcome of the installation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Workflows will be instantiated from a config file located at <code>&lt;gem_root&gt;/conf/workflows.yml</code>. Any additional files needed by a workflow can either be provided as URLs (including git://) or in the workflow directory <code>&lt;gem_root&gt;/workflows/&lt;workflow_id&gt;</code>. As the user answers the questions for a given Workflow, their responses will be recorded in the <code>oo-install-cfg.yml</code> file in a section that is keyed to that Workflow.</p>
</div>
<div class="paragraph">
<p>The format for every workflow defined in <code>workflows.yml</code> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name: The name of the workflow
Type: A single value or list of workflow types
Description: The text displayed by the installer in the workflow list
ID: A distinct alphanumeric ID for the workflow, used in oo-install-cfg.yml
WorkflowDir: Defaults to &lt;gem_root&gt;/workflows/&lt;workflow_id&gt;, but can be overriden to &lt;gem_root&gt;/workflows/&lt;workflow_dir&gt;
SkipDeploymentCheck: Default is "N", specifies whether or not to ask the standard Deployment settings questions at the start of the workflow.
Questions:
  - ID: The unique variable name to associate the response with
    Text: The text of the question to ask
    AnswerType: An answer type, see the section below for details.
  - Question 2...
  - Question 3...
Executable: The full command to be executed to complete the Workflow.
RemoteDeployment: "Y" or "N"; indicates whether the Executable is run locally or on the target system
SubscriptionCheck: "Y" or "N"; indicates whether the workflow will utilize any of yum, Red Hat Network, or Red Hat Subscription Manager to acquire necessary packages
NonDeployment: "Y" or "N"; used for information workflows that do not actually perform installations
RequiredUtilities:
  - The command name of a utility (like 'puppet' or 'unzip') that should be checked for on the target host
  - Utility 2
  - Utility 3</pre>
</div>
</div>
<div class="paragraph">
<p>Type</p>
</div>
<div class="paragraph">
<p>The installer will support three installation types: <em>origin</em>, <em>origin_vm</em>, and <em>ose</em>. This determines which contexts this workflow will be listed with. For example, if a workflow&#8217;s type is <em>ose</em>, then it will only appear in the menu of installation options when oo-install is invoked with the <em>-e</em> flag (for OpenShift Enterprise).</p>
</div>
<div class="paragraph">
<p>Type can either be a single value or a reference to a list of values to indicate which contexts will include this workflow.</p>
</div>
<div class="paragraph">
<p>SkipDeploymentCheck</p>
</div>
<div class="paragraph">
<p>By default, before the Workflow&#8217;s questions are asked, the Installer always asks the user if they want to review and modify the settings from the <a href="#default-configuration">Deployment section</a> of the configuration file. If the user wants to review the settings, they will see a series of screens that list the current info and give the user the opportunity to change that info. This is a valuable first step for most Workflows. However, for Workflows that only provide information to the user without doing any installation work, this flag can be set to skip the Deployment questions altogether.</p>
</div>
<div class="paragraph">
<p>Questions</p>
</div>
<div class="paragraph">
<p>After asking the user to verify the Deployment, the installer starts iterating through the Workflow questions. When an answer already exists in the <code>oo-install-cfg.yml</code> file, the installer will present the question using Highline&#8217;s <a href="http://highline.rubyforge.org/doc/classes/HighLine/Question.html#M000030">answer_or_default()</a> method. All answers are validated according to the AnswerType setting. A few special AnswerTypes will trigger specific test behaviors as well:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><em>role</em></strong> causes the system to offer the <a href="#simplified-deployment-roles">Simplified Deployment Roles</a> as options.</p>
</li>
<li>
<p><strong><em>rolehost</em></strong> - This question must follow the <strong><em>role</em></strong> question; it presents a list of the hosts for the indicated role in the <code>oo-install-cfg.yml</code> file or automatically selects the host if only one is defined for that role.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Executable</p>
</div>
<div class="paragraph">
<p>In the "Executable" string, the keyword "<code>&lt;workflow_path&gt;</code>" will be automatically expanded to the full path of "<code>&lt;gem_root&gt;/workflows/&lt;workflow_id&gt;</code>". The answers to workflow questions can also be included using the notation "<code>&lt;q:question_variable&gt;</code>". For example, if one question had a Variable "openshift_role", its value could be used in the executable like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;workflow_path&gt;/installerific -role &lt;q:openshift_role&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>See ExecuteOnTarget for information on how paths are handled on a remote target system.</p>
</div>
<div class="paragraph">
<p>RemoteDeployment</p>
</div>
<div class="paragraph">
<p>When RemoteDeployment is "Y", the installer will implicitly copy the oo-install-cfg.yml file and any workflow-specific files to the remote host. They will be copied to the <code>$HOME/.openshift</code> directory and the <code>$HOME/.openshift/installer/&lt;workflow_id&gt;</code> directories respectively, and the installer will implicitly modify the Executable string accordingly on the remote system.</p>
</div>
<div class="paragraph">
<p>This flag also determines whether or not the <a href="#skipdeploymentcheck">Deployment Check</a> will attempt to connect to target systems via SSH. A value of <em>N</em> indicates that this Workflow is local only.</p>
</div>
<div class="paragraph">
<p>SubscriptionCheck</p>
</div>
<div class="paragraph">
<p>When set to "Y", the installer will ensure that the user has provided valid subscription information, either through the <a href="#default-configuration">configuration file</a> file or through direct input. Read the section on Subscriptions for more information.</p>
</div>
<div class="paragraph">
<p>NonDeployment</p>
</div>
<div class="paragraph">
<p>When set to "Y", this overrides and forces SkipDeploymentCheck to "Y" and RemoteDeployment and SubscriptionCheck to "N". The purpose of a non-deployment workflow is strictly informational; the indicated executable is run and then the workflow is complete. This is useful for running bash scripts that summarize information about the local system or the installer configuration.</p>
</div>
</div>
<div class="sect4">
<h5 id="installation-methodology"><a class="anchor" href="#installation-methodology"></a>Installation Methodology</h5>
<div class="paragraph">
<p>The specific installation methodology used by a given Workflow is entirely at the discretion of the Workflow&#8217;s author. As long as the Workflow&#8217;s "Executable" string results in the completion of the installation task using values from <code>oo-install-cfg.yml</code> (or exits with a non-zero error code in the event of a problem), the installer will function correctly. Three of the <a href="#provided-workflows">Provided Workflows</a> will use <a href="http://puppetlabs.com/">Puppet</a> and <a href="http://docs.puppetlabs.com/hiera/1/puppet.html">hiera</a> to perform installations, but these tools only represent one method of extracting values from the config file and using them complete a Workflow.</p>
</div>
</div>
<div class="sect4">
<h5 id="unattended-installations"><a class="anchor" href="#unattended-installations"></a>Unattended Installations</h5>
<div class="paragraph">
<p>The installer supports unattended installation for a given Workflow assuming the following requirements are met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Deployment section of the <code>oo-install-cfg.yml</code> file is complete</p>
</li>
<li>
<p>All of the questions for a given Workflow have answers in the config file as well</p>
</li>
<li>
<p>None of the necessary SSH sessions require password authentication (with a caveat; see below)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To perform an unattended installation, the user invokes the installer with an additional argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oo-install -w &lt;workflow ID&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="provided-workflows"><a class="anchor" href="#provided-workflows"></a>Provided Workflows</h4>
<div class="paragraph">
<p>This section contains the workflows that will be provided with the initial release of the installer.</p>
</div>
<div class="paragraph">
<p>Two of the workflows defined here are specific the OpenShift Origin VM. However, the remote system installation is intended to develop into a general purpose remote deployment option that is usable for Origin or Enterprise on Fedora, RHEL or any other yum- and RPM-friendly host.</p>
</div>
<div class="sect4">
<h5 id="workflow-use-an-origin-vm-in-a-distributed-deployment"><a class="anchor" href="#workflow-use-an-origin-vm-in-a-distributed-deployment"></a>Workflow: Use an Origin VM in a Distributed Deployment</h5>
<div class="paragraph">
<p>The goal of this Workflow is to make it possible for a user to set up an entire distributed, multi-instance OpenShift system using multiple pre-built OpenShift VMs. By default each VM runs its own complete system, but this installation path turns off services and configures the remaining services to interact with other hosts. Whether the other hosts are Origin VMs or some other system instances is not important as long as they all meet the <a href="#target-system-requirements">Target System Requirements</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpenShift Installer: Multi-Instance Deployment
----------------------------------------------

What role should this VM fill in the Origin system?
&lt;1&gt; Database server
&lt;2&gt; Message queueing server
&lt;3&gt; Broker
&lt;4&gt; Node

&lt;esc&gt; - Go to main menu</pre>
</div>
</div>
<div class="paragraph">
<p>Once a user selects the role for this VM, the installer calls the Workflow Executable to configure the current Origin VM instance.</p>
</div>
</div>
<div class="sect4">
<h5 id="workflow-install-a-role-on-a-remote-system"><a class="anchor" href="#workflow-install-a-role-on-a-remote-system"></a>Workflow: Install a Role on a Remote System</h5>
<div class="paragraph">
<p>This Workflow causes the Installer to copy data over to a target host and then configure that host to act as one of the <a href="#simplified-deployment-roles">Simplified Deployment Roles</a> as specified in the <a href="#default-configuration">Deployment section</a> of the installer configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpenShift Installer: Remote System Setup

Which role do you want to deploy?
&lt;1&gt; Database server
&lt;2&gt; Message queueing server
&lt;3&gt; Broker
&lt;4&gt; Node

&lt;return&gt; - Continue
&lt;esc&gt; - Go to main menu</pre>
</div>
</div>
<div class="paragraph">
<p>Once a role is selected, the connection details are read from the Deployment settings. If the Node role is selected and more than one Node is defined, the wizard will ask which instance to deploy.</p>
</div>
<div class="paragraph">
<p>When the target host is identified, the installer will attempt to connect to the remote system via SSH. Because this Workflow starts with confirmation of the Deployment settings, the installer can assume at this point that the target host meets the <a href="#target-system-requirements">Target System Requirements</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="workflow-install-a-role-on-the-local-system"><a class="anchor" href="#workflow-install-a-role-on-the-local-system"></a>Workflow: Install a Role on the Local System</h5>
<div class="paragraph">
<p>This Workflow is almost identical to the <a href="#workflow-install-a-role-on-a-remote-system">remote system installation</a>, however, it does not require SSH access to any other system. The user indicates the Role that the current system should assume, and the <a href="#executable">Workflow Executable</a> performs the necessary work on the local system to establish it in the overall OpenShift system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpenShift Installer: Local System Setup

Which role do you want to deploy?
&lt;1&gt; Database server
&lt;2&gt; Message queueing server
&lt;3&gt; Broker
&lt;4&gt; Node

&lt;return&gt; - Continue
&lt;esc&gt; - Go to main menu</pre>
</div>
</div>
<div class="paragraph">
<p>This Workflow is intended for networks where remote, SSH-based deployments from a single host are not possible. This scenario benefits from the portability of the <code>oo-install-cfg.yml</code> file; by copying this into each participating system, a user can bring up each piece of the OpenShift deployment without having to re-define the Role definitions on each host.</p>
</div>
</div>
<div class="sect4">
<h5 id="workflow-download-puppet-templates"><a class="anchor" href="#workflow-download-puppet-templates"></a>Workflow: Download Puppet Templates</h5>
<div class="paragraph">
<p>This workflow exists simply to call attention to the various ways that users can gain access to the Puppet templates that are used by the installer. For OpenShift Origin, the output of this workflow may look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpenShift Installer: Puppet Templates Download
----------------------------------------------

The templates that are packaged with this Origin VM are located at:

    /root/puppet_templates.zip

The latest versions of the puppet templates are always available on GitHub:

    https://github.com/openshift/puppet-openshift_origin

&lt;esc&gt; - Go to main menu</pre>
</div>
</div>
<div class="paragraph">
<p>The only technical requirement for Origin is that the VM packager will need to be instrumented to create and place the zip file referenced in the installer.</p>
</div>
</div>
<div class="sect4">
<h5 id="workflow-display-vm-login-info"><a class="anchor" href="#workflow-display-vm-login-info"></a>Workflow: Display VM Login Info</h5>
<div class="paragraph">
<p><em>(Origin VM only)</em> This workflow simply displays the login information that the <code>oo-login</code> utility displayed by default.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpenShift Origin VM Login Details
---------------------------------

To connect to this Origin VM, use the following information:

OpenShift console: https://broker.openshift.local/console
Console login:     admin
Console password:  admin

IP address: X.X.X.X
SSH user:   openshift
Password:   openshift</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="subscriptions"><a class="anchor" href="#subscriptions"></a>Subscriptions</h4>
<div class="paragraph">
<p>On Fedora-based systems, Installation Workflows can focus on using <code>yum</code> as their primary source for software package downloads. However, the situation is more complex on RHEL. Enterprise systems may still be configured to use <code>yum</code> directly, but there are other ways of establishing software channels that Installation Workflows must be aware of.</p>
</div>
<div class="paragraph">
<p>When a <a href="#installer-workflows">Workflow configuration</a> indicates that a subscription check should be performed, this cues the installer to ask questions that will help to establish one of the four possible software channel sources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>none - The Workflow can assume that all necessary packages are already available on the target system.</p>
</li>
<li>
<p>yum - The Workflow will use <code>yum</code> to install packages, and will create new repo files under <code>/etc/yum.repos.d/</code> if necessary.</p>
</li>
<li>
<p>rhn - The Workflow will use Red Hat Network to add necessary software channels.</p>
</li>
<li>
<p>rhsm - The Workflow will use Red Hat Subscription Manager to add necessary software channels.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="getting-and-storing-subscription-information"><a class="anchor" href="#getting-and-storing-subscription-information"></a>Getting and Storing Subscription Information</h5>
<div class="paragraph">
<p>The "none" and "yum" subscription methods do not require the installer to store particularly sensitive data. However, connecting to RHN or the Red Hat Subscription manager will require the user to provide a username and password. The installer will provide the user with a few different ways of handling this. However, it is first important to understand the difference between <em>temporary</em> and <em>configured</em> subscription settings.</p>
</div>
</div>
<div class="sect4">
<h5 id="temporary-and-configured-subscription-settings"><a class="anchor" href="#temporary-and-configured-subscription-settings"></a>Temporary and Configured Subscription Settings</h5>
<div class="paragraph">
<p>Storing subscription info in the <code>oo-install</code> <a href="#default-configuration">configuration file</a> is convenient but inherently insecure. Taking subscription info at runtime is more secure, but limits the feasibility of unattended deployments. The approach taken by the installer will be to support <em>both</em>.</p>
</div>
<div class="paragraph">
<p>Supporting both methods means that the installer will offer to store subscription information, but will also accept values at runtime that will <em>replace</em> the configured values. The values supplied at runtime can either be provided as arguments to the <code>oo-install</code> command, or can be provided during the course of Workflow configuration.</p>
</div>
</div>
<div class="sect4">
<h5 id="command-line-options"><a class="anchor" href="#command-line-options"></a>Command-Line Options</h5>
<div class="paragraph">
<p>The installer will support three command-line options relevant to subscription info:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-s --subscription-type [TYPE]</code> - <em>none</em>, <em>yum</em>, <em>rhn</em> or <em>rhsm</em></p>
</li>
<li>
<p><code>-u --username USERNAME</code> - Red Hat Login username</p>
</li>
<li>
<p><code>-p --password PASSWORD</code> - Red Hat Login password</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On the subject of <a href="#unattended-installations">unattended installations</a>: Other than the <em>none</em> subscription type, each type will require additional information to work correctly. However, because this information is not as sensitive, it should be added to the installer configuration file.</p>
</div>
</div>
<div class="sect4">
<h5 id="runtime-evaluation"><a class="anchor" href="#runtime-evaluation"></a>Runtime Evaluation</h5>
<div class="paragraph">
<p>When the user is manually stepping through a Workflow, the Subscription information is compiled and evaluated in this order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configuration file</p>
</li>
<li>
<p>Command line</p>
</li>
<li>
<p>User modifications at runtime</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In other words, at runtime, config file subscription info can be superseded by command line arguments, and the user can trump both while configuring the selected Workflow.</p>
</div>
<div class="paragraph">
<p>Additionally, the installer will give the user the opportunity to save their runtime configurations back to the config file, <em>or to only use them for this run of the installer</em>. This behavior supports the need for security in some deployments.</p>
</div>
<div class="paragraph">
<p>When the installer is running unattended, the evaluation order is almost the same, but there is no opportunity for runtime modifications:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configuration file</p>
</li>
<li>
<p>Command line</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This does not guarantee that a given Workflow can run unattended; it is the Workflow&#8217;s "responsibility" to provide questions for capturing and storing other necessary info for unattended operation.</p>
</div>
</div>
<div class="sect4">
<h5 id="passing-subscription-settings-to-workflow-executables"><a class="anchor" href="#passing-subscription-settings-to-workflow-executables"></a>Passing Subscription Settings to Workflow Executables</h5>
<div class="paragraph">
<p>The runtime subscription settings can include a mixture of information that isn&#8217;t necessarily stored in the installer configuration file. For this reason, a workflow executable can&#8217;t inspect the <em>Subscription</em> section of the installer configuration file (if the section is even there) to get at the data that it needs.</p>
</div>
<div class="paragraph">
<p>For this reason, subscription information is passed to the workflow executable as a set of environment variables. All environment variables set by the installer are prefixed with <em>OO_INSTALL_</em> so they can be grepped out of the complete environment.</p>
</div>
<div class="paragraph">
<p>The installer will pass the following environment variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OO_INSTALL_SUBSCRIPTION_TYPE - <em>none</em>, <em>yum</em>, <em>rhn</em>, or <em>rhsm</em></p>
</li>
<li>
<p>OO_INSTALL_RH_USERNAME - Red Hat Login username for <em>rhn</em> and <em>rhsm</em> subscriptions</p>
</li>
<li>
<p>OO_INSTALL_RH_PASSWORD - Red Hat Login password for <em>rhn</em> and <em>rhsm</em> subscriptions</p>
</li>
<li>
<p>OO_INSTALL_REPOS_BASE - For <em>yum</em>; the base URL for the OpenShift repositories</p>
</li>
<li>
<p>OO_INSTALL_RHEL_REPO - For <em>yum</em>; the URL for a RHEL repository</p>
</li>
<li>
<p>OO_INSTALL_JBOSS_REPO_BASE - For <em>yum</em>; the base URL for a JBoss repository</p>
</li>
<li>
<p>OO_INSTALL_RHEL_OPTIONAL_REPO - For <em>yum</em>; the URL for an unsupported RHEL "optional" repo</p>
</li>
<li>
<p>OO_INSTALL_SM_REG_POOL - For <em>rhsm</em>; pool ID for OpenShift subscription</p>
</li>
<li>
<p>OO_INSTALL_SM_REG_POOL_RHEL - For <em>rhsm</em>; pool ID for RHEL subscription</p>
</li>
<li>
<p>OO_INSTALL_RHN_REG_ACTKEY - For <em>rhn</em>; channel activation key</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In practice, not all environment variables may be necessary for the Workflow. That is up to the workflow to decide. The installer passes along all of these values that have been set at runtime.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="backwards-compatibility"><a class="anchor" href="#backwards-compatibility"></a>Backwards Compatibility</h3>
<div class="paragraph">
<p>This PEP describes functionality that was not previously available in OpenShift. From that perspective, backwards compatibility is not a factor in this design. However, anyone wishing to create a <a href="#installer-workflows">Workflow</a> that leverages previously existing scripts will need to adjust them to read system configuration information from the installer&#8217;s <a href="#recording-the-system-configuration">configuration file</a> file.</p>
</div>
</div>
<div class="sect2">
<h3 id="rationale"><a class="anchor" href="#rationale"></a>Rationale</h3>
<div class="paragraph">
<p>The follow sections explain design considerations that were necessary to define reasonable bounds for this PEP.</p>
</div>
<div class="sect3">
<h4 id="text-based-installer"><a class="anchor" href="#text-based-installer"></a>Text-Based Installer</h4>
<div class="paragraph">
<p>The choice to use a text-based installer for this installer was two-fold. First off, per the <a href="https://www.openshift.com/blogs/survey-results-the-openshift-origin-unboxing-experience">survey</a>, the option of a more graphical installer was low in popularity. Second, being command-line invokable, the installer lends itself to use with <a href="#unattended-installations">unattended installations</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="workflows"><a class="anchor" href="#workflows"></a>Workflows</h4>
<div class="paragraph">
<p>The Workflow concept enables this OpenShift installer to be easily reconfigured different deployment scenarios. By providing different <code>workflow.yml</code> files, oo-install RPMs can be customized to different distributions and environments.</p>
</div>
</div>
<div class="sect3">
<h4 id="simplified-deployment-roles"><a class="anchor" href="#simplified-deployment-roles"></a>Simplified Deployment Roles</h4>
<div class="paragraph">
<p>In order to deliver a basic, functional deployment on one or more target hosts, the Workflows that initially ship with the installer will split all of the components of OpenShift into four basic roles, using the specific software as indicated:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Role: Broker</p>
<div class="ulist">
<ul>
<li>
<p>Broker RPM</p>
</li>
<li>
<p>MCollective</p>
</li>
<li>
<p>BIND DNS Server</p>
</li>
</ul>
</div>
</li>
<li>
<p>Role: Node</p>
<div class="ulist">
<ul>
<li>
<p>Node RPM</p>
</li>
<li>
<p>MCollective</p>
</li>
</ul>
</div>
</li>
<li>
<p>Role: MQServer</p>
<div class="ulist">
<ul>
<li>
<p>ActiveMQ</p>
</li>
<li>
<p>MCollective</p>
</li>
</ul>
</div>
</li>
<li>
<p>Role: DBServer</p>
<div class="ulist">
<ul>
<li>
<p>MongoDB</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This division of labor will not satisfy every deployment. The intent is to provide the administrator with a working OpenShift system that can be incrementally adjusted to suit the specific needs of a given environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="target-system-requirements"><a class="anchor" href="#target-system-requirements"></a>Target System Requirements</h4>
<div class="paragraph">
<p>The following expectations are tested by the installer for every target system, with respect to relevant <a href="#remotedeployment">workflow settings</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>For remote deployments only</strong>, the target system must be running and accessible via SSH with the specified user and ssh port. If the SSH session requires password authentication, the installer will ask the user for the password and pass it through to the SSH authentication but will not record it in the <code>oo-install-cfg.yml</code> file. See <a href="#unattended-installations">Unattended Installations</a> for more comments on this.</p>
</li>
<li>
<p>The installing user is root, or has sudo access.</p>
</li>
<li>
<p>The system has <code>yum</code> and can install packages from RPMs. The installer will perform tests to make this determination, leveraging the compatibility tool described in <a href="https://trello.com/c/sYLNUE8d">this user story</a> when it becomes available.</p>
</li>
</ol>
</div>
</div>
</div></div>
<div id="footer">
<div id="footer-text">
<br>
Last updated 2014-06-27 00:11:38 EDT
</div>
<!-- Google Analytics -->
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40375612-1']);
  _gaq.push(['_setDomainName', 'openshift.github.io']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  
  $(document).ready(function() {
    _gaq.push(function() {
      $('a:not([href^="http"])').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Internal Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
      $('a[href^="http"]').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Outbound Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
    });
  });
</script>
<!-- Google Code for Remarketing -->
<script>
  var google_conversion_id = 1007064360;
  var google_conversion_label = "7jfmCMC5ugQQqKqa4AM";
  var google_custom_params = window.google_tag_params;
  var google_remarketing_only = true;
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script>
<noscript>
<div style="display: inline;">
<img alt="" height="1" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1007064360/?value=0&amp;label=7jfmCMC5ugQQqKqa4AM&amp;guid=ON&amp;script=0" style="border-style: none;" width="1">
</div>
</noscript>
</div>
</body>
</html>